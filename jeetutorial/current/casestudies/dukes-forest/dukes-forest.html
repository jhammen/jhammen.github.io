<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Duke&#8217;s Forest Case Study Example :: Jakarta EE Documentation</title>
    <meta name="generator" content="Antora 3.1.3">
    <link rel="stylesheet" href="../../../../_/css/site.css">
    <script>var uiRootPath = '../../../../_'</script>
    <script>!function (theme) {
        if (theme === 'dark') document.documentElement.classList.add('theme-dark')
      }(localStorage && localStorage.getItem('theme') || (matchMedia('(prefers-color-scheme: dark)') && 'dark'))
    </script>
      </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a id="site-title" class="navbar-item" href="../../../..">Jakarta EE Documentation</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
<!--
        <a class="navbar-item" href="#">Home</a>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Products</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Product A</a>
            <a class="navbar-item" href="#">Product B</a>
            <a class="navbar-item" href="#">Product C</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Services</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Service A</a>
            <a class="navbar-item" href="#">Service B</a>
            <a class="navbar-item" href="#">Service C</a>
          </div>
        </div>
 -->
        <div class="navbar-item">
          <span class="control">
            <a class="button is-primary" href="../../../../jakartaee-tutorial/10/jakarta-ee-tutorial.pdf">Download</a>
          </span>
        </div>
      </div>
      <div class="navbar-theme-switcher">
        <span class="switch" title="Switch between Light and Dark Theme">
          <input id="theme-switcher-checkbox" type="checkbox" />
          <label for="theme-switcher-checkbox">Dark Theme</label>
        </span>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="jakartaee-tutorial" data-version="10">
  <div class="toolbar"></div>
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../../index.html">Jakarta EE Tutorial</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Introduction</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../index.html">Preface</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../intro/overview/overview.html">Overview</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../intro/usingexamples/usingexamples.html">Using the Tutorial Examples</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Jakarta EE Core Profile</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Jakarta CDI Lite</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../cdi/cdi-basic/cdi-basic.html">Introduction to Jakarta Contexts and Dependency Injection</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../cdi/cdi-basicexamples/cdi-basicexamples.html">Running the Basic Contexts and Dependency Injection Examples</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../supporttechs/interceptors/interceptors.html">Using Jakarta EE Interceptors</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Jakarta REST</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../websvcs/jaxrs/jaxrs.html">Building RESTful Web Services with Jakarta REST</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../websvcs/jaxrs-client/jaxrs-client.html">Accessing REST Resources with the Jakarta REST Client API</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../websvcs/jaxrs-advanced/jaxrs-advanced.html">Jakarta REST: Advanced Topics and an Example</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Jakarta JSON</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../web/jsonb/jsonb.html">JSON Binding</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../web/jsonp/jsonp.html">JSON Processing</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Jakarta EE Web Profile</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Jakarta CDI Full</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../cdi/cdi-adv/cdi-adv.html">Jakarta Contexts and Dependency Injection: Advanced Topics</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../cdi/cdi-bootstrap-se8/cdi-bootstrap-se8.html">Bootstrapping a CDI Container in Java SE</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../cdi/cdi-adv-examples/cdi-adv-examples.html">Running the Advanced Contexts and Dependency Injection Examples</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Jakarta Validation</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../beanvalidation/bean-validation/bean-validation.html">Introduction to Jakarta Bean Validation</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../beanvalidation/bean-validation-advanced/bean-validation-advanced.html">Bean Validation: Advanced Topics</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../security/security.html">Jakarta Security</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Jakarta Servlets</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../web/webapp/webapp.html">Getting Started with Web Applications</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../web/servlets/servlets.html">Jakarta Servlet Technology</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Jakarta Faces</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../web/faces-intro/faces-intro.html">Jakarta Faces Technology</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../web/faces-facelets/faces-facelets.html">Introduction to Facelets</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../web/faces-page/faces-page.html">Using Jakarta Faces Technology in Web Pages</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../web/faces-page-core/faces-page-core.html">Using Converters, Listeners, and Validators</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../web/faces-develop/faces-develop.html">Developing with Jakarta Faces Technology</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../web/faces-ajax/faces-ajax.html">Using Ajax with Jakarta Faces Technology</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../web/faces-advanced-cc/faces-advanced-cc.html">Composite Components: Advanced Topics and an Example</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../web/faces-custom/faces-custom.html">Creating Custom UI Components and Other Custom Objects</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../web/faces-configure/faces-configure.html">Configuring Jakarta Faces Applications</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../web/faces-ws/faces-ws.html">Using WebSockets with Jakarta Faces Technology</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../web/webi18n/webi18n.html">Internationalizing and Localizing Web Applications</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../web/websocket/websocket.html">Jakarta WebSocket</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Jakarta Persistence</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../persist/persistence-intro/persistence-intro.html">Introduction to Jakarta Persistence</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../persist/persistence-basicexamples/persistence-basicexamples.html">Running the Persistence Examples</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../persist/persistence-querylanguage/persistence-querylanguage.html">The Jakarta Persistence Query Language</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../persist/persistence-criteria/persistence-criteria.html">Using the Criteria API to Create Queries</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../persist/persistence-string-queries/persistence-string-queries.html">Creating and Using String-Based Criteria Queries</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../persist/persistence-locking/persistence-locking.html">Controlling Concurrent Access to Entity Data with Locking</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../persist/persistence-entitygraphs/persistence-entitygraphs.html">Creating Fetch Plans with Entity Graphs</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../persist/persistence-cache/persistence-cache.html">Using a Second-Level Cache with Jakarta Persistence Applications</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Jakarta Enterprise Beans Lite</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../entbeans/ejb-intro/ejb-intro.html">Enterprise Beans</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../entbeans/ejb-gettingstarted/ejb-gettingstarted.html">Getting Started with Enterprise Beans</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../entbeans/ejb-basicexamples/ejb-basicexamples.html">Running the Enterprise Bean Examples</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../entbeans/ejb-async/ejb-async.html">Using Asynchronous Method Invocation in Session Beans</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Jakarta EE Platform</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../messaging/mail-api/mail-api.html">Jakarta Mail</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Jakarta Messaging</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../messaging/jms-concepts/jms-concepts.html">Jakarta Messaging Concepts</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../messaging/jms-examples/jms-examples.html">Jakarta Messaging Examples</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../supporttechs/batch-processing/batch-processing.html">Jakarta Batch</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Advanced</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Web Profile</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../security/security-authentication/security-authentication.html">Jakarta Authentication</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../security/security-authorization/security-authorization.html">Jakarta Authorization</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../supporttechs/transactions/transactions.html">Jakarta Transactions</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../supporttechs/concurrency-utilities/concurrency-utilities.html">Jakarta Concurrency</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Jakarta EE Platform</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../supporttechs/connectors/connectors.html">Jakarta Connectors</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Optional Components</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../web/faces-el/faces-el.html">Jakarta Expression Language</a>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-text">Jakarta XML Binding</span>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Archived</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Web Profile</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../web/jakarta-pages/jakarta-pages.html">Jakarta Pages</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../web/jakarta-tags/jakarta-tags.html">Jakarta Tags</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Jakarta EE Platform</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../websvcs/xml-websvcs/xml-websvcs.html">XML Web Services</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../entbeans/ejb-full/ejb-full.html">Jakarta Enterprise Beans Full</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Jakarta EE Tutorial</span>
    <span class="version">10</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <a class="title" href="../../index.html">Jakarta EE Tutorial</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../../index.html">10</a>
        </li>
        <li class="version">
          <a href="../../../9.1/index.html">9.1</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../../index.html">Jakarta EE Tutorial</a></li>
    <li><a href="dukes-forest.html">Duke&#8217;s Forest Case Study Example</a></li>
  </ul>
</nav>
<div class="page-versions">
  <button class="version-menu-toggle" title="Show other versions of page">10</button>
  <div class="version-menu">
    <a class="version is-current" href="dukes-forest.html">10</a>
    <a class="version" href="../../../9.1/casestudies/dukes-forest/dukes-forest.html">9.1</a>
  </div>
</div>
  <div class="edit-this-page"><a href="https://github.com/jhammen/jakartaee-tutorial/edit/main/src/main/antora/modules/casestudies/pages/dukes-forest/dukes-forest.adoc">Edit this Page</a></div>
  </div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Duke&#8217;s Forest Case Study Example</h1>
<div id="preamble">
<div class="sectionbody">
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>We are working on a fresh, updated Jakarta EE Tutorial. This section hasn&#8217;t yet been updated.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>This chapter describes Duke&#8217;s Forest, a simple e-commerce application that contains several web applications and illustrates the use of multiple Jakarta EE APIs.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_overview_of_the_dukes_forest_case_study_example"><a class="anchor" href="#_overview_of_the_dukes_forest_case_study_example"></a>Overview of the Duke&#8217;s Forest Case Study Example</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Duke&#8217;s Forest is a simple e-commerce application that contains several web applications and illustrates the use of the following Jakarta EE APIs:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Jakarta Faces technology, including Ajax</p>
</li>
<li>
<p>Jakarta Contexts and Dependency Injection (CDI)</p>
</li>
<li>
<p>Jakarta RESTful Web Services</p>
</li>
<li>
<p>Jakarta Persistence</p>
</li>
<li>
<p>Jakarta Bean Validation</p>
</li>
<li>
<p>Jakarta Enterprise Beans technology</p>
</li>
<li>
<p>Jakarta Messaging</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The application consists of the following projects.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Duke&#8217;s Store: A web application that has a product catalog, customer self-registration, and a shopping cart.
It also has an administration interface for product, category, and user management.
The project name is <code>dukes-store</code>.</p>
</li>
<li>
<p>Duke&#8217;s Shipment: A web application that provides an interface for order shipment management.
The project name is <code>dukes-shipment</code>.</p>
</li>
<li>
<p>Duke&#8217;s Payment: A web service application that has a RESTful web service for order payment.
The project name is <code>dukes-payment</code>.</p>
</li>
<li>
<p>Duke&#8217;s Resources: A simple Java archive project that contains all resources used by the web projects.
It includes messages, CSS style sheets, images, JavaScript files, and Jakarta Faces composite components.
The project name is <code>dukes-resources</code>.</p>
</li>
<li>
<p>Entities: A simple Java archive project that contains all Jakarta Persistence entities.
This project is shared among other projects that use the entities.
The project name is <code>entities</code>.</p>
</li>
<li>
<p>Events: A simple Java archive project that contains a POJO class that is used as a CDI event.
The project name is <code>events</code>.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_design_and_architecture_of_dukes_forest"><a class="anchor" href="#_design_and_architecture_of_dukes_forest"></a>Design and Architecture of Duke&#8217;s Forest</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Duke&#8217;s Forest is a complex application consisting of three main projects and three subprojects.
<a href="#_architecture_of_the_dukes_forest_example_application">Figure 1, &#8220;Architecture of the Duke&#8217;s Forest Example Application&#8221;</a> shows the architecture of the three main projects that you will deploy: Duke&#8217;s Store, Duke&#8217;s Shipment, and Duke&#8217;s Payment.
It also shows how Duke&#8217;s Store makes use of the Events and Entities projects.</p>
</div>
<div id="_architecture_of_the_dukes_forest_example_application" class="imageblock">
<div class="content">
<img src="../../common/_images/jakartaeett_dt_062.svg" alt="This figure shows the architecture of the main Duke&#8217;s Forest projects and how they use the Events and Entities projects.">
</div>
<div class="title">Figure 1. Architecture of the Duke&#8217;s Forest Example Application</div>
</div>
<div class="paragraph">
<p>Duke&#8217;s Forest uses the following Jakarta EE platform features:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Jakarta Persistence entities</p>
<div class="ulist">
<ul>
<li>
<p>Bean Validation annotations on the entities for verifying data</p>
</li>
<li>
<p>XML annotations for Jakarta XML binding serialization</p>
</li>
</ul>
</div>
</li>
<li>
<p>Web services</p>
<div class="ulist">
<ul>
<li>
<p>A Jakarta REST web service for payment, with security constraints</p>
</li>
<li>
<p>A Jakarta REST web service based on Jakarta Enterprise Beans</p>
</li>
</ul>
</div>
</li>
<li>
<p>Enterprise beans</p>
<div class="ulist">
<ul>
<li>
<p>Local session beans</p>
</li>
<li>
<p>All enterprise beans packaged within the WAR</p>
</li>
</ul>
</div>
</li>
<li>
<p>Jakarta Contexts and Dependency Injection (CDI)</p>
<div class="ulist">
<ul>
<li>
<p>CDI annotations for Jakarta Faces components</p>
</li>
<li>
<p>A CDI managed bean used as a shopping cart, with conversation scoping</p>
</li>
<li>
<p>Qualifiers</p>
</li>
<li>
<p>Events and event handlers</p>
</li>
</ul>
</div>
</li>
<li>
<p>Servlets</p>
<div class="ulist">
<ul>
<li>
<p>A servlet for dynamic image presentation</p>
</li>
</ul>
</div>
</li>
<li>
<p>Jakarta Faces technology, using Facelets for the web front end</p>
<div class="ulist">
<ul>
<li>
<p>Templating</p>
</li>
<li>
<p>Composite components</p>
</li>
<li>
<p>File upload</p>
</li>
<li>
<p>Resources packaged in a JAR file so they can be found in the classpath</p>
</li>
</ul>
</div>
</li>
<li>
<p>Security</p>
<div class="ulist">
<ul>
<li>
<p>Security constraints on the administrative interface business methods (enterprise beans)</p>
</li>
<li>
<p>Security constraints for customers and administrators (web components)</p>
</li>
<li>
<p>Single Sign-On (SSO) to propagate an authenticated user identity from Duke&#8217;s Store to Duke&#8217;s Shipment</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>The Duke&#8217;s Forest application has two main user interfaces, both packaged within the Duke&#8217;s Store WAR file:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The main interface, for customers and guests</p>
</li>
<li>
<p>The administrative interface used to perform back office operations, such as adding new items to the catalog</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The Duke&#8217;s Shipment application also has a user interface, accessible to administrators.</p>
</div>
<div class="paragraph">
<p><a href="#_interactions_between_dukes_forest_components">Figure 2, &#8220;Interactions between Duke&#8217;s Forest Components&#8221;</a> shows how the web applications and the web service interact.</p>
</div>
<div id="_interactions_between_dukes_forest_components" class="imageblock">
<div class="content">
<img src="../../common/_images/jakartaeett_dt_063.svg" alt="This figure shows the interactions between the Duke&#8217;s Store and Duke&#8217;s Shipment projects (using REST and HTTP), and between the Duke&#8217;s Store and Duke&#8217;s Payment projects (using REST and HTTP).">
</div>
<div class="title">Figure 2. Interactions between Duke&#8217;s Forest Components</div>
</div>
<div class="paragraph">
<p>As illustrated in <a href="#_interactions_between_dukes_forest_components">Figure 2, &#8220;Interactions between Duke&#8217;s Forest Components&#8221;</a>, the customer interacts with the main interface of Duke&#8217;s Store, while the administrator interacts with the administration interface.
Both interfaces access a façade consisting of managed beans and stateless session beans, which in turn interact with the entities that represent database tables.
The façade also interacts with web services APIs that access the Duke&#8217;s Payment web service.
When the payment for an order is approved, Duke&#8217;s Store sends the order to a Jakarta Messaging queue.
The administrator also interacts with the interface of Duke&#8217;s Shipment, which can be accessed either directly through Duke&#8217;s Shipment or from the administration interface of Duke&#8217;s Store by means of a web service.
When the administrator approves an order for shipping, Duke&#8217;s Shipment consumes the order from the Jakarta Messaging queue.</p>
</div>
<div class="paragraph">
<p>The most fundamental building blocks of the application are the Events and Entities projects, which are bundled into Duke&#8217;s Store and Duke&#8217;s Shipment along with the Duke&#8217;s Resources project.</p>
</div>
<div class="sect2">
<h3 id="_the_events_project"><a class="anchor" href="#_the_events_project"></a>The events Project</h3>
<div class="paragraph">
<p>Events are one of the core components of Duke&#8217;s Forest.
The <code>events</code> project, included in all three of the main projects, is the most simple project of the application.
It has only one class, <code>OrderEvent</code>, but this class is responsible for most of the messages between objects in the application.</p>
</div>
<div class="paragraph">
<p>The application can send messages based on events to different components and react to them based on the qualification of the event.
The application supports the following qualifiers:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>@LoggedIn</code>: For authenticated users</p>
</li>
<li>
<p><code>@New</code>: When a new order is created by the shopping cart</p>
</li>
<li>
<p><code>@Paid</code>: When an order is paid for and ready for shipment</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The following code snippet from the <code>PaymentHandler</code> class of Duke&#8217;s Store shows how the <code>@Paid</code> event is handled:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Inject @Paid Event&lt;OrderEvent&gt; eventManager;

...
public void onNewOrder(@Observes @New OrderEvent event) {

    if (processPayment(event)) {
        orderBean.setOrderStatus(event.getOrderID(),
                String.valueOf(OrderBean.Status.PENDING_PAYMENT.getStatus()));
        logger.info("Payment Approved");
        eventManager.fire(event);
    } else {
        orderBean.setOrderStatus(event.getOrderID(),
                String.valueOf(OrderBean.Status.CANCELLED_PAYMENT.getStatus()));
        logger.info("Payment Denied");
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>To enable users to add more events to the project easily or update an event class with more fields for a new client, this component is a separate project within the application.</p>
</div>
</div>
<div class="sect2">
<h3 id="_the_entities_project"><a class="anchor" href="#_the_entities_project"></a>The entities Project</h3>
<div class="paragraph">
<p>The <code>entities</code> project is a Jakarta Persistence project used by both Duke&#8217;s Store and Duke&#8217;s Shipment.
It is generated from the database schema shown in <a href="#_dukes_forest_database_table_and_their_relationships">Figure 3, &#8220;Duke&#8217;s Forest Database Tables and Their Relationships&#8221;</a> and is also used as a base for the entities consumed and produced by the web services through Jakarta XML Binding.
Each entity has validation rules based on business requirements, specified using Jakarta Bean Validation.</p>
</div>
<div id="_dukes_forest_database_table_and_their_relationships" class="imageblock">
<div class="content">
<img src="../../common/_images/jakartaeett_dt_064.svg" alt="This figure shows the database tables in Duke&#8217;s Forest and their relationships.">
</div>
<div class="title">Figure 3. Duke&#8217;s Forest Database Tables and Their Relationships</div>
</div>
<div class="paragraph">
<p>The database schema contains eight tables:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>PERSON</code>, which has a one-to-many relationship with <code>PERSON_GROUPS</code> and <code>CUSTOMER_ORDER</code></p>
</li>
<li>
<p><code>GROUPS</code>, which has a one-to-many relationship with <code>PERSON_GROUPS</code></p>
</li>
<li>
<p><code>PERSON_GROUPS</code>, which has a many-to-one relationship with <code>PERSON</code> and <code>GROUPS</code> (it is the join table between those two tables)</p>
</li>
<li>
<p><code>PRODUCT</code>, which has a many-to-one relationship with <code>CATEGORY</code> and a one-to-many relationship with <code>ORDER_DETAIL</code></p>
</li>
<li>
<p><code>CATEGORY</code>, which has a one-to-many relationship with <code>PRODUCT</code></p>
</li>
<li>
<p><code>CUSTOMER_ORDER</code>, which has a one-to-many relationship with <code>ORDER_DETAIL</code> and a many-to-one relationship with <code>PERSON</code> and <code>ORDER_STATUS</code></p>
</li>
<li>
<p><code>ORDER_DETAIL</code>, which has a many-to-one relationship with <code>PRODUCT</code> and <code>CUSTOMER_ORDER</code> (it is the join table between those two tables)</p>
</li>
<li>
<p><code>ORDER_STATUS</code>, which has a one-to-many relationship with <code>CUSTOMER_ORDER</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The entity classes that correspond to these tables are as follows.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>Person</code>, which defines attributes common to customers and administrators.
These attributes are the person&#8217;s name and contact information, including street and email addresses.
The email address has a Bean Validation annotation to ensure that the submitted data is well-formed.
The generated table for the <code>Person</code> entity also has a <code>DTYPE</code> field that represents the discriminator column.
Its value identifies the subclass (<code>Customer</code> or <code>Administrator</code>) to which the person belongs.</p>
</li>
<li>
<p><code>Customer</code>, a specialization of <code>Person</code> with a specific field for <code>CustomerOrder</code> objects.</p>
</li>
<li>
<p><code>Administrator</code>, a specialization of <code>Person</code> with fields for administration privileges.</p>
</li>
<li>
<p><code>Groups</code>, which represents the group (<code>USERS</code> or <code>ADMINS</code>) to which the user belongs.</p>
</li>
<li>
<p><code>Product</code>, which defines attributes for products.
These attributes include name, price, description, associated image, and category.</p>
</li>
<li>
<p><code>Category</code>, which defines attributes for product categories.
These attributes include a name and a set of tags.</p>
</li>
<li>
<p><code>CustomerOrder</code>, which defines attributes for orders placed by customers.
These attributes include an amount and a date, along with id values for the customer and the order detail.</p>
</li>
<li>
<p><code>OrderDetail</code>, which defines attributes for the order detail.
These attributes include a quantity and id values for the product and the customer.</p>
</li>
<li>
<p><code>OrderStatus</code>, which defines a status attribute for each order.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_the_dukes_payment_project"><a class="anchor" href="#_the_dukes_payment_project"></a>The dukes-payment Project</h3>
<div class="paragraph">
<p>The <code>dukes-payment</code> project is a web project that holds a simple Payment web service.
Since this is an example application, it does not obtain any real credit information or even customer status to validate the payment.
For now, the only rule imposed by the payment system is to deny all orders above $1,000.
This application illustrates a common scenario where a third-party payment service is used to validate credit cards or bank payments.</p>
</div>
<div class="paragraph">
<p>The project uses HTTP Basic Authentication and JAAS (Java Authentication and Authorization Service) to authenticate a customer to a Jakarta REST web service.
The implementation itself exposes a simple method, <code>processPayment</code>, which receives an <code>OrderEvent</code> to evaluate and approve or deny the order payment.
The method is called from the checkout process of Duke&#8217;s Store.</p>
</div>
</div>
<div class="sect2">
<h3 id="_the_dukes_resources_project"><a class="anchor" href="#_the_dukes_resources_project"></a>The dukes-resources Project</h3>
<div class="paragraph">
<p>The <code>dukes-resources</code> project contains a number of files used by both Duke&#8217;s Store and Duke&#8217;s Shipment, bundled into a JAR file placed in the classpath.
The resources are in the <code>src/main/resources</code> directory:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>META-INF/resources/css</code>: Two style sheets, <code>default.css</code> and <code>facescrud.css</code></p>
</li>
<li>
<p><code>META-INF/resources/img</code>: Images used by the projects</p>
</li>
<li>
<p><code>META-INF/resources/js</code>: A JavaScript file, <code>util.js</code></p>
</li>
<li>
<p><code>META-INF/resources/util</code>: Composite components used by the projects</p>
</li>
<li>
<p><code>bundles/Bundle.properties</code>: Application messages in English</p>
</li>
<li>
<p><code>bundles/Bundle_es.properties</code>: Application messages in Spanish</p>
</li>
<li>
<p><code>ValidationMessages.properties</code>: Bean Validation messages in English</p>
</li>
<li>
<p><code>ValidationMessages_es.properties</code>: Bean Validation messages in Spanish</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_the_dukes_store_project"><a class="anchor" href="#_the_dukes_store_project"></a>The Duke&#8217;s Store Project</h3>
<div class="paragraph">
<p>Duke&#8217;s Store, a web application, is the core application of Duke&#8217;s Forest.
It is responsible for the main store interface for customers as well as the administration interface.</p>
</div>
<div class="paragraph">
<p>The main interface of Duke&#8217;s Store allows the user to perform the following tasks:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Browsing the product catalog</p>
</li>
<li>
<p>Signing up as a new customer</p>
</li>
<li>
<p>Adding products to the shopping cart</p>
</li>
<li>
<p>Checking out</p>
</li>
<li>
<p>Viewing order status</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The administration interface of Duke&#8217;s Store allows administrators to perform the following tasks:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Product maintenance (create, edit, update, delete)</p>
</li>
<li>
<p>Category maintenance (create, edit, update, delete)</p>
</li>
<li>
<p>Customer maintenance (create, edit, update, delete)</p>
</li>
<li>
<p>Group maintenance (create, edit, update, delete)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The project also uses stateless session beans as façades for interactions with the Jakarta Persistence entities described in <a href="#_the_entities_project">The entities Project</a>, and CDI managed beans as controllers for interactions with Facelets pages.
The project thus follows the MVC (Model-View-Controller) pattern and applies the same pattern to all entities and pages, as in the following example.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>AbstractFacade</code> is an abstract class that receives a <code>Type&lt;T&gt;</code> and implements the common operations (CRUD) for this type, where <code>&lt;T&gt;</code> is a Persistence entity.</p>
</li>
<li>
<p><code>ProductBean</code> is a stateless session bean that extends <code>AbstractFacade</code>, applying <code>Product</code> as <code>Type&lt;T&gt;</code>, and injects the <code>PersistenceContext</code> for the <code>EntityManager</code>.
This bean implements any custom methods needed to interact with the <code>Product</code> entity or to call a custom query.</p>
</li>
<li>
<p><code>ProductController</code> is a CDI managed bean that interacts with the necessary enterprise beans and Facelets pages to control the way the data will be displayed.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><code>ProductBean</code> begins as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Stateless
public class ProductBean extends AbstractFacade&lt;Product&gt; {
    private static final Logger logger =
        Logger.getLogger(ProductBean.class.getCanonicalName());

    @PersistenceContext(unitName="forestPU")
    private EntityManager em;

    @Override
    protected EntityManager getEntityManager() {
        return em;
    }
    ...
}</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="_enterprise_beans_used_in_dukes_store"><a class="anchor" href="#_enterprise_beans_used_in_dukes_store"></a>Enterprise Beans Used in Duke&#8217;s Store</h4>
<div class="paragraph">
<p>The enterprise beans used in Duke&#8217;s Store provide the business logic for the application and are located in the <code>com.forest.ejb</code> package.
All are stateless session beans.</p>
</div>
<div class="paragraph">
<p><code>AbstractFacade</code> is not an enterprise bean but an abstract class that implements common operations for <code>Type&lt;T&gt;</code>, where <code>&lt;T&gt;</code> is a Persistence entity.</p>
</div>
<div class="paragraph">
<p>Most of the other beans extend <code>AbstractFacade</code>, inject the <code>PersistenceContext</code>, and implement any needed custom methods:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>AdministratorBean</code></p>
</li>
<li>
<p><code>CategoryBean</code></p>
</li>
<li>
<p><code>EventDispatcherBean</code></p>
</li>
<li>
<p><code>GroupsBean</code></p>
</li>
<li>
<p><code>OrderBean</code></p>
</li>
<li>
<p><code>OrderDetailBean</code></p>
</li>
<li>
<p><code>OrderJMSManager</code></p>
</li>
<li>
<p><code>OrderStatusBean</code></p>
</li>
<li>
<p><code>ProductBean</code></p>
</li>
<li>
<p><code>ShoppingCart</code></p>
</li>
<li>
<p><code>UserBean</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The <code>ShoppingCart</code> class, although it is in the <code>ejb</code> package, is a CDI managed bean with conversation scope, which means that the request information will persist across multiple requests.
Also, <code>ShoppingCart</code> is responsible for starting the event chain for customer orders, which invokes the RESTful web service in <code>dukes-payment</code> and publishes an order to the Jakarta Messaging queue for shipping approval if the payment is successful.</p>
</div>
</div>
<div class="sect3">
<h4 id="_facelets_files_used_in_the_main_interface_of_dukes_store"><a class="anchor" href="#_facelets_files_used_in_the_main_interface_of_dukes_store"></a>Facelets Files Used in the Main Interface of Duke&#8217;s Store</h4>
<div class="paragraph">
<p>Like the other case study examples, Duke&#8217;s Store uses Facelets to display the user interface.
The main interface uses a large number of Facelets pages to display different areas.
The pages are grouped into directories based on which module they handle.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>template.xhtml</code>: Template file, used for both main and administration interfaces.
It first performs a browser check to verify that the user&#8217;s browser supports HTML 5, which is required for Duke&#8217;s Forest.
It divides the screen into several areas and specifies the client page for each area.</p>
</li>
<li>
<p><code>topbar.xhtml</code>: Page for the login area at the top of the screen.</p>
</li>
<li>
<p><code>top.xhtml</code>: Page for the title area.</p>
</li>
<li>
<p><code>left.xhtml</code>: Page for the left sidebar.</p>
</li>
<li>
<p><code>index.xhtml</code>: Page for the main screen content.</p>
</li>
<li>
<p><code>login.xhtml</code>: Login page specified in <code>web.xml</code>.
The main login interface is provided in <code>topbar.xhtml</code>, but this page appears if there is a login error.</p>
</li>
<li>
<p><code>admin</code> directory: Pages related to the administration interface, described in <a href="#_facelets_files_used_in_the_administration_interface_of_dukes_store">Facelets Files Used in the Administration Interface of Duke&#8217;s Store</a>.</p>
</li>
<li>
<p><code>customer</code> directory: Pages related to customers (<code>Create.xhtml</code>, <code>Edit.xhtml</code>, <code>List.xhtml</code>, <code>Profile.xhtml</code>, <code>View.xhtml</code>).</p>
</li>
<li>
<p><code>order</code> directory: Pages related to orders (<code>Create.xhtml</code>, <code>List.xhtml</code>, <code>MyOrders.xhtml</code>, <code>View.xhtml</code>).</p>
</li>
<li>
<p><code>orderDetail</code> directory: Popup page allowing users to view details of an order (<code>View_popup.xhtml</code>).</p>
</li>
<li>
<p><code>product</code> directory: Pages related to products (<code>List.xhtml</code>, <code>ListCategory.xhtml</code>, <code>View.xhtml</code>).</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_facelets_files_used_in_the_administration_interface_of_dukes_store"><a class="anchor" href="#_facelets_files_used_in_the_administration_interface_of_dukes_store"></a>Facelets Files Used in the Administration Interface of Duke&#8217;s Store</h4>
<div class="paragraph">
<p>The Facelets pages for the administration interface of Duke&#8217;s Store are found in the <code>web/admin</code> directory:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>administrator</code> directory: Pages related to administrator management (<code>Create.xhtml</code>, <code>Edit.xhtml</code>, <code>List.xhtml</code>, <code>View.xhtml</code>)</p>
</li>
<li>
<p><code>category</code> directory: Pages related to product category management (<code>Create.xhtml</code>, <code>Edit.xhtml</code>, <code>List.xhtml</code>, <code>View.xhtml</code>)</p>
</li>
<li>
<p><code>customer</code> directory: Pages related to customer management (<code>Create.xhtml</code>, <code>Edit.xhtml</code>, <code>List.xhtml</code>, <code>Profile.xhtml</code>, <code>View.xhtml</code>)</p>
</li>
<li>
<p><code>groups</code> directory: Pages related to group management (<code>Create.xhtml</code>, <code>Edit.xhtml</code>, <code>List.xhtml</code>, <code>View.xhtml</code>)</p>
</li>
<li>
<p><code>order</code> directory: Pages related to order management (<code>Create.xhtml</code>, <code>Edit.xhtml</code>, <code>List.xhtml</code>, <code>View.xhtml</code>)</p>
</li>
<li>
<p><code>orderDetail</code> directory: Popup page allowing the administrator to view details of an order (<code>View_popup.xhtml</code>)</p>
</li>
<li>
<p><code>product</code> directory: Pages related to product management (<code>Confirm.xhtml</code>, <code>Create.xhtml</code>, <code>Edit.xhtml</code>, <code>List.xhtml</code>, <code>View.xhtml</code>)</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_managed_beans_used_in_dukes_store"><a class="anchor" href="#_managed_beans_used_in_dukes_store"></a>Managed Beans Used in Duke&#8217;s Store</h4>
<div class="paragraph">
<p>Duke&#8217;s Store uses the following CDI managed beans, which correspond to the enterprise beans.
The beans are in the <code>com.forest.web</code> package:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>AdministratorController</code></p>
</li>
<li>
<p><code>CategoryController</code></p>
</li>
<li>
<p><code>CustomerController</code></p>
</li>
<li>
<p><code>CustomerOrderController</code></p>
</li>
<li>
<p><code>GroupsController</code></p>
</li>
<li>
<p><code>OrderDetailController</code></p>
</li>
<li>
<p><code>OrderStatusController</code></p>
</li>
<li>
<p><code>ProductController</code></p>
</li>
<li>
<p><code>UserController</code></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_helper_classes_used_in_dukes_store"><a class="anchor" href="#_helper_classes_used_in_dukes_store"></a>Helper Classes Used in Duke&#8217;s Store</h4>
<div class="paragraph">
<p>The CDI managed beans in the main interface of Duke&#8217;s Store use the following helper classes, found in the <code>com.forest.web.util</code> package:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>AbstractPaginationHelper</code>: An abstract class with methods used by the managed beans</p>
</li>
<li>
<p><code>ImageServlet</code>: A servlet class that retrieves the image content from the database and displays it</p>
</li>
<li>
<p><code>FacesUtil</code>: Class used for Jakarta Faces operations, such as queuing messages on a <code>FacesContext</code> instance</p>
</li>
<li>
<p><code>MD5Util</code>: Class used by the <code>CustomerController</code> managed bean to generate an encrypted password for a user</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_qualifiers_used_in_dukes_store"><a class="anchor" href="#_qualifiers_used_in_dukes_store"></a>Qualifiers Used in Duke&#8217;s Store</h4>
<div class="paragraph">
<p>Duke&#8217;s Store defines the following qualifiers in the <code>com.forest.qualifiers</code> package:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>@LoggedIn</code>: Qualifies a user as having logged in</p>
</li>
<li>
<p><code>@New</code>: Qualifies an order as new</p>
</li>
<li>
<p><code>@Paid</code>: Qualifies an order as paid</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_event_handlers_used_in_dukes_store"><a class="anchor" href="#_event_handlers_used_in_dukes_store"></a>Event Handlers Used in Duke&#8217;s Store</h4>
<div class="paragraph">
<p>Duke&#8217;s Store defines event handlers related to the <code>OrderEvent</code> class packaged in the <code>events</code> project (see <a href="#_the_events_project">The events Project</a>).
The event handlers are in the <code>com.forest.handlers</code> package.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>IOrderHandler</code>: The <code>IOrderHandler</code> interface defines a method, <code>onNewOrder</code>, implemented by the two handler classes.</p>
</li>
<li>
<p><code>PaymentHandler</code>: The <code>ShoppingCart</code> bean fires an <code>OrderEvent</code> qualified as <code>@New</code>.
The <code>onNewOrder</code> method of <code>PaymentHandler</code> observes these events and, when it intercepts them, processes the payment using the Duke&#8217;s Payment web service.
After a successful response from the web service, <code>PaymentHandler</code> fires the <code>OrderEvent</code> again, this time qualified as <code>@Paid</code>.</p>
</li>
<li>
<p><code>DeliveryHandler</code>: The <code>onNewOrder</code> method of <code>DeliveryHandler</code> observes <code>OrderEvent</code> objects qualified as <code>@Paid</code> (orders paid and ready for delivery) and modifies the order status to <code>PENDING_SHIPMENT</code>.
When an administrator accesses Duke&#8217;s Shipment, it will call the Order Service, a RESTful web service, and ask for all orders in the database that are ready for delivery.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_deployment_descriptors_used_in_dukes_store"><a class="anchor" href="#_deployment_descriptors_used_in_dukes_store"></a>Deployment Descriptors Used in Duke&#8217;s Store</h4>
<div class="paragraph">
<p>Duke&#8217;s Store uses the following deployment descriptors, located in the <code>web/WEB-INF</code> directory:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>faces-config.xml</code>: The Jakarta Faces configuration file</p>
</li>
<li>
<p><code>glassfish-web.xml</code>: The configuration file specific to GlassFish Server</p>
</li>
<li>
<p><code>web.xml</code>: The web application configuration file</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_the_dukes_shipment_project"><a class="anchor" href="#_the_dukes_shipment_project"></a>The Duke&#8217;s Shipment Project</h3>
<div class="paragraph">
<p>Duke&#8217;s Shipment is a web application with a login page, a main Facelets page, and some other objects.
This application, which is accessible only to administrators, consumes orders from a Jakarta Messaging queue and calls the RESTful web service exposed by Duke&#8217;s Store to update the order status.
The main page of Duke&#8217;s Shipment shows a list of orders pending shipping approval and a list of shipped orders.
The administrator can approve or deny orders for shipping.
If approved, the order is shipped, and it appears under the Shipped heading.
If denied, the order disappears from the page, and on the customer&#8217;s Orders list it appears as cancelled.</p>
</div>
<div class="paragraph">
<p>There is also a gear icon on the Pending list that makes an Ajax call to the Order Service to refresh the list without refreshing the page.
The code looks like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;h:commandLink&gt;
    &lt;h:graphicImage library="img" title="Check for new orders"
                    style="border:0px" name="refresh.png"/&gt;
    &lt;f:ajax execute="@form" render="@form" /&gt;
&lt;/h:commandLink&gt;</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="_enterprise_beans_used_in_dukes_shipment"><a class="anchor" href="#_enterprise_beans_used_in_dukes_shipment"></a>Enterprise Beans Used in Duke&#8217;s Shipment</h4>
<div class="paragraph">
<p>The <code>UserBean</code> stateless session bean used in Duke&#8217;s Shipment provides the business logic for the application and is located in the <code>com.forest.shipment.session</code> package.</p>
</div>
<div class="paragraph">
<p>Like Duke&#8217;s Store, Duke&#8217;s Shipment uses the <code>AbstractFacade</code> class.
This class is not an enterprise bean but an abstract class that implements common operations for <code>Type&lt;T&gt;</code>, where <code>&lt;T&gt;</code> is a Jakarta Persistence entity.</p>
</div>
<div class="paragraph">
<p>The <code>OrderBrowser</code> stateless session bean, located in the <code>com.forest.shipment.ejb</code> package, has one method that browses the Jakarta Messaging order queue and another that consumes an order message after the administrator approves or denies the order for shipment.</p>
</div>
</div>
<div class="sect3">
<h4 id="_facelets_files_used_in_dukes_shipment"><a class="anchor" href="#_facelets_files_used_in_dukes_shipment"></a>Facelets Files Used in Duke&#8217;s Shipment</h4>
<div class="paragraph">
<p>Duke&#8217;s Shipment has only one page, so it has many fewer Facelets files than Duke&#8217;s Store.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>template.xhtml</code>: The template file, like the one in Duke&#8217;s Store, first performs a browser check to verify that the user&#8217;s browser supports HTML 5, which is required for Duke&#8217;s Forest.
It divides the screen into areas and specifies the client page for each area.</p>
</li>
<li>
<p><code>topbar.xhtml</code>: Page for the login area at the top of the screen.</p>
</li>
<li>
<p><code>top.xhtml</code>: Page for the title area.</p>
</li>
<li>
<p><code>index.xhtml</code>: Page for the initial main screen content.</p>
</li>
<li>
<p><code>login.xhtml</code>: Login page specified in <code>web.xml</code>.
The main login interface is provided in <code>topbar.xhtml</code>, but this page appears if there is a login error.</p>
</li>
<li>
<p><code>admin/index.xhtml</code>: Page for the main screen content after authentication.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_managed_beans_used_in_dukes_shipment"><a class="anchor" href="#_managed_beans_used_in_dukes_shipment"></a>Managed Beans Used in Duke&#8217;s Shipment</h4>
<div class="paragraph">
<p>Duke&#8217;s Shipment uses the following CDI managed beans, in the <code>com.forest.shipment</code> package:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>web.ShippingBean</code>: Managed bean that acts as a client to the Order Service</p>
</li>
<li>
<p><code>web.UserController</code>: Managed bean that corresponds to the <code>UserBean</code> session bean</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_helper_class_used_in_dukes_shipment"><a class="anchor" href="#_helper_class_used_in_dukes_shipment"></a>Helper Class Used in Duke&#8217;s Shipment</h4>
<div class="paragraph">
<p>The Duke&#8217;s Shipment managed beans use only one helper class, found in the <code>com.forest.shipment.web.util</code> package:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>FacesUtil</code>: Class used for Jakarta Faces operations, such as queuing messages on a <code>FacesContext</code> instance</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_qualifier_used_in_dukes_shipment"><a class="anchor" href="#_qualifier_used_in_dukes_shipment"></a>Qualifier Used in Duke&#8217;s Shipment</h4>
<div class="paragraph">
<p>Duke&#8217;s Shipment includes the <code>@LoggedIn</code> qualifier described in <a href="#_qualifiers_used_in_dukes_store">Qualifiers Used in Duke&#8217;s Store</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_deployment_descriptors_used_in_dukes_shipment"><a class="anchor" href="#_deployment_descriptors_used_in_dukes_shipment"></a>Deployment Descriptors Used in Duke&#8217;s Shipment</h4>
<div class="paragraph">
<p>Duke&#8217;s Shipment uses the following deployment descriptors:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>faces-config.xml</code>: The Jakarta Faces configuration file</p>
</li>
<li>
<p><code>glassfish-web.xml</code>: The configuration file specific to GlassFish Server</p>
</li>
<li>
<p><code>web.xml</code>: The web application configuration file</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_building_and_deploying_the_dukes_forest_case_study_application"><a class="anchor" href="#_building_and_deploying_the_dukes_forest_case_study_application"></a>Building and Deploying the Duke&#8217;s Forest Case Study Application</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can use NetBeans IDE or Maven to build and deploy Duke&#8217;s Forest.</p>
</div>
<div class="sect2">
<h3 id="_to_build_and_deploy_the_dukes_forest_application_using_netbeans_ide"><a class="anchor" href="#_to_build_and_deploy_the_dukes_forest_application_using_netbeans_ide"></a>To Build and Deploy the Duke&#8217;s Forest Application Using NetBeans IDE</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Make sure that GlassFish Server has been started (see <a href="../../intro/usingexamples/usingexamples.html#_starting_and_stopping_glassfish_server" class="xref page">Starting and Stopping GlassFish Server</a>), as well as the database server (see <a href="../../intro/usingexamples/usingexamples.html#_starting_and_stopping_apache_derby" class="xref page">Starting and Stopping Apache Derby</a>).</p>
</li>
<li>
<p>From the File menu, choose Open Project.</p>
</li>
<li>
<p>In the Open Project dialog box, navigate to:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asciidoc hljs" data-lang="asciidoc">jakartaee-examples/tutorial/case-studies</code></pre>
</div>
</div>
</li>
<li>
<p>Select the <code>dukes-forest</code> folder.</p>
</li>
<li>
<p>Select the Open Required Projects check box and click Open Project.</p>
</li>
<li>
<p>Right-click the <code>dukes-forest</code> folder and select Build.</p>
<div class="paragraph">
<p>This task configures the server, creates and populates the database, builds all the subprojects, assembles them into JAR and WAR files, and deploys the <code>dukes-payment</code>, <code>dukes-store,</code> and <code>dukes-shipment</code> applications.</p>
</div>
<div class="paragraph">
<p>To configure the server, this task creates a JDBC security realm named <code>jdbcRealm</code>, enables default principal-to-role mapping, and enables single sign-on (SSO) for the HTTP Service.</p>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_to_build_and_deploy_the_dukes_forest_application_using_maven"><a class="anchor" href="#_to_build_and_deploy_the_dukes_forest_application_using_maven"></a>To Build and Deploy the Duke&#8217;s Forest Application Using Maven</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Make sure that GlassFish Server has been started (see <a href="../../intro/usingexamples/usingexamples.html#_starting_and_stopping_glassfish_server" class="xref page">Starting and Stopping GlassFish Server</a>), as well as the database server (see <a href="../../intro/usingexamples/usingexamples.html#_starting_and_stopping_apache_derby" class="xref page">Starting and Stopping Apache Derby</a>).</p>
</li>
<li>
<p>In a terminal window, go to:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asciidoc hljs" data-lang="asciidoc">jakartaee-examples/tutorial/case-studies/dukes-forest/</code></pre>
</div>
</div>
</li>
<li>
<p>Enter the following command to configure the server, create and populate the database, build all the subprojects, assemble them into JAR and WAR files, and deploy the <code>dukes-payment</code>, <code>dukes-store,</code> and <code>dukes-shipment</code> applications:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">mvn install</code></pre>
</div>
</div>
<div class="paragraph">
<p>To configure the server, this task creates a JDBC security realm named <code>jdbcRealm</code>, enables default principal-to-role mapping, and enables single sign-on (SSO) for the HTTP Service.</p>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_running_the_dukes_forest_application"><a class="anchor" href="#_running_the_dukes_forest_application"></a>Running the Duke&#8217;s Forest Application</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Running the Duke&#8217;s Forest application involves several tasks:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Registering as a customer of Duke&#8217;s Store</p>
</li>
<li>
<p>As a customer, purchasing products</p>
</li>
<li>
<p>As an administrator, approving or denying shipment of a product</p>
</li>
<li>
<p>As an administrator, creating a new product, customer, group, or category</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_to_register_as_a_dukes_store_customer"><a class="anchor" href="#_to_register_as_a_dukes_store_customer"></a>To Register as a Duke&#8217;s Store Customer</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In a web browser, enter the following URL:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asciidoc hljs" data-lang="asciidoc">http://localhost:8080/dukes-store</code></pre>
</div>
</div>
<div class="paragraph">
<p>The Duke&#8217;s Forest - Store page opens.</p>
</div>
</li>
<li>
<p>Click Sign Up at the top of the page.</p>
</li>
<li>
<p>Fill in the form fields, then click Save.</p>
<div class="paragraph">
<p>All fields are required, and the Password value must be at least 7 characters in length.</p>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_to_purchase_products"><a class="anchor" href="#_to_purchase_products"></a>To Purchase Products</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>To log in as the user you created, or as one of two users already in the database, enter the user name and password and click Log In.</p>
<div class="paragraph">
<p>The preexisting users have the user names <code>jack@example.com</code> and <code>robert@example.com</code>, and they both have the same password, <code>1234</code>.</p>
</div>
</li>
<li>
<p>Click Products in the left sidebar.</p>
</li>
<li>
<p>On the page that appears, click one of the categories (Plants, Food, Services, or Tools).</p>
</li>
<li>
<p>Choose a product and click Add to Cart.</p>
<div class="paragraph">
<p>You can order only one of any one product, but you can order multiple different products in multiple categories.
The products and a running total appear in the Shopping Cart in the left sidebar.</p>
</div>
</li>
<li>
<p>When you have finished choosing products, click Checkout.</p>
<div class="paragraph">
<p>A message appears: "Your order is being processed. Check the Orders page to see the status of your order."</p>
</div>
</li>
<li>
<p>Click Orders in the left sidebar to verify your order.</p>
<div class="paragraph">
<p>If the total of the order exceeds $1,000, the status of the order is "Order cancelled," because the Payment web service denies orders over that limit.
Otherwise, the status is "Ready to ship."</p>
</div>
</li>
<li>
<p>When you have finished placing orders, click Logout at the top of the page.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_to_approve_shipment_of_a_product"><a class="anchor" href="#_to_approve_shipment_of_a_product"></a>To Approve Shipment of a Product</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Log in to Duke&#8217;s Store as an administrator.</p>
<div class="paragraph">
<p>Your user name is <code>admin@example.com</code>, and your password is <code>1234</code>.</p>
</div>
<div class="paragraph">
<p>The main administration page allows you to view categories, customers, administrators, groups, products, and orders, and to create new objects of all types except orders.</p>
</div>
</li>
<li>
<p>At the bottom of the page, click Approve Shipment.</p>
<div class="paragraph">
<p>This action takes you to Duke&#8217;s Shipment, retaining your administrator login.</p>
</div>
</li>
<li>
<p>On the Pending list, click Approve to approve an order and move it to the Shipped area of the page.</p>
<div class="paragraph">
<p>If you click Deny, the order disappears from the page.
If you log in to Duke&#8217;s Store again as the customer, it will appear in the Orders list as "Order cancelled."</p>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>To return to Duke&#8217;s Store from Duke&#8217;s Shipment, click Return to Duke&#8217;s Store.</p>
</div>
</div>
<div class="sect2">
<h3 id="_to_create_a_new_product"><a class="anchor" href="#_to_create_a_new_product"></a>To Create a New Product</h3>
<div class="paragraph">
<p>You can create other kinds of objects as well as products.
Creating products is more complex than the other creation processes, so it is described here.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Log in to Duke&#8217;s Store as an administrator.</p>
</li>
<li>
<p>On the main administration page, click Create New Product.</p>
</li>
<li>
<p>Enter values in the Name, Price, and Description fields.</p>
</li>
<li>
<p>Select a category, then click Next.</p>
</li>
<li>
<p>On the Upload the Product Image page, click Browse to locate an image on your file system using a file chooser.</p>
</li>
<li>
<p>Click Next.</p>
</li>
<li>
<p>On the next page, view the product fields, then click Done.</p>
</li>
<li>
<p>Click Products in the left sidebar, then click the category to verify that the product has been added.</p>
</li>
<li>
<p>Click Administration at the top of the page to return to the main administration page, or click Logout to log out.</p>
</li>
</ol>
</div>
</div>
</div>
</div>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <p>This page was built using the Antora default UI.</p>
  <p>The source code for this UI is licensed under the terms of the MPL-2.0 license.</p>
</footer>
<script id="site-script" src="../../../../_/js/site.js" data-ui-root-path="../../../../_"></script>
<script async src="../../../../_/js/vendor/highlight.js"></script>
  </body>
</html>
