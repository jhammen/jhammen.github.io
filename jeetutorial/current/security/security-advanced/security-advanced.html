<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Jakarta EE Security: Advanced Topics :: Jakarta EE Documentation</title>
    <meta name="generator" content="Antora 3.1.3">
    <link rel="stylesheet" href="../../../../_/css/site.css">
    <script>var uiRootPath = '../../../../_'</script>
    <script>!function (theme) {
        if (theme === 'dark') document.documentElement.classList.add('theme-dark')
      }(localStorage && localStorage.getItem('theme') || (matchMedia('(prefers-color-scheme: dark)') && 'dark'))
    </script>
      </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a id="site-title" class="navbar-item" href="../../../..">Jakarta EE Documentation</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
<!--
        <a class="navbar-item" href="#">Home</a>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Products</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Product A</a>
            <a class="navbar-item" href="#">Product B</a>
            <a class="navbar-item" href="#">Product C</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Services</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Service A</a>
            <a class="navbar-item" href="#">Service B</a>
            <a class="navbar-item" href="#">Service C</a>
          </div>
        </div>
 -->
        <div class="navbar-item">
          <span class="control">
            <a class="button is-primary" href="../../../../jakartaee-tutorial/10/jakarta-ee-tutorial.pdf">Download</a>
          </span>
        </div>
      </div>
      <div class="navbar-theme-switcher">
        <span class="switch" title="Switch between Light and Dark Theme">
          <input id="theme-switcher-checkbox" type="checkbox" />
          <label for="theme-switcher-checkbox">Dark Theme</label>
        </span>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="jakartaee-tutorial" data-version="10">
  <div class="toolbar"></div>
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../../index.html">Jakarta EE Tutorial</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Introduction</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../index.html">Preface</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../intro/overview/overview.html">Overview</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../intro/usingexamples/usingexamples.html">Using the Tutorial Examples</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Jakarta EE Core Profile</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Jakarta CDI Lite</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../cdi/cdi-basic/cdi-basic.html">Introduction to Jakarta Contexts and Dependency Injection</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../cdi/cdi-basicexamples/cdi-basicexamples.html">Running the Basic Contexts and Dependency Injection Examples</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../supporttechs/interceptors/interceptors.html">Using Jakarta EE Interceptors</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Jakarta REST</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../websvcs/jaxrs/jaxrs.html">Building RESTful Web Services with Jakarta REST</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../websvcs/jaxrs-client/jaxrs-client.html">Accessing REST Resources with the Jakarta REST Client API</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../websvcs/jaxrs-advanced/jaxrs-advanced.html">Jakarta REST: Advanced Topics and an Example</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Jakarta JSON</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../web/jsonb/jsonb.html">JSON Binding</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../web/jsonp/jsonp.html">JSON Processing</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Jakarta EE Web Profile</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Jakarta CDI Full</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../cdi/cdi-adv/cdi-adv.html">Jakarta Contexts and Dependency Injection: Advanced Topics</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../cdi/cdi-bootstrap-se8/cdi-bootstrap-se8.html">Bootstrapping a CDI Container in Java SE</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../cdi/cdi-adv-examples/cdi-adv-examples.html">Running the Advanced Contexts and Dependency Injection Examples</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Jakarta Validation</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../beanvalidation/bean-validation/bean-validation.html">Introduction to Jakarta Bean Validation</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../beanvalidation/bean-validation-advanced/bean-validation-advanced.html">Bean Validation: Advanced Topics</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../security.html">Jakarta Security</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Jakarta Servlets</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../web/webapp/webapp.html">Getting Started with Web Applications</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../web/servlets/servlets.html">Jakarta Servlet Technology</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Jakarta Faces</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../web/faces-intro/faces-intro.html">Jakarta Faces Technology</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../web/faces-facelets/faces-facelets.html">Introduction to Facelets</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../web/faces-page/faces-page.html">Using Jakarta Faces Technology in Web Pages</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../web/faces-page-core/faces-page-core.html">Using Converters, Listeners, and Validators</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../web/faces-develop/faces-develop.html">Developing with Jakarta Faces Technology</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../web/faces-ajax/faces-ajax.html">Using Ajax with Jakarta Faces Technology</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../web/faces-advanced-cc/faces-advanced-cc.html">Composite Components: Advanced Topics and an Example</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../web/faces-custom/faces-custom.html">Creating Custom UI Components and Other Custom Objects</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../web/faces-configure/faces-configure.html">Configuring Jakarta Faces Applications</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../web/faces-ws/faces-ws.html">Using WebSockets with Jakarta Faces Technology</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../web/webi18n/webi18n.html">Internationalizing and Localizing Web Applications</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../web/websocket/websocket.html">Jakarta WebSocket</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Jakarta Persistence</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../persist/persistence-intro/persistence-intro.html">Introduction to Jakarta Persistence</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../persist/persistence-basicexamples/persistence-basicexamples.html">Running the Persistence Examples</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../persist/persistence-querylanguage/persistence-querylanguage.html">The Jakarta Persistence Query Language</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../persist/persistence-criteria/persistence-criteria.html">Using the Criteria API to Create Queries</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../persist/persistence-string-queries/persistence-string-queries.html">Creating and Using String-Based Criteria Queries</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../persist/persistence-locking/persistence-locking.html">Controlling Concurrent Access to Entity Data with Locking</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../persist/persistence-entitygraphs/persistence-entitygraphs.html">Creating Fetch Plans with Entity Graphs</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../persist/persistence-cache/persistence-cache.html">Using a Second-Level Cache with Jakarta Persistence Applications</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Jakarta Enterprise Beans Lite</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../entbeans/ejb-intro/ejb-intro.html">Enterprise Beans</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../entbeans/ejb-gettingstarted/ejb-gettingstarted.html">Getting Started with Enterprise Beans</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../entbeans/ejb-basicexamples/ejb-basicexamples.html">Running the Enterprise Bean Examples</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../entbeans/ejb-async/ejb-async.html">Using Asynchronous Method Invocation in Session Beans</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Jakarta EE Platform</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../messaging/mail-api/mail-api.html">Jakarta Mail</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Jakarta Messaging</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../messaging/jms-concepts/jms-concepts.html">Jakarta Messaging Concepts</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../messaging/jms-examples/jms-examples.html">Jakarta Messaging Examples</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../supporttechs/batch-processing/batch-processing.html">Jakarta Batch</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Advanced</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Web Profile</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../security-authentication/security-authentication.html">Jakarta Authentication</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../security-authorization/security-authorization.html">Jakarta Authorization</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../supporttechs/transactions/transactions.html">Jakarta Transactions</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../supporttechs/concurrency-utilities/concurrency-utilities.html">Jakarta Concurrency</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Jakarta EE Platform</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../supporttechs/connectors/connectors.html">Jakarta Connectors</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Optional Components</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../web/faces-el/faces-el.html">Jakarta Expression Language</a>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-text">Jakarta XML Binding</span>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Archived</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Web Profile</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../web/jakarta-pages/jakarta-pages.html">Jakarta Pages</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../web/jakarta-tags/jakarta-tags.html">Jakarta Tags</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Jakarta EE Platform</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../websvcs/xml-websvcs/xml-websvcs.html">XML Web Services</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../entbeans/ejb-full/ejb-full.html">Jakarta Enterprise Beans Full</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Jakarta EE Tutorial</span>
    <span class="version">10</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <a class="title" href="../../index.html">Jakarta EE Tutorial</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../../index.html">10</a>
        </li>
        <li class="version">
          <a href="../../../9.1/index.html">9.1</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../../index.html">Jakarta EE Tutorial</a></li>
    <li><a href="security-advanced.html">Jakarta EE Security: Advanced Topics</a></li>
  </ul>
</nav>
<div class="page-versions">
  <button class="version-menu-toggle" title="Show other versions of page">10</button>
  <div class="version-menu">
    <a class="version is-current" href="security-advanced.html">10</a>
    <a class="version" href="../../../9.1/security/security-advanced/security-advanced.html">9.1</a>
  </div>
</div>
  <div class="edit-this-page"><a href="https://github.com/jhammen/jakartaee-tutorial/edit/main/src/main/antora/modules/security/pages/security-advanced/security-advanced.adoc">Edit this Page</a></div>
  </div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Jakarta EE Security: Advanced Topics</h1>
<div id="preamble">
<div class="sectionbody">
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>We are working on a fresh, updated Jakarta EE Tutorial. This section hasn&#8217;t yet been updated.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>This chapter provides advanced information on securing Jakarta EE applications.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_working_with_digital_certificates"><a class="anchor" href="#_working_with_digital_certificates"></a>Working with Digital Certificates</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Digital certificates for GlassFish Server have already been generated and can be found in the directory <code><em>domain-dir</em>/config/</code>.
These digital certificates are self-signed and are intended for use in a development environment; they are not intended for production purposes.
For production purposes, generate your own certificates and have them signed by a Certificate Authority (CA).</p>
</div>
<div class="paragraph">
<p>To use the Secure Sockets Layer (SSL), an application or web server must have an associated certificate for each external interface, or IP address, that accepts secure connections.
The theory behind this design is that a server should provide some kind of reasonable assurance that its owner is who you think it is, particularly before receiving any sensitive information.
It may be useful to think of a certificate as a "digital driver&#8217;s license" for an Internet address.
The certificate states which company the site is associated with, along with some basic contact information about the site owner or administrator.</p>
</div>
<div class="paragraph">
<p>The digital certificate is cryptographically signed by its owner and is difficult for anyone else to forge.
For sites involved in e-commerce or in any other business transaction in which authentication of identity is important, a certificate can be purchased from a well-known CA such as VeriSign or Thawte.
If your server certificate is self-signed, you must install it in the GlassFish Server keystore file (<code>keystore.jks</code>).
If your client certificate is self-signed, you should install it in the GlassFish Server truststore file (<code>cacerts.jks</code>).</p>
</div>
<div class="paragraph">
<p>Sometimes, authentication is not really a concern.
For example, an administrator might simply want to ensure that data being transmitted and received by the server is private and cannot be snooped by anyone eavesdropping on the connection.
In such cases, you can save the time and expense involved in obtaining a CA certificate and simply use a self-signed certificate.</p>
</div>
<div class="paragraph">
<p>SSL uses public-key cryptography, which is based on key pairs.
Key pairs contain one public key and one private key.
Data encrypted with one key can be decrypted only with the other key of the pair.
This property is fundamental to establishing trust and privacy in transactions.
For example, using SSL, the server computes a value and encrypts it by using its private key.
The encrypted value is called a digital signature.
The client decrypts the encrypted value by using the server&#8217;s public key and compares the value to its own computed value.
If the two values match, the client can trust that the signature is authentic, because only the private key could have been used to produce such a signature.</p>
</div>
<div class="paragraph">
<p>Digital certificates are used with HTTPS to authenticate web clients.
The HTTPS service of most web servers will not run unless a digital certificate has been installed.
Use the procedure outlined in the next section, <a href="#_creating_a_server_certificate">Creating a Server Certificate</a>, to set up a digital certificate that can be used by your application or web server to enable SSL.</p>
</div>
<div class="paragraph">
<p>One tool that can be used to set up a digital certificate is <code>keytool</code>, a key and certificate management utility that ships with the JDK.
This tool enables users to administer their own public/private key pairs and associated certificates for use in self-authentication, whereby the user authenticates himself or herself to other users or services, or data integrity and authentication services, using digital signatures.
The tool also allows users to cache the public keys, in the form of certificates, of their communicating peers.</p>
</div>
<div class="paragraph">
<p>For a better understanding of <code>keytool</code> and public-key cryptography, see <a href="#_further_information_about_advanced_security_topics">Further Information about Advanced Security Topics</a> for a link to the <code>keytool</code> documentation.</p>
</div>
<div class="sect2">
<h3 id="_creating_a_server_certificate"><a class="anchor" href="#_creating_a_server_certificate"></a>Creating a Server Certificate</h3>
<div class="paragraph">
<p>A server certificate has already been created for GlassFish Server and can be found in the <code><em>domain-dir</em>/config/</code> directory.
The server certificate is in <code>keystore.jks</code>.
The <code>cacerts.jks</code> file contains all the trusted certificates, including client certificates.</p>
</div>
<div class="paragraph">
<p>If necessary, you can use <code>keytool</code> to generate certificates.
The <code>keytool</code> utility stores the keys and certificates in a file termed a keystore, a repository of certificates used for identifying a client or a server.
Typically, a keystore is a file that contains one client&#8217;s or one server&#8217;s identity.
The keystore protects private keys by using a password.</p>
</div>
<div class="paragraph">
<p>If you don&#8217;t specify a directory when specifying the keystore file name, the keystores are created in the directory from which the <code>keytool</code> command is run.
This can be the directory where the application resides, or it can be a directory common to many applications.</p>
</div>
<div class="paragraph">
<p>The general steps for creating a server certificate are as follows.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create the keystore.</p>
</li>
<li>
<p>Export the certificate from the keystore.</p>
</li>
<li>
<p>Sign the certificate.</p>
</li>
<li>
<p>Import the certificate into a truststore: a repository of certificates used for verifying the certificates.
A truststore typically contains more than one certificate.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The next section provides specific information on using the <code>keytool</code> utility to perform these steps.</p>
</div>
<div class="sect3">
<h4 id="_to_use_keytool_to_create_a_server_certificate"><a class="anchor" href="#_to_use_keytool_to_create_a_server_certificate"></a>To Use keytool to Create a Server Certificate</h4>
<div class="paragraph">
<p>Run <code>keytool</code> to generate a new key pair in the default development keystore file, <code>keystore.jks</code>.
This example uses the alias <code>server-alias</code> to generate a new public/private key pair and wrap the public key into a self-signed certificate inside <code>keystore.jks</code>.
The key pair is generated by using an algorithm of type RSA, with a default password of <code>changeit</code>.
For more information and other examples of creating and managing keystore files, read the <code>keytool</code> documentation.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
RSA is public-key encryption technology developed by RSA Data Security, Inc.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>From the directory in which you want to create the key pair, run <code>keytool</code> as shown in the following steps.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Generate the server certificate.</p>
<div class="paragraph">
<p>Enter the <code>keytool</code> command all on one line:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">java-home/bin/keytool -genkey -alias server-alias -keyalg RSA
-keypass changeit -storepass changeit -keystore keystore.jks</code></pre>
</div>
</div>
<div class="paragraph">
<p>When you press Enter, <code>keytool</code> prompts you to enter the server name, organizational unit, organization, locality, state, and country code.</p>
</div>
<div class="paragraph">
<p>You must enter the server name in response to <code>keytool</code>'s first prompt, in which it asks for first and last names. For testing purposes, this can be <code>localhost</code>.</p>
</div>
</li>
<li>
<p>Export the generated server certificate in <code>keystore.jks</code> into the file <code>server.cer</code>.</p>
<div class="paragraph">
<p>Enter the <code>keytool</code> command all on one line:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">java-home/bin/keytool -export -alias server-alias -storepass changeit
-file server.cer -keystore keystore.jks</code></pre>
</div>
</div>
</li>
<li>
<p>If you want to have the certificate signed by a CA, read the example in the <code>keytool</code> documentation.</p>
</li>
<li>
<p>To add the server certificate to the truststore file, <code>cacerts.jks</code>, run <code>keytool</code> from the directory where you created the keystore and server certificate.</p>
<div class="paragraph">
<p>Use the following parameters:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">java-home/bin/keytool -import -v -trustcacerts -alias server-alias
-file server.cer -keystore cacerts.jks -keypass changeit
-storepass changeit</code></pre>
</div>
</div>
<div class="paragraph">
<p>Information on the certificate, such as that shown next, will appear:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asciidoc hljs" data-lang="asciidoc">Owner: CN=localhost, OU=My Company, O=Software, L=Santa Clara, ST=CA, C=US
Issuer: CN=localhost, OU=My Company, O=Software, L=Santa Clara, ST=CA, C=US
Serial number: 3e932169
Valid from: Mon Nov 26 18:15:47 EST 2012 until: Sun Feb 24 18:15:47 EST 2013
Certificate fingerprints:
         MD5: 52:9F:49:68:ED:78:6F:39:87:F3:98:B3:6A:6B:0F:90
         SHA1: EE:2E:2A:A6:9E:03:9A:3A:1C:17:4A:28:5E:97:20:78:3F:
         SHA256: 80:05:EC:7E:50:50:5D:AA:A3:53:F1:11:9B:19:EB:0D:20:67:C1:12:
AF:42:EC:CD:66:8C:BD:99:AD:D9:76:95
         Signature algorithm name: SHA256withRSA         Version: 3
         ...
Trust this certificate? [no]:</code></pre>
</div>
</div>
</li>
<li>
<p>Enter <code>yes</code>, then press the Enter or Return key.</p>
<div class="paragraph">
<p>The following information appears:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asciidoc hljs" data-lang="asciidoc">Certificate was added to keystore
[Storing cacerts.jks]</code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_adding_users_to_the_certificate_realm"><a class="anchor" href="#_adding_users_to_the_certificate_realm"></a>Adding Users to the Certificate Realm</h3>
<div class="paragraph">
<p>In the <code>certificate</code> realm, user identity is set up in the GlassFish Server security context and populated with user data obtained from cryptographically verified client certificates.
For step-by-step instructions for creating this type of certificate, see <a href="#_working_with_digital_certificates">Working with Digital Certificates</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_using_a_different_server_certificate_with_glassfish_server"><a class="anchor" href="#_using_a_different_server_certificate_with_glassfish_server"></a>Using a Different Server Certificate with GlassFish Server</h3>
<div class="paragraph">
<p>Follow the steps in <a href="#_creating_a_server_certificate">Creating a Server Certificate</a> to create your own server certificate, have it signed by a CA, and import the certificate into <code>keystore.jks</code>.</p>
</div>
<div class="paragraph">
<p>Make sure that when you create the certificate, you follow these rules.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>When you create the server certificate, <code>keytool</code> prompts you to enter your first and last name.
In response to this prompt, you must enter the name of your server.
For testing purposes, this can be <code>localhost</code>.</p>
</li>
<li>
<p>If you want to replace the existing <code>keystore.jks</code>, you must either change your keystore&#8217;s password to the default password (<code>changeit</code>) or change the default password to your keystore&#8217;s password.</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="_to_specify_a_different_server_certificate"><a class="anchor" href="#_to_specify_a_different_server_certificate"></a>To Specify a Different Server Certificate</h4>
<div class="paragraph">
<p>To specify that GlassFish Server should use the new keystore for authentication and authorization decisions, you must set the JVM options for GlassFish Server so that they recognize the new keystore.
To use a different keystore from the one provided for development purposes, follow these steps.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Start GlassFish Server if you haven&#8217;t already done so.
Information on starting the GlassFish Server can be found in <a href="../../intro/usingexamples/usingexamples.html#_starting_and_stopping_glassfish_server" class="xref page">Starting and Stopping GlassFish Server</a>.</p>
</li>
<li>
<p>Open the GlassFish Server Administration Console in a web browser at <a href="http://localhost:4848" class="bare" target="_blank" rel="noopener">http://localhost:4848</a>.</p>
</li>
<li>
<p>Expand Configurations, then expand server-config, then click JVM Settings.</p>
</li>
<li>
<p>Click the JVM Options tab.</p>
</li>
<li>
<p>Change the following JVM options so that they point to the location and name of the new keystore.
The current settings are shown below:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asciidoc hljs" data-lang="asciidoc">-Djavax.net.ssl.keyStore=${com.sun.aas.instanceRoot}/config/keystore.jks
-Djavax.net.ssl.trustStore=${com.sun.aas.instanceRoot}/config/cacerts.jks</code></pre>
</div>
</div>
</li>
<li>
<p>If you&#8217;ve changed the keystore password from its default value, you need to add the password option as well:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asciidoc hljs" data-lang="asciidoc">-Djavax.net.ssl.keyStorePassword=your-new-password</code></pre>
</div>
</div>
</li>
<li>
<p>Click Save, then restart GlassFish Server.</p>
</li>
</ol>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_authentication_mechanisms"><a class="anchor" href="#_authentication_mechanisms"></a>Authentication Mechanisms</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This section discusses the client authentication and mutual authentication mechanisms.</p>
</div>
<div class="sect2">
<h3 id="_client_authentication"><a class="anchor" href="#_client_authentication"></a>Client Authentication</h3>
<div class="paragraph">
<p>With client authentication, the web server authenticates the client by using the client&#8217;s public key certificate.
Client authentication is a more secure method of authentication than either basic or form-based authentication.
It uses HTTP over SSL (HTTPS), in which the server authenticates the client using the client&#8217;s public key certificate.
SSL technology provides data encryption, server authentication, message integrity, and optional client authentication for a TCP/IP connection.
You can think of a public key certificate as the digital equivalent of a passport.
The certificate is issued by a trusted organization, a certificate authority (CA), and provides identification for the bearer.</p>
</div>
<div class="paragraph">
<p>Before using client authentication, make sure that the client has a valid public key certificate.
For more information on creating and using public key certificates, read <a href="#_working_with_digital_certificates">Working with Digital Certificates</a>.</p>
</div>
<div class="paragraph">
<p>The following example shows how to declare client authentication in your deployment descriptor:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;login-config&gt;
    &lt;auth-method&gt;CLIENT-CERT&lt;/auth-method&gt;
&lt;/login-config&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Jakarta Security provides an alternative means to configure client authentication using the <code>HttpAuthenticationMechanism</code> interface.
This interface defines an SPI for writing authentication mechanisms that can be provided with an application and deployed using CDI.
See <a href="../security-api/security-api.html#_overview_of_the_http_authentication_mechanism_interface" class="xref page">Overview of the HTTP Authentication Mechanism Interface</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_mutual_authentication"><a class="anchor" href="#_mutual_authentication"></a>Mutual Authentication</h3>
<div class="paragraph">
<p>With mutual authentication, the server and the client authenticate each other.
Mutual authentication is of two types:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Certificate-based (see <a href="#_certificate_based_mutual_authentication">Figure 1, &#8220;Certificate-Based Mutual Authentication&#8221;</a>)</p>
</li>
<li>
<p>User name/password-based (see <a href="#_username_password_based_mutual_authentication">Figure 2, &#8220;User Name/Password-Based Mutual Authentication&#8221;</a>)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>When using certificate-based mutual authentication, the following actions occur.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>A client requests access to a protected resource.</p>
</li>
<li>
<p>The web server presents its certificate to the client.</p>
</li>
<li>
<p>The client verifies the server&#8217;s certificate.</p>
</li>
<li>
<p>If successful, the client sends its certificate to the server.</p>
</li>
<li>
<p>The server verifies the client&#8217;s credentials.</p>
</li>
<li>
<p>If successful, the server grants access to the protected resource requested by the client.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><a href="#_certificate_based_mutual_authentication">Figure 1, &#8220;Certificate-Based Mutual Authentication&#8221;</a> shows what occurs during certificate-based mutual authentication.</p>
</div>
<div id="_certificate_based_mutual_authentication" class="imageblock">
<div class="content">
<img src="../../common/_images/jakartaeett_dt_048.svg" alt="Diagram of six steps in mutual authentication with certificates">
</div>
<div class="title">Figure 1. Certificate-Based Mutual Authentication</div>
</div>
<div class="paragraph">
<p>In user name/password-based mutual authentication, the following actions occur.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>A client requests access to a protected resource.</p>
</li>
<li>
<p>The web server presents its certificate to the client.</p>
</li>
<li>
<p>The client verifies the server&#8217;s certificate.</p>
</li>
<li>
<p>If successful, the client sends its user name and password to the server.</p>
</li>
<li>
<p>The server verifies the client&#8217;s credentials</p>
</li>
<li>
<p>If the verification is successful, the server grants access to the protected resource requested by the client.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><a href="#_username_password_based_mutual_authentication">Figure 2, &#8220;User Name/Password-Based Mutual Authentication&#8221;</a> shows what occurs during user name/password-based mutual authentication.</p>
</div>
<div id="_username_password_based_mutual_authentication" class="imageblock">
<div class="content">
<img src="../../common/_images/jakartaeett_dt_049.svg" alt="Diagram of five steps in mutual authentication with user name and password">
</div>
<div class="title">Figure 2. User Name/Password-Based Mutual Authentication</div>
</div>
<div class="sect3">
<h4 id="_enabling_mutual_authentication_over_ssl"><a class="anchor" href="#_enabling_mutual_authentication_over_ssl"></a>Enabling Mutual Authentication over SSL</h4>
<div class="paragraph">
<p>This section discusses setting up client-side authentication.
Enabling both server-side and client-side authentication is called mutual, or two-way, authentication.
In client authentication, clients are required to submit certificates issued by a certificate authority that you choose to accept.</p>
</div>
<div class="paragraph">
<p>There are at least two ways to enable mutual authentication over SSL.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The preferred method is to set the method of authentication in the <code>web.xml</code> application deployment descriptor to <code>CLIENT-CERT</code>.
This enforces mutual authentication by modifying the deployment descriptor of the given application.
In this way, client authentication is enabled only for a specific resource controlled by the security constraint, and the check is performed only when the application requires client authentication.</p>
</li>
<li>
<p>A less commonly used method is to set the <code>clientAuth</code> property in the <code>certificate</code> realm to <code>true</code> if you want the SSL stack to require a valid certificate chain from the client before accepting a connection.
A <code>false</code> value (which is the default) will not require a certificate chain unless the client requests a resource protected by a security constraint that uses <code>CLIENT-CERT</code> authentication.
When you enable client authentication by setting the <code>clientAuth</code> property to <code>true</code>, client authentication will be required for all the requests going through the specified SSL port.
If you turn <code>clientAuth</code> on, it is on all of the time, which can severely degrade performance.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>When client authentication is enabled in both of these ways, client authentication will be performed twice.</p>
</div>
</div>
<div class="sect3">
<h4 id="_creating_a_client_certificate_for_mutual_authentication"><a class="anchor" href="#_creating_a_client_certificate_for_mutual_authentication"></a>Creating a Client Certificate for Mutual Authentication</h4>
<div class="paragraph">
<p>If you have a certificate signed by a trusted Certificate Authority (CA) such as Verisign, and the GlassFish Server <code>cacerts.jks</code> file already contains a certificate verified by that CA, you do not need to complete this step.
You need to install your certificate in the GlassFish Server certificate file only when your certificate is self-signed.</p>
</div>
<div class="paragraph">
<p>From the directory where you want to create the client certificate, run <code>keytool</code> as outlined here.
When you press Enter, <code>keytool</code> prompts you to enter the server name, organizational unit, organization, locality, state, and country code.</p>
</div>
<div class="paragraph">
<p>You must enter the server name in response to <code>keytool</code>'s first prompt, in which it asks for first and last names.
For testing purposes, this can be <code>localhost</code>.
If this example is to verify mutual authentication and you receive a runtime error stating that the HTTPS host name is wrong, re-create the client certificate, being sure to use the same host name you will use when running the example.
For example, if your machine name is <code>duke</code>, then enter <code>duke</code> as the certificate CN or when prompted for first and last names.
When accessing the application, enter a URL that points to the same location (for example, <code>https://duke:8181/mutualauth/hello</code>).
This is necessary because during SSL handshake, the server verifies the client certificate by comparing the certificate name to the host name from which it originates.</p>
</div>
<div class="paragraph">
<p>To create a keystore named <code>client_keystore.jks</code> that contains a client certificate named <code>client.cer</code>, follow these steps.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create a backup copy of the server truststore file.
To do this,</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Change to the directory containing the server&#8217;s keystore and truststore files, <code><em>domain-dir</em>\config</code>.</p>
</li>
<li>
<p>Copy <code>cacerts.jks</code> to <code>cacerts.backup.jks</code>.</p>
</li>
<li>
<p>Copy <code>keystore.jks</code> to <code>keystore.backup.jks</code>.</p>
<div class="paragraph">
<p>Do not put client certificates in the <code>cacerts.jks</code> file.
Any certificate you add to the <code>cacerts</code> file effectively can be a trusted root for any and all certificate chains.
After you have completed development, delete the development version of the <code>cacerts</code> file and replace it with the original copy.</p>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>Generate the client certificate.
Enter the following command from the directory where you want to generate the client certificate:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">java-home/bin/keytool -genkey -alias client-alias -keyalg RSA -keypass changeit -storepass changeit -keystore client_keystore.jks</code></pre>
</div>
</div>
</li>
<li>
<p>Export the generated client certificate into the file <code>client.cer</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">java-home/bin/keytool -export -alias client-alias -storepass changeit -file client.cer -keystore client_keystore.jks</code></pre>
</div>
</div>
</li>
<li>
<p>Add the certificate to the truststore file <code><em>domain-dir</em>/config/cacerts.jks</code>.
Run <code>keytool</code> from the directory where you created the keystore and client certificate.
Use the following parameters:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">java-home/bin/keytool -import -v -trustcacerts -alias client-alias
-file client.cer -keystore domain-dir/config/cacerts.jks
-keypass changeit -storepass changeit</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>keytool</code> utility returns a message like this one:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asciidoc hljs" data-lang="asciidoc">Owner: CN=localhost, OU=My Company, O=Software, L=Santa Clara, ST=CA, C=US
Issuer: CN=localhost, OU=My Company, O=Software, L=Santa Clara, ST=CA, C=US
Serial number: 3e39e66a
Valid from: Tue Nov 27 12:22:47 EST 2012 until: Mon Feb 25 12:22:47 EST 2013
Certificate fingerprints:
    MD5: 5A:B0:4C:88:4E:F8:EF:E9:E5:8B:53:BD:D0:AA:8E:5A
    SHA1:90:00:36:5B:E0:A7:A2:BD:67:DB:EA:37:B9:61:3E:26:B3:89:46:32
    Signature algorithm name: SHA1withRSA
    Version: 3
Trust this certificate? [no]: yes
Certificate was added to keystore
[Storing cacerts.jks]</code></pre>
</div>
</div>
</li>
<li>
<p>Restart GlassFish Server.</p>
</li>
</ol>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_using_the_jdbc_realm_for_user_authentication"><a class="anchor" href="#_using_the_jdbc_realm_for_user_authentication"></a>Using the JDBC Realm for User Authentication</h2>
<div class="sectionbody">
<div class="paragraph">
<p>An authentication realm, sometimes called a security policy domain or security domain, is a scope over which an application server defines and enforces a common security policy.
A realm contains a collection of users, who may or may not be assigned to a group.
GlassFish Server comes preconfigured with the file, certificate, and administration realms.
An administrator can also set up LDAP, JDBC, digest, or custom realms.</p>
</div>
<div class="paragraph">
<p>An application can specify in its deployment descriptor which realm to use.
If the application does not specify a realm, GlassFish Server uses its default realm, the <code>file</code> realm.
If an application specifies that a JDBC realm is to be used for user authentication, GlassFish Server will retrieve user credentials from a database.
The application server uses the database information and the enabled JDBC realm option in the configuration file.</p>
</div>
<div class="paragraph">
<p>A database provides an easy way to add, edit, or delete users at runtime and enables users to create their own accounts without any administrative assistance.
Using a database has an additional benefit: providing a place to securely store any extra user information.
A realm can be thought of as a database of user names and passwords that identify valid users of a web application or set of web applications with an enumeration of the list of roles associated with each valid user.
Access to specific web application resources is granted to all users in a particular role, instead of enumerating a list of associated users.
A user name can have any number of roles associated with it.</p>
</div>
<div class="paragraph">
<p>Two of the tutorial case studies, <a href="../../casestudies/dukes-tutoring/dukes-tutoring.html#_dukes_tutoring_case_study_example" class="xref page">Duke&#8217;s Tutoring Case Study Example</a> and <a href="../../casestudies/dukes-forest/dukes-forest.html#_dukes_forest_case_study_example" class="xref page">Duke&#8217;s Forest Case Study Example</a> use a JDBC realm for user authentication.</p>
</div>
<div class="sect2">
<h3 id="_to_configure_a_jdbc_authentication_realm"><a class="anchor" href="#_to_configure_a_jdbc_authentication_realm"></a>To Configure a JDBC Authentication Realm</h3>
<div class="paragraph">
<p>GlassFish Server enables administrators to specify a user&#8217;s credentials (user name and password) in the JDBC realm instead of in the connection pool.
This prevents other applications from browsing the database tables for user credentials.
By default, storing passwords as clear text is not supported in the JDBC realm.
Under normal circumstances, passwords should not be stored as clear text.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create the database tables in which user credentials for the realm will be stored.</p>
</li>
<li>
<p>Add user credentials to the database tables you created.</p>
</li>
<li>
<p>Create a JDBC connection pool for the database.</p>
<div class="paragraph">
<p>You can use the Administration Console or the command line to create a connection pool.</p>
</div>
</li>
<li>
<p>Create a JDBC resource for the database.</p>
<div class="paragraph">
<p>You can use the Administration Console or the command line to create a JDBC resource.</p>
</div>
</li>
<li>
<p>Create a realm.</p>
<div class="paragraph">
<p>This step needs to associate the resource with the realm, define the tables and columns for users and groups used for authentication, and define the digest algorithm that will be used for storing passwords in the database.</p>
</div>
<div class="paragraph">
<p>You can use the Administration Console or the command line to create a realm.</p>
</div>
</li>
<li>
<p>Modify the deployment descriptor for your application to specify the
JDBC realm.</p>
<div class="ulist">
<ul>
<li>
<p>For an enterprise application in an EAR file, modify the <code>glassfish-application.xml</code> file.</p>
</li>
<li>
<p>For a web application in a WAR file, modify the <code>web.xml</code> file.</p>
</li>
<li>
<p>For an enterprise bean in an EJB JAR file, modify the <code>glassfish-ejb-jar.xml</code> file.</p>
<div class="paragraph">
<p>For example, for a hypothetical application, the <code>web.xml</code> file could specify the <code>jdbcRealm</code> realm, as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;login-config&gt;
    &lt;auth-method&gt;FORM&lt;/auth-method&gt;
    &lt;realm-name&gt;jdbcRealm&lt;/realm-name&gt;
    &lt;form-login-config&gt;
        &lt;form-login-page&gt;/login.xhtml&lt;/form-login-page&gt;
        &lt;form-error-page&gt;/login.xhtml&lt;/form-error-page&gt;
    &lt;/form-login-config&gt;
&lt;/login-config&gt;
&lt;security-constraint&gt;
    &lt;web-resource-collection&gt;
        &lt;web-resource-name&gt;Secure Pages&lt;/web-resource-name&gt;
        &lt;description/&gt;
        &lt;url-pattern&gt;/admin/*&lt;/url-pattern&gt;
    &lt;/web-resource-collection&gt;
    &lt;auth-constraint&gt;
        &lt;role-name&gt;ADMINS&lt;/role-name&gt;
    &lt;/auth-constraint&gt;
&lt;/security-constraint&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Form-based login is specified for all web pages under <code>/admin</code>.
Access to those pages will be allowed only to users in the <code>ADMINS</code> role.</p>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Assign security roles to users or groups of users in the realm.</p>
<div class="paragraph">
<p>To assign a security role to a group or to a user, add a <code>security-role-mapping</code> element to the application server-specific deployment descriptor, in this case <code>glassfish-web.xml</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;security-role-mapping&gt;
    &lt;role-name&gt;USERS&lt;/role-name&gt;
    &lt;group-name&gt;USERS&lt;/group-name&gt;
&lt;/security-role-mapping&gt;
&lt;security-role-mapping&gt;
    &lt;role-name&gt;ADMINS&lt;/role-name&gt;
    &lt;group-name&gt;ADMINS&lt;/group-name&gt;
&lt;/security-role-mapping&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Since GlassFish Server users are assigned to groups during the user creation process, this is more efficient than mapping security roles to individual users.</p>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_securing_http_resources"><a class="anchor" href="#_securing_http_resources"></a>Securing HTTP Resources</h2>
<div class="sectionbody">
<div class="paragraph">
<p>When a request URI is matched by multiple constrained URL patterns, the constraints that apply to the request are those that are associated with the best matching URL pattern.
The servlet matching rules defined in Chapter 12, "Mapping Requests To Servlets" in the Jakarta Servlet 5.0 Specification, are used to determine the best matching URL pattern to the request URI.
No protection requirements apply to a request URI that is not matched by a constrained URL pattern.
The HTTP method of the request plays no role in selecting the best matching URL pattern for a request.</p>
</div>
<div class="paragraph">
<p>When HTTP methods are listed within a constraint definition, the protections defined by the constraint are applied to the listed methods only.</p>
</div>
<div class="paragraph">
<p>When HTTP methods are not listed within a constraint definition, the protections defined by the constraint apply to the complete set of HTTP methods, including HTTP extension methods.</p>
</div>
<div class="paragraph">
<p>When constraints with different protection requirements apply to the same combination of URL patterns and HTTP methods, the rules for combining the protection requirements are as defined in Section 13.8.1, "Combining Constraints" in the Jakarta Servlet 5.0 Specification.</p>
</div>
<div class="paragraph">
<p>Follow these guidelines to properly secure a web application.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Do not list HTTP methods within constraint definitions.
This is the simplest way to ensure that you are not leaving HTTP methods unprotected.
For example:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;!-- SECURITY CONSTRAINT #1 --&gt;
&lt;security-constraint&gt;
    &lt;display-name&gt;Do not enumerate Http Methods&lt;/display-name&gt;
    &lt;web-resource-collection&gt;
        &lt;url-pattern&gt;/company/*&lt;/url-pattern&gt;
    &lt;/web-resource-collection&gt;
    &lt;auth-constraint&gt;
        &lt;role-name&gt;sales&lt;/role-name&gt;
    &lt;/auth-constraint&gt;
&lt;/security-constraint&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you list methods in a constraint, all non-listed methods of the effectively infinite set of possible HTTP methods, including extension methods, will be unprotected.
Use such a constraint only if you are certain that this is the protection scheme you intend to define.
The following example shows a constraint that lists the GET method and thus defines no protection on any of the other possible HTTP methods:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;!-- SECURITY CONSTRAINT #2 --&gt;
&lt;security-constraint&gt;
    &lt;display-name&gt;
        Protect GET only, leave all other methods unprotected
    &lt;/display-name&gt;
    &lt;web-resource-collection&gt;
        &lt;url-pattern&gt;/company/*&lt;/url-pattern&gt;
        &lt;http-method&gt;GET&lt;/http-method&gt;
    &lt;/web-resource-collection&gt;
    &lt;auth-constraint&gt;
        &lt;role-name&gt;sales&lt;/role-name&gt;
    &lt;/auth-constraint&gt;
&lt;/security-constraint&gt;</code></pre>
</div>
</div>
</li>
<li>
<p>If you need to apply specific types of protection to specific HTTP methods, make sure that you define constraints to cover every method that you want to permit, with or without constraint, at the corresponding URL patterns.
If there are any methods that you do not want to permit, you must also create a constraint that denies access to those methods at the same patterns; for an example, see security constraint #5 in the next bullet.</p>
<div class="paragraph">
<p>For example, to permit GET and POST, where POST requires authentication and GET is permitted without constraint, you could define the following constraints:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;!-- SECURITY CONSTRAINT #3 --&gt;
&lt;security-constraint&gt;
    &lt;display-name&gt;Allow unprotected GET&lt;/display-name&gt;
    &lt;web-resource-collection&gt;
        &lt;url-pattern&gt;/company/*&lt;/url-pattern&gt;
        &lt;http-method&gt;GET&lt;/http-method&gt;
    &lt;/web-resource-collection&gt;
&lt;/security-constraint&gt;

&lt;!-- SECURITY CONSTRAINT #4 --&gt;
&lt;security-constraint&gt;
    &lt;display-name&gt;Require authentication for POST&lt;/display-name&gt;
    &lt;web-resource-collection&gt;
        &lt;url-pattern&gt;/company/*&lt;/url-pattern&gt;
        &lt;http-method&gt;POST&lt;/http-method&gt;
    &lt;/web-resource-collection&gt;
    &lt;auth-constraint&gt;
        &lt;role-name&gt;sales&lt;/role-name&gt;
    &lt;/auth-constraint&gt;
&lt;/security-constraint&gt;</code></pre>
</div>
</div>
</li>
<li>
<p>The simplest way to ensure that you deny all HTTP methods except those that you want to be permitted is to use <code>http-method-omission</code> elements to omit those HTTP methods from the security constraint, and also to define an <code>auth-constraint</code> that names no roles.
The security constraint will apply to all methods except those that were named in the omissions, and the constraint will apply only to the resources matched by the patterns in the constraint.</p>
<div class="paragraph">
<p>For example, the following constraint excludes access to all methods except GET and POST at the resources matched by the pattern <code>/company/*</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;!-- SECURITY CONSTRAINT #5 --&gt;
&lt;security-constraint&gt;
    &lt;display-name&gt;Deny all HTTP methods except GET and POST&lt;/display-name&gt;
    &lt;web-resource-collection&gt;
        &lt;url-pattern&gt;/company/*&lt;/url-pattern&gt;
        &lt;http-method-omission&gt;GET&lt;/http-method-omission&gt;
        &lt;http-method-omission&gt;POST&lt;/http-method-omission&gt;
    &lt;/web-resource-collection&gt;
    &lt;auth-constraint/&gt;
&lt;/security-constraint&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you want to extend these exclusions to the unconstrained parts of your application, also include the URL pattern <code>/</code> (forward slash):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;!-- SECURITY CONSTRAINT #6 --&gt;
&lt;security-constraint&gt;
    &lt;display-name&gt;Deny all HTTP methods except GET and POST&lt;/display-name&gt;
    &lt;web-resource-collection&gt;
        &lt;url-pattern&gt;/company/*&lt;/url-pattern&gt;
        &lt;url-pattern&gt;/&lt;/url-pattern&gt;
        &lt;http-method-omission&gt;GET&lt;/http-method-omission&gt;
        &lt;http-method-omission&gt;POST&lt;/http-method-omission&gt;
    &lt;/web-resource-collection&gt;
    &lt;auth-constraint/&gt;
&lt;/security-constraint&gt;</code></pre>
</div>
</div>
</li>
<li>
<p>If, for your web application, you do not want any resource to be accessible unless you explicitly define a constraint that permits access to it, you can define an <code>auth-constraint</code> that names no roles and associate it with the URL pattern <code>/</code>.
The URL pattern <code>/</code> is the weakest matching pattern.
Do not list any HTTP methods in this constraint:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;!-- SECURITY CONSTRAINT #7 --&gt;
&lt;security-constraint&gt;
    &lt;display-name&gt;
        Switch from Constraint to Permission model
        (where everything is denied by default)
    &lt;/display-name&gt;
    &lt;web-resource-collection&gt;
        &lt;url-pattern&gt;/&lt;/url-pattern&gt;
    &lt;/web-resource-collection&gt;
    &lt;auth-constraint/&gt;
&lt;/security-constraint&gt;</code></pre>
</div>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_securing_application_clients"><a class="anchor" href="#_securing_application_clients"></a>Securing Application Clients</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Jakarta EE authentication requirements for application clients are the same as for other Jakarta EE components, and the same authentication techniques can be used as for other Jakarta EE application components.
No authentication is necessary when accessing unprotected web resources.</p>
</div>
<div class="paragraph">
<p>When accessing protected web resources, the usual varieties of authentication can be used: HTTP basic authentication, HTTP login-form authentication, or SSL client authentication.
<a href="../security-webtier/security-webtier.html#_specifying_an_authentication_mechanism_in_the_deployment_descriptor" class="xref page">Specifying an Authentication Mechanism in the Deployment Descriptor</a> describes how to specify HTTP basic authentication and HTTP login-form authentication.
<a href="#_client_authentication">Client Authentication</a> describes how to specify SSL client authentication.</p>
</div>
<div class="paragraph">
<p>Authentication is required when accessing protected enterprise beans.
The authentication mechanisms for enterprise beans are discussed in <a href="../security-jakartaee/security-jakartaee.html#_securing_enterprise_beans" class="xref page">Securing Enterprise Beans</a>.</p>
</div>
<div class="paragraph">
<p>An application client makes use of an authentication service provided by the application client container for authenticating its users.
The container&#8217;s service can be integrated with the native platform&#8217;s authentication system so that a single sign-on capability is used.
The container can authenticate the user either when the application is started or when a protected resource is accessed.</p>
</div>
<div class="paragraph">
<p>An application client can provide a class, called a login module, to gather authentication data.
If so, the <code>jakarta.security.auth.callback.CallbackHandler</code> interface must be implemented, and the class name must be specified in its deployment descriptor.
The application&#8217;s callback handler must fully support <code>Callback</code> objects specified in the <code>jakarta.security.auth.callback</code> package.</p>
</div>
<div class="sect2">
<h3 id="_using_login_modules"><a class="anchor" href="#_using_login_modules"></a>Using Login Modules</h3>
<div class="paragraph">
<p>An application client can use the Java Authentication and Authorization Service (JAAS) to create login modules for authentication.
A JAAS-based application implements the <code>jakarta.security.auth.callback.CallbackHandler</code> interface so that it can interact with users to enter specific authentication data, such as user names or passwords, or to display error and warning messages.</p>
</div>
<div class="paragraph">
<p>Applications implement the <code>CallbackHandler</code> interface and pass it to the login context, which forwards it directly to the underlying login modules.
A login module uses the callback handler both to gather input, such as a password or smart card PIN, from users and to supply information, such as status information, to users.
Because the application specifies the callback handler, an underlying login module can remain independent of the various ways applications interact with users.</p>
</div>
<div class="paragraph">
<p>For example, the implementation of a callback handler for a GUI application might display a window to solicit user input, or the implementation of a callback handler for a command-line tool might simply prompt the user for input directly from the command line.</p>
</div>
<div class="paragraph">
<p>The login module passes an array of appropriate callbacks to the callback handler&#8217;s <code>handle</code> method, such as a <code>NameCallback</code> for the user name and a <code>PasswordCallback</code> for the password; the callback handler performs the requested user interaction and sets appropriate values in the callbacks.
For example, to process a <code>NameCallback</code>, the <code>CallbackHandler</code> might prompt for a name, retrieve the value from the user, and call the <code>setName</code> method of the <code>NameCallback</code> to store the name.</p>
</div>
<div class="paragraph">
<p>For more information on using JAAS for authentication in login modules, refer to the documentation listed in <a href="#_further_information_about_advanced_security_topics">Further Information about Advanced Security Topics</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_using_programmatic_login"><a class="anchor" href="#_using_programmatic_login"></a>Using Programmatic Login</h3>
<div class="paragraph">
<p>Programmatic login enables the client code to supply user credentials.
If you are using an enterprise bean client, you can use the <code>com.sun.appserv.security.ProgrammaticLogin</code> class with its convenient <code>login</code> and <code>logout</code> methods.
Programmatic login is specific to a server.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_securing_enterprise_information_systems_applications"><a class="anchor" href="#_securing_enterprise_information_systems_applications"></a>Securing Enterprise Information Systems Applications</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In Enterprise Information Systems (EIS) applications, components request a connection to an EIS resource.</p>
</div>
<div class="sect2">
<h3 id="_overview_of_securing_enterprise_information_systems_applications"><a class="anchor" href="#_overview_of_securing_enterprise_information_systems_applications"></a>Overview of Securing Enterprise Information Systems Applications</h3>
<div class="paragraph">
<p>As part of this connection, the EIS can require a sign-on for the requester to access the resource.
The application component provider has two choices for the design of the EIS sign-on.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Container-managed sign-on: The application component lets the container take the responsibility of configuring and managing the EIS sign-on.
The container determines the user name and password for establishing a connection to an EIS instance.</p>
</li>
<li>
<p>Component-managed sign-on: The application component code manages EIS sign-on by including code that performs the sign-on process to an EIS.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You can also configure security for resource adapters.
See <a href="#_configuring_resource_adapter_security">Configuring Resource Adapter Security</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_container_managed_sign_on"><a class="anchor" href="#_container_managed_sign_on"></a>Container-Managed Sign-On</h3>
<div class="paragraph">
<p>In container-managed sign-on, an application component does not have to pass any sign-on security information to the <code>getConnection()</code> method.
The security information is supplied by the container, as shown in the following example (the method call is highlighted in bold):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">// Business method in an application component
Context initctx = new InitialContext();
// Perform JNDI lookup to obtain a connection factory
jakarta.resource.cci.ConnectionFactory cxf =
    (jakarta.resource.cci.ConnectionFactory)initctx.lookup(
    "java:comp/env/eis/MainframeCxFactory");
// Invoke factory to obtain a connection. The security
// information is not passed in the getConnection method
jakarta.resource.cci.Connection cx = cxf.getConnection();
...</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_component_managed_sign_on"><a class="anchor" href="#_component_managed_sign_on"></a>Component-Managed Sign-On</h3>
<div class="paragraph">
<p>In component-managed sign-on, an application component is responsible for passing the needed sign-on security information for the resource to the <code>getConnection</code> method.
For example, security information might be a user name and password, as shown here (the method call is highlighted in bold):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">// Method in an application component
Context initctx = new InitialContext();

// Perform JNDI lookup to obtain a connection factory
jakarta.resource.cci.ConnectionFactory cxf =
    (jakarta.resource.cci.ConnectionFactory)initctx.lookup(
    "java:comp/env/eis/MainframeCxFactory");

// Get a new ConnectionSpec
com.myeis.ConnectionSpecImpl properties = //..

// Invoke factory to obtain a connection
properties.setUserName("...");
properties.setPassword("...");
jakarta.resource.cci.Connection cx =
    cxf.getConnection(properties);
...</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_configuring_resource_adapter_security"><a class="anchor" href="#_configuring_resource_adapter_security"></a>Configuring Resource Adapter Security</h3>
<div class="paragraph">
<p>A resource adapter is a system-level software component that typically implements network connectivity to an external resource manager.
A resource adapter can extend the functionality of the Jakarta EE platform either by implementing one of the Jakarta EE standard service APIs, such as a JDBC driver, or by defining and implementing a resource adapter for a connector to an external application system.
Resource adapters can also provide services that are entirely local, perhaps interacting with native resources.
Resource adapters interface with the Jakarta EE platform through the Jakarta EE service provider interfaces (Jakarta EE SPI).
A resource adapter that uses the Jakarta EE SPIs to attach to the Jakarta EE platform will be able to work with all Jakarta EE products.</p>
</div>
<div class="paragraph">
<p>To configure the security settings for a resource adapter, you need to edit the resource adapter descriptor file, <code>ra.xml</code>.
Here is an example of the part of an <code>ra.xml</code> file that configures security properties for a resource adapter:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;authentication-mechanism&gt;
    &lt;authentication-mechanism-type&gt;
        BasicPassword
    &lt;/authentication-mechanism-type&gt;
    &lt;credential-interface&gt;
        jakarta.resource.spi.security.PasswordCredential
    &lt;/credential-interface&gt;
&lt;/authentication-mechanism&gt;
&lt;reauthentication-support&gt;false&lt;/reauthentication-support&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can find out more about the options for configuring resource adapter security by reviewing <code><em>as-install</em>/lib/schemas/connector_2_0.xsd</code>.
You can configure the following elements in the resource adapter deployment descriptor file.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Authentication mechanisms: Use the <code>authentication-mechanism</code> element to specify an authentication mechanism supported by the resource adapter.
This support is for the resource adapter, not for the underlying EIS instance.</p>
<div class="paragraph">
<p>There are two supported mechanism types:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>BasicPassword</code>, which supports the following interface:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asciidoc hljs" data-lang="asciidoc">jakarta.resource.spi.security.PasswordCredential</code></pre>
</div>
</div>
</li>
<li>
<p><code>Kerbv5</code>, which supports the following interface:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asciidoc hljs" data-lang="asciidoc">jakarta.resource.spi.security.GenericCredential</code></pre>
</div>
</div>
<div class="paragraph">
<p>GlassFish Server does not currently support this mechanism type.</p>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Reauthentication support: Use the <code>reauthentication-support</code> element to specify whether the resource adapter implementation supports reauthentication of existing <code>Managed-Connection</code> instances.
Options are <code>true</code> or <code>false</code>.</p>
</li>
<li>
<p>Security permissions: Use the <code>security-permission</code> element to specify a security permission that is required by the resource adapter code.
Support for security permissions is optional and is not supported in the current release of GlassFish Server.
You can, however, manually update the <code>server.policy</code> file to add the relevant permissions for the resource adapter.</p>
<div class="paragraph">
<p>The security permissions listed in the deployment descriptor are different from those required by the default permission set as specified in the connector specification.</p>
</div>
<div class="paragraph">
<p>For more information on the implementation of the security permission specification, see the security policy file documentation listed in <a href="#_further_information_about_advanced_security_topics">Further Information about Advanced Security Topics</a>.</p>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>In addition to specifying resource adapter security in the <code>ra.xml</code> file, you can create a security map for a connector connection pool to map an application principal or a user group to a back-end EIS principal.
The security map is usually used if one or more EIS back-end principals are used to execute operations (on the EIS) initiated by various principals or user groups in the application.</p>
</div>
</div>
<div class="sect2">
<h3 id="_mapping_an_application_principal_to_eis_principals"><a class="anchor" href="#_mapping_an_application_principal_to_eis_principals"></a>Mapping an Application Principal to EIS Principals</h3>
<div class="paragraph">
<p>When using GlassFish Server, you can use security maps to map the caller identity of the application (principal or user group) to a suitable EIS principal in container-managed transaction-based scenarios.
When an application principal initiates a request to an EIS, GlassFish Server first checks for an exact principal by using the security map defined for the connector connection pool to determine the mapped back-end EIS principal.
If there is no exact match, GlassFish Server uses the wildcard character specification, if any, to determine the mapped back-end EIS principal.
Security maps are used when an application user needs to execute an EIS operation that requires execution as a specific identity in the EIS.</p>
</div>
<div class="paragraph">
<p>To work with security maps, use the Administration Console.
From the Administration Console, follow these steps to get to the security maps page.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In the navigation tree, expand the Resources node.</p>
</li>
<li>
<p>Expand the Connectors node.</p>
</li>
<li>
<p>Select the Connector Connection Pools node.</p>
</li>
<li>
<p>On the Connector Connection Pools page, click the name of the connection pool for which you want to create a security map.</p>
</li>
<li>
<p>Click the Security Maps tab.</p>
</li>
<li>
<p>Click New to create a new security map for the connection pool.</p>
</li>
<li>
<p>Enter a name by which you will refer to the security map, as well as the other required information.</p>
<div class="paragraph">
<p>Click Help for more information on the individual options.</p>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_configuring_security_using_deployment_descriptors"><a class="anchor" href="#_configuring_security_using_deployment_descriptors"></a>Configuring Security Using Deployment Descriptors</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The recommended way to configure security in the Jakarta EE 8 platform is with annotations.
If you wish to override the security settings at deployment time, you can use security elements in the <code>web.xml</code> deployment descriptor to do so.
This section describes how to use the deployment descriptor to specify basic authentication and to override default principal-to-role mapping.</p>
</div>
<div class="sect2">
<h3 id="_specifying_security_for_basic_authentication_in_the_deployment_descriptor"><a class="anchor" href="#_specifying_security_for_basic_authentication_in_the_deployment_descriptor"></a>Specifying Security for Basic Authentication in the Deployment Descriptor</h3>
<div class="paragraph">
<p>The elements of the deployment descriptor that add basic authentication to an example tell the server or browser to perform the following tasks.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Send a standard login dialog box to collect user name and password data.</p>
</li>
<li>
<p>Verify that the user is authorized to access the application.</p>
</li>
<li>
<p>If authorized, display the servlet to the user.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The following sample code shows the security elements for a deployment descriptor that could be used in the example of basic authentication found in the <code><em>jakartaee-examples</em>/tutorial/security/hello2_basicauth/</code> directory:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">    &lt;security-constraint&gt;
        &lt;display-name&gt;SecurityConstraint&lt;/display-name&gt;
        &lt;web-resource-collection&gt;
             &lt;web-resource-name&gt;WRCollection&lt;/web-resource-name&gt;
            &lt;url-pattern&gt;/greeting&lt;/url-pattern&gt;
        &lt;/web-resource-collection&gt;
        &lt;auth-constraint&gt;
            &lt;role-name&gt;TutorialUser&lt;/role-name&gt;
        &lt;/auth-constraint&gt;
        &lt;user-data-constraint&gt;
             &lt;transport-guarantee&gt;CONFIDENTIAL&lt;/transport-guarantee&gt;
        &lt;/user-data-constraint&gt;
    &lt;/security-constraint&gt;
    &lt;login-config&gt;
        &lt;auth-method&gt;BASIC&lt;/auth-method&gt;
        &lt;realm-name&gt;file&lt;/realm-name&gt;
    &lt;/login-config&gt;
    &lt;security-role&gt;
        &lt;role-name&gt;TutorialUser&lt;/role-name&gt;
    &lt;/security-role&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>This deployment descriptor specifies that the request URI <code>/greeting</code> can be accessed only by users who have entered their user names and passwords and have been authorized to access this URL because they have been verified to be in the role <code>TutorialUser</code>.
The user name and password data will be sent over a protected transport in order to keep it from being read in transit.</p>
</div>
</div>
<div class="sect2">
<h3 id="_specifying_non_default_principal_to_role_mapping_in_the_deployment_descriptor"><a class="anchor" href="#_specifying_non_default_principal_to_role_mapping_in_the_deployment_descriptor"></a>Specifying Non-Default Principal-to-Role Mapping in the Deployment Descriptor</h3>
<div class="paragraph">
<p>Jakarta Security requires that group principal names be mapped to roles of the same name by default.
GlassFish adheres to this standard, by default, and provides group principal to role mapping.
Implementations of the standard can, however, provide mechanisms to configure a different default.</p>
</div>
<div class="paragraph">
<p>To map a role name permitted by the application or module to principals (users) and groups defined on the server, use the <code>security-role-mapping</code> element in the runtime deployment descriptor file (<code>glassfish-application.xml</code>, <code>glassfish-web.xml</code>, or <code>glassfish-ejb-jar.xml</code>).
The entry needs to declare a mapping between a security role used in the application and one or more groups or principals defined for the applicable realm of GlassFish Server.
An example for the <code>glassfish-web.xml</code> file is shown below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;glassfish-web-app&gt;
    &lt;security-role-mapping&gt;
        &lt;role-name&gt;DIRECTOR&lt;/role-name&gt;
        &lt;principal-name&gt;schwartz&lt;/principal-name&gt;
    &lt;/security-role-mapping&gt;
    &lt;security-role-mapping&gt;
        &lt;role-name&gt;DEPT-ADMIN&lt;/role-name&gt;
        &lt;group-name&gt;dept-admins&lt;/group-name&gt;
    &lt;/security-role-mapping&gt;
&lt;/glassfish-web-app&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The role name can be mapped to either a specific principal (user), a group, or both.
The principal or group names referenced must be valid principals or groups in the current default realm of GlassFish Server.
The <code>role-name</code> in this example must exactly match the <code>role-name</code> in the <code>security-role</code> element of the corresponding <code>web.xml</code> file or the role name defined in the <code>@DeclareRoles</code> and/or <code>@RolesAllowed</code> annotations.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_further_information_about_advanced_security_topics"><a class="anchor" href="#_further_information_about_advanced_security_topics"></a>Further Information about Advanced Security Topics</h2>
<div class="sectionbody">
<div class="paragraph">
<p>For more information about the security topics covered in this chapter, see</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Documentation on the <code>keytool</code> command:<br>
<a href="https://docs.oracle.com/javase/8/docs/technotes/tools/unix/keytool.html" class="bare" target="_blank" rel="noopener">https://docs.oracle.com/javase/8/docs/technotes/tools/unix/keytool.html</a></p>
</li>
<li>
<p>Java Authentication and Authorization Service (JAAS) Reference Guide:<br>
<a href="https://docs.oracle.com/javase/8/docs/technotes/guides/security/jaas/JAASRefGuide.html" class="bare" target="_blank" rel="noopener">https://docs.oracle.com/javase/8/docs/technotes/guides/security/jaas/JAASRefGuide.html</a></p>
</li>
<li>
<p>Java Authentication and Authorization Service (JAAS): LoginModule Developer&#8217;s Guide:<br>
<a href="https://docs.oracle.com/javase/8/docs/technotes/guides/security/jaas/JAASLMDevGuide.html" class="bare" target="_blank" rel="noopener">https://docs.oracle.com/javase/8/docs/technotes/guides/security/jaas/JAASLMDevGuide.html</a></p>
</li>
<li>
<p>Documentation on security policy file syntax:<br>
<a href="https://docs.oracle.com/javase/8/docs/technotes/guides/security/PolicyFiles.html#FileSyntax" class="bare" target="_blank" rel="noopener">https://docs.oracle.com/javase/8/docs/technotes/guides/security/PolicyFiles.html#FileSyntax</a></p>
</li>
</ul>
</div>
</div>
</div>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <p>This page was built using the Antora default UI.</p>
  <p>The source code for this UI is licensed under the terms of the MPL-2.0 license.</p>
</footer>
<script id="site-script" src="../../../../_/js/site.js" data-ui-root-path="../../../../_"></script>
<script async src="../../../../_/js/vendor/highlight.js"></script>
  </body>
</html>
