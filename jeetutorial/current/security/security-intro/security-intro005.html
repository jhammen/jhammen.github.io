<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Untitled :: Jakarta EE Documentation</title>
    <meta name="generator" content="Antora 3.1.3">
    <link rel="stylesheet" href="../../../../_/css/site.css">
    <script>var uiRootPath = '../../../../_'</script>
    <script>!function (theme) {
        if (theme === 'dark') document.documentElement.classList.add('theme-dark')
      }(localStorage && localStorage.getItem('theme') || (matchMedia('(prefers-color-scheme: dark)') && 'dark'))
    </script>
      </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a id="site-title" class="navbar-item" href="../../../..">Jakarta EE Documentation</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
<!--
        <a class="navbar-item" href="#">Home</a>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Products</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Product A</a>
            <a class="navbar-item" href="#">Product B</a>
            <a class="navbar-item" href="#">Product C</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Services</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Service A</a>
            <a class="navbar-item" href="#">Service B</a>
            <a class="navbar-item" href="#">Service C</a>
          </div>
        </div>
 -->
        <div class="navbar-item">
          <span class="control">
            <a class="button is-primary" href="../../../../jakartaee-tutorial/10/jakarta-ee-tutorial.pdf">Download</a>
          </span>
        </div>
      </div>
      <div class="navbar-theme-switcher">
        <span class="switch" title="Switch between Light and Dark Theme">
          <input id="theme-switcher-checkbox" type="checkbox" />
          <label for="theme-switcher-checkbox">Dark Theme</label>
        </span>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="jakartaee-tutorial" data-version="10">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../../index.html">Jakarta EE Tutorial</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Introduction</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../index.html">Preface</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../intro/usingexamples/usingexamples.html">Using the Tutorial Examples</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Jakarta EE Core Profile</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Jakarta CDI Lite</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../cdi/cdi-basic/cdi-basic.html">Introduction to Jakarta Contexts and Dependency Injection</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../cdi/cdi-basicexamples/cdi-basicexamples.html">Running the Basic Contexts and Dependency Injection Examples</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../supporttechs/interceptors/interceptors.html">Using Jakarta EE Interceptors</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Jakarta REST</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../websvcs/jaxrs/jaxrs.html">Building RESTful Web Services with Jakarta REST</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../websvcs/jaxrs-client/jaxrs-client.html">Accessing REST Resources with the Jakarta REST Client API</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../websvcs/jaxrs-advanced/jaxrs-advanced.html">Jakarta REST: Advanced Topics and an Example</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Jakarta JSON</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../web/jsonb/jsonb.html">JSON Binding</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../web/jsonp/jsonp.html">JSON Processing</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Jakarta EE Web Profile</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Jakarta CDI Full</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../cdi/cdi-adv/cdi-adv.html">Jakarta Contexts and Dependency Injection: Advanced Topics</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../cdi/cdi-bootstrap-se8/cdi-bootstrap-se8.html">Bootstrapping a CDI Container in Java SE</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../cdi/cdi-adv-examples/cdi-adv-examples.html">Running the Advanced Contexts and Dependency Injection Examples</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Jakarta Validation</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../beanvalidation/bean-validation/bean-validation.html">Introduction to Jakarta Bean Validation</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../beanvalidation/bean-validation-advanced/bean-validation-advanced.html">Bean Validation: Advanced Topics</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../security.html">Jakarta Security</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Jakarta Servlets</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../web/webapp/webapp.html">Getting Started with Web Applications</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../web/servlets/servlets.html">Jakarta Servlet Technology</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Jakarta Faces</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../web/faces-intro/faces-intro.html">Jakarta Faces Technology</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../web/faces-facelets/faces-facelets.html">Introduction to Facelets</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../web/faces-page/faces-page.html">Using Jakarta Faces Technology in Web Pages</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../web/faces-page-core/faces-page-core.html">Using Converters, Listeners, and Validators</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../web/faces-develop/faces-develop.html">Developing with Jakarta Faces Technology</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../web/faces-ajax/faces-ajax.html">Using Ajax with Jakarta Faces Technology</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../web/faces-advanced-cc/faces-advanced-cc.html">Composite Components: Advanced Topics and an Example</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../web/faces-custom/faces-custom.html">Creating Custom UI Components and Other Custom Objects</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../web/faces-configure/faces-configure.html">Configuring Jakarta Faces Applications</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../web/faces-ws/faces-ws.html">Using WebSockets with Jakarta Faces Technology</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../web/webi18n/webi18n.html">Internationalizing and Localizing Web Applications</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../web/websocket/websocket.html">Jakarta WebSocket</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Jakarta Persistence</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../persist/persistence-intro/persistence-intro.html">Introduction to Jakarta Persistence</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../persist/persistence-basicexamples/persistence-basicexamples.html">Running the Persistence Examples</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../persist/persistence-querylanguage/persistence-querylanguage.html">The Jakarta Persistence Query Language</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../persist/persistence-criteria/persistence-criteria.html">Using the Criteria API to Create Queries</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../persist/persistence-string-queries/persistence-string-queries.html">Creating and Using String-Based Criteria Queries</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../persist/persistence-locking/persistence-locking.html">Controlling Concurrent Access to Entity Data with Locking</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../persist/persistence-entitygraphs/persistence-entitygraphs.html">Creating Fetch Plans with Entity Graphs</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../persist/persistence-cache/persistence-cache.html">Using a Second-Level Cache with Jakarta Persistence Applications</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Jakarta Enterprise Beans Lite</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../entbeans/ejb-intro/ejb-intro.html">Enterprise Beans</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../entbeans/ejb-gettingstarted/ejb-gettingstarted.html">Getting Started with Enterprise Beans</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../entbeans/ejb-basicexamples/ejb-basicexamples.html">Running the Enterprise Bean Examples</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../entbeans/ejb-async/ejb-async.html">Using Asynchronous Method Invocation in Session Beans</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Jakarta EE Platform</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../messaging/mail-api/mail-api.html">Jakarta Mail</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Jakarta Messaging</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../messaging/jms-concepts/jms-concepts.html">Jakarta Messaging Concepts</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../messaging/jms-examples/jms-examples.html">Jakarta Messaging Examples</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../supporttechs/batch-processing/batch-processing.html">Jakarta Batch</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Advanced</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Web Profile</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../security-authentication/security-authentication.html">Jakarta Authentication</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../security-authorization/security-authorization.html">Jakarta Authorization</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../supporttechs/transactions/transactions.html">Jakarta Transactions</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../supporttechs/concurrency-utilities/concurrency-utilities.html">Jakarta Concurrency</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Jakarta EE Platform</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../supporttechs/connectors/connectors.html">Jakarta Connectors</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Optional Components</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../web/faces-el/faces-el.html">Jakarta Expression Language</a>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-text">Jakarta XML Binding</span>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Archived</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Web Profile</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../web/jakarta-pages/jakarta-pages.html">Jakarta Pages</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../web/jakarta-tags/jakarta-tags.html">Jakarta Tags</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Jakarta EE Platform</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../websvcs/xml-websvcs/xml-websvcs.html">XML Web Services</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../entbeans/ejb-full/ejb-full.html">Jakarta Enterprise Beans Full</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Jakarta EE Tutorial</span>
    <span class="version">10</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <a class="title" href="../../index.html">Jakarta EE Tutorial</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../../index.html">10</a>
        </li>
        <li class="version">
          <a href="../../../9.1/index.html">9.1</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
<nav class="breadcrumbs" aria-label="breadcrumbs">
</nav>
<div class="page-versions">
  <button class="version-menu-toggle" title="Show other versions of page">10</button>
  <div class="version-menu">
    <a class="version is-current" href="security-intro005.html">10</a>
    <a class="version" href="../../../9.1/security/security-intro/security-intro005.html">9.1</a>
  </div>
</div>
  <div class="edit-this-page"><a href="file:///home/john/workspace/virtua/jakartaee-tutorial/src/main/antora/modules/security/pages/security-intro/security-intro005.adoc">Edit this Page</a></div>
</div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<div class="sect1">
<h2 id="_working_with_realms_users_groups_and_roles"><a class="anchor" href="#_working_with_realms_users_groups_and_roles"></a>Working with Realms, Users, Groups, and Roles</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You often need to protect resources to ensure that only authorized users have access.
See <a href="security-intro.html#_characteristics_of_application_security" class="xref page">Characteristics of Application Security</a> for an introduction to the concepts of authentication, identification, and authorization.</p>
</div>
<div class="paragraph">
<p>This section discusses setting up users so that they can be correctly identified and either given access to protected resources or denied access if they are not authorized to access the protected resources.
To authenticate a user, you need to follow these basic steps.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>The application developer writes code to prompt for a user name and password.
The various methods of authentication are discussed in <a href="../security-webtier/security-webtier.html#_specifying_authentication_mechanisms" class="xref page">Specifying Authentication Mechanisms</a>.</p>
</li>
<li>
<p>The application developer communicates how to set up security for the deployed application by use of a metadata annotation or deployment descriptor.
This step is discussed in <a href="#_setting_up_security_roles">Setting Up Security Roles</a>.</p>
</li>
<li>
<p>The server administrator sets up authorized users and groups in GlassFish Server.
This is discussed in <a href="#_managing_users_and_groups_in_glassfish_server">Managing Users and Groups in GlassFish Server</a>.</p>
</li>
<li>
<p>The application deployer maps the application&#8217;s security roles to users, groups, and principals defined in GlassFish Server.
This topic is discussed in <a href="#_mapping_roles_to_users_and_groups">Figure 1, &#8220;Mapping Roles to Users and Groups&#8221;</a>.</p>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
By default, group principal names are mapped to roles of the same name.
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="_what_are_realms_users_groups_and_roles"><a class="anchor" href="#_what_are_realms_users_groups_and_roles"></a>What Are Realms, Users, Groups, and Roles?</h3>
<div class="paragraph">
<p>A realm is a security policy domain defined for a web or application server.
A realm contains a collection of users, who may or may not be assigned to a group.
Managing users in GlassFish Server is discussed in <a href="#_managing_users_and_groups_in_glassfish_server">Managing Users and Groups in GlassFish Server</a>.</p>
</div>
<div class="paragraph">
<p>An application will often prompt for a user name and password before allowing access to a protected resource.
After the user name and password have been entered, that information is passed to the server, which either authenticates the user and sends the protected resource or does not authenticate the user, in which case access to the protected resource is denied.
This type of user authentication is discussed in <a href="../security-webtier/security-webtier.html#_specifying_an_authentication_mechanism_in_the_deployment_descriptor" class="xref page">Specifying an Authentication Mechanism in the Deployment Descriptor</a>.</p>
</div>
<div class="paragraph">
<p>In some applications, authorized users are assigned to roles.
In this situation, the role assigned to the user in the application must be mapped to a principal or group defined on the application server.
<a href="#_mapping_roles_to_users_and_groups">Figure 1, &#8220;Mapping Roles to Users and Groups&#8221;</a> shows this.
More information on mapping roles to users and groups can be found in <a href="#_setting_up_security_roles">Setting Up Security Roles</a>.</p>
</div>
<div id="_mapping_roles_to_users_and_groups" class="imageblock">
<div class="content">
<img src="../../common/_images/jakartaeett_dt_044.svg" alt="Diagram of role mapping, showing creation of users and groups, definition of roles, and mapping of roles to users and groups">
</div>
<div class="title">Figure 1. Mapping Roles to Users and Groups</div>
</div>
<div class="paragraph">
<p>The following sections provide more information on realms, users, groups, and roles.</p>
</div>
<div class="sect3">
<h4 id="_what_is_a_realm"><a class="anchor" href="#_what_is_a_realm"></a>What Is a Realm?</h4>
<div class="paragraph">
<p>The protected resources on a server can be partitioned into a set of protection spaces, each with its own authentication scheme and/or authorization database containing a collection of users and groups.
A realm is a complete database of users and groups identified as valid users of one or more applications and controlled by the same authentication policy.</p>
</div>
<div class="paragraph">
<p>The Jakarta EE server authentication service can govern users in multiple realms.
The <code>file</code>, <code>admin-realm</code>, and <code>certificate</code> realms come preconfigured for GlassFish Server.</p>
</div>
<div class="paragraph">
<p>In the <code>file</code> realm, the server stores user credentials locally in a file named <code>keyfile</code>.
You can use the Administration Console to manage users in the <code>file</code> realm.
When using the <code>file</code> realm, the server authentication service verifies user identity by checking the <code>file</code> realm.
This realm is used for the authentication of all clients except for web browser clients that use HTTPS and certificates.</p>
</div>
<div class="paragraph">
<p>In the <code>certificate</code> realm, the server stores user credentials in a certificate database.
When using the <code>certificate</code> realm, the server uses certificates with HTTPS to authenticate web clients.
To verify the identity of a user in the <code>certificate</code> realm, the authentication service verifies an X.509 certificate.
For step-by-step instructions for creating this type of certificate, see <a href="../security-advanced/security-advanced.html#_working_with_digital_certificates" class="xref page">Working with Digital Certificates</a>.
The common name field of the X.509 certificate is used as the principal name.</p>
</div>
<div class="paragraph">
<p>The <code>admin-realm</code> is also a <code>file</code> realm and stores administrator user credentials locally in a file named <code>admin-keyfile</code>.
You can use the Administration Console to manage users in this realm in the same way you manage users in the <code>file</code> realm.
For more information, see <a href="#_managing_users_and_groups_in_glassfish_server">Managing Users and Groups in GlassFish Server</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_what_is_a_user"><a class="anchor" href="#_what_is_a_user"></a>What Is a User?</h4>
<div class="paragraph">
<p>A user is an individual or application program identity that has been defined in GlassFish Server.
In a web application, a user can have associated with that identity a set of roles that entitle the user to access all resources protected by those roles.
Users can be associated with a group.</p>
</div>
<div class="paragraph">
<p>A Jakarta EE user is similar to an operating system user.
Typically, both types of users represent people.
However, these two types of users are not the same.
The Jakarta EE server authentication service has no knowledge of the user name and password you provide when you log in to the operating system.
The Jakarta EE server authentication service is not connected to the security mechanism of the operating system.
The two security services manage users that belong to different realms.</p>
</div>
</div>
<div class="sect3">
<h4 id="_what_is_a_group"><a class="anchor" href="#_what_is_a_group"></a>What Is a Group?</h4>
<div class="paragraph">
<p>A group is a set of authenticated users, classified by common traits, defined in GlassFish Server.
A Jakarta EE user of the <code>file</code> realm can belong to a group in GlassFish Server.
(A user in the <code>certificate</code> realm cannot.)
A group in GlassFish Server is a category of users classified by common traits, such as job title or customer profile.
For example, most customers of an e-commerce application might belong to the <code>CUSTOMER</code> group, but the big spenders would belong to the <code>PREFERRED</code> group.
Categorizing users into groups makes it easier to control the access of large numbers of users.</p>
</div>
<div class="paragraph">
<p>A group in GlassFish Server has a different scope from a role.
A group is designated for the entire GlassFish Server, whereas a role is associated only with a specific application in GlassFish Server.</p>
</div>
</div>
<div class="sect3">
<h4 id="_what_is_a_role"><a class="anchor" href="#_what_is_a_role"></a>What Is a Role?</h4>
<div class="paragraph">
<p>A role is an abstract name for the permission to access a particular set of resources in an application.
A role can be compared to a key that can open a lock.
Many people might have a copy of the key.
The lock doesn&#8217;t care who you are, only that you have the right key.</p>
</div>
</div>
<div class="sect3">
<h4 id="_some_other_terminology"><a class="anchor" href="#_some_other_terminology"></a>Some Other Terminology</h4>
<div class="paragraph">
<p>The following terminology is also used to describe the security requirements of the Jakarta EE platform.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A principal is an entity that can be authenticated by an authentication protocol in a security service that is deployed in an enterprise.
A principal is identified by using a principal name and authenticated by using authentication data.</p>
</li>
<li>
<p>A security policy domain, also known as a security domain or realm, is a scope over which a common security policy is defined and enforced by the security administrator of the security service.</p>
</li>
<li>
<p>Security attributes are a set of attributes associated with every principal.
The security attributes have many uses: for example, access to protected resources and auditing of users.
Security attributes can be associated with a principal by an authentication protocol.</p>
</li>
<li>
<p>A credential is an object that contains or references security attributes used to authenticate a principal for Jakarta EE services.
A principal acquires a credential upon authentication or from another principal that allows its credential to be used.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_managing_users_and_groups_in_glassfish_server"><a class="anchor" href="#_managing_users_and_groups_in_glassfish_server"></a>Managing Users and Groups in GlassFish Server</h3>
<div class="paragraph">
<p>Follow these steps for managing users before you run the tutorial examples.</p>
</div>
<div class="sect3">
<h4 id="_to_add_users_to_glassfish_server"><a class="anchor" href="#_to_add_users_to_glassfish_server"></a>To Add Users to GlassFish Server</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Start GlassFish Server, if you haven&#8217;t already done so.</p>
<div class="paragraph">
<p>Information on starting GlassFish Server is available in <a href="../../intro/usingexamples/usingexamples.html#_starting_and_stopping_glassfish_server" class="xref page">Starting and Stopping GlassFish Server</a>.</p>
</div>
</li>
<li>
<p>Start the Administration Console, if you haven&#8217;t already done so.</p>
<div class="paragraph">
<p>To start the Administration Console, open a web browser and specify the URL <a href="http://localhost:4848/" class="bare" target="_blank" rel="noopener">http://localhost:4848/</a>.
If you changed the default Admin port during installation, enter the correct port number in place of <code>4848</code>.</p>
</div>
</li>
<li>
<p>In the navigation tree, expand the Configurations node, then expand the server-config node.</p>
</li>
<li>
<p>Expand the Security node.</p>
</li>
<li>
<p>Expand the Realms node.</p>
</li>
<li>
<p>Select the realm to which you are adding users.</p>
<div class="ulist">
<ul>
<li>
<p>Select the <code>file</code> realm to add users you want to access applications running in this realm.</p>
<div class="paragraph">
<p>For the example security applications, select the <code>file</code> realm.</p>
</div>
</li>
<li>
<p>Select the <code>admin-realm</code> to add users you want to enable as system administrators of GlassFish Server.</p>
<div class="paragraph">
<p>You cannot add users to the <code>certificate</code> realm by using the Administration Console.
In the <code>certificate</code> realm, you can add only certificates.
For information on adding (importing) certificates to the <code>certificate</code> realm, see <a href="../security-advanced/security-advanced.html#_adding_users_to_the_certificate_realm" class="xref page">Adding Users to the Certificate Realm</a>.</p>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>On the Edit Realm page, click Manage Users.</p>
</li>
<li>
<p>On the File Users or Admin Users page, click New to add a new user to the realm.</p>
</li>
<li>
<p>On the New File Realm User page, enter values in the User ID, Group List, New Password, and Confirm New Password fields.</p>
<div class="paragraph">
<p>For the Admin Realm, the Group List field is read-only, and the group name is <code>asadmin</code>.
Restart GlassFish Server and the Administration Console after you add a user to the Admin Realm.</p>
</div>
<div class="paragraph">
<p>For more information on these properties, see <a href="#_working_with_realms_users_groups_and_roles">Working with Realms, Users, Groups, and Roles</a>.</p>
</div>
<div class="paragraph">
<p>For the example security applications, specify a user with any name and password you like, but make sure that the user is assigned to the group <code>TutorialUser</code>.
The user name and password are case-sensitive.
Keep a record of the user name and password for working with the examples later in this tutorial.</p>
</div>
</li>
<li>
<p>Click OK to add this user to the realm, or click Cancel to quit without saving.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_setting_up_security_roles"><a class="anchor" href="#_setting_up_security_roles"></a>Setting Up Security Roles</h3>
<div class="paragraph">
<p>When you design an enterprise bean or web component, you should always think about the kinds of users who will access the component.
For example, a web application for a human resources department might have a different request URL for someone who has been assigned the role of <code>DEPT_ADMIN</code> than for someone who has been assigned the role of <code>DIRECTOR</code>.
The <code>DEPT_ADMIN</code> role may let you view employee data, but the <code>DIRECTOR</code> role enables you to modify employee data, including salary data.
Each of these security roles is an abstract logical grouping of users that is defined by the person who assembles the application.
When an application is deployed, the deployer will map the roles to security identities in the operational environment, as shown in <a href="#_mapping_roles_to_users_and_groups">Figure 1, &#8220;Mapping Roles to Users and Groups&#8221;</a>.</p>
</div>
<div class="paragraph">
<p>For Jakarta EE components, you define security roles using the <code>@DeclareRoles</code> and <code>@RolesAllowed</code> metadata annotations.</p>
</div>
<div class="paragraph">
<p>The following is an example of an application in which the role of <code>DEPT-ADMIN</code> is authorized for methods that review employee payroll data, and the role of <code>DIRECTOR</code> is authorized for methods that change employee payroll data.</p>
</div>
<div class="paragraph">
<p>The enterprise bean would be annotated as shown in the following code:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">import jakarta.annotation.security.DeclareRoles;
import jakarta.annotation.security.RolesAllowed;
...
@DeclareRoles({"DEPT-ADMIN", "DIRECTOR"})
@Stateless public class PayrollBean implements Payroll {
    @Resource SessionContext ctx;


    @RolesAllowed("DEPT-ADMIN")
    public void reviewEmployeeInfo(EmplInfo info) {

        oldInfo = ... read from database;

        // ...
    }

    @RolesAllowed("DIRECTOR")
    public void updateEmployeeInfo(EmplInfo info) {

        newInfo = ... update database;

        // ...
    }
    ...
 }</code></pre>
</div>
</div>
<div class="paragraph">
<p>For a servlet, you can use the <code>@HttpConstraint</code> annotation within the <code>@ServletSecurity</code> annotation to specify the roles that are allowed to access the servlet.
For example, a servlet might be annotated as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@WebServlet(name = "PayrollServlet", urlPatterns = {"/payroll"})
@ServletSecurity(
@HttpConstraint(transportGuarantee = TransportGuarantee.CONFIDENTIAL,
    rolesAllowed = {"DEPT-ADMIN", "DIRECTOR"}))
public class GreetingServlet extends HttpServlet { ... }</code></pre>
</div>
</div>
<div class="paragraph">
<p>These annotations are discussed in more detail in <a href="../security-webtier/security-webtier.html#_specifying_security_for_basic_authentication_using_annotations" class="xref page">Specifying Security for Basic Authentication Using Annotations</a> and <a href="../security-jakartaee/security-jakartaee.html#_securing_an_enterprise_bean_using_declarative_security" class="xref page">Securing an Enterprise Bean Using Declarative Security</a>.</p>
</div>
<div class="paragraph">
<p>After users have provided their login information and the application has declared what roles are authorized to access protected parts of an application, the next step is to map the security role to the name of a user, or principal.</p>
</div>
</div>
<div class="sect2">
<h3 id="_mapping_roles_to_users_and_groups_2"><a class="anchor" href="#_mapping_roles_to_users_and_groups_2"></a>Mapping Roles to Users and Groups</h3>
<div class="paragraph">
<p>When you are developing a Jakarta EE application, you don&#8217;t need to know what categories of users have been defined for the realm in which the application will be run.
In the Jakarta EE platform, the security architecture provides a mechanism for mapping the roles defined in the application to the users or groups defined in the runtime realm.</p>
</div>
<div class="paragraph">
<p>The role names used in the application are often the same as the group names defined in GlassFish Server.
Jakarta Security requires that group principal names are mapped to roles of the same name by default.
Accordingly, the <strong>Default Principal To Role Mapping</strong> setting is enabled by default on the Security page of the GlassFish Server Administration Console.
All the tutorial security examples use default principal-to-role mapping.
With that setting enabled, if the group name defined on GlassFish Server matches the role name defined in the application, there is no need to use the runtime deployment descriptor to provide a mapping.
The application server will implicitly make this mapping, as long as the names of the groups and roles match.</p>
</div>
<div class="paragraph">
<p>If the role names used in an application are not the same as the group names defined on the server, use the runtime deployment descriptor to specify the mapping.
The following example demonstrates how to do this mapping in the <code>glassfish-web.xml</code> file, which is the file used for web applications:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;glassfish-web-app&gt;
    ...
    &lt;security-role-mapping&gt;
        &lt;role-name&gt;Mascot&lt;/role-name&gt;
        &lt;principal-name&gt;Duke&lt;/principal-name&gt;
    &lt;/security-role-mapping&gt;

    &lt;security-role-mapping&gt;
        &lt;role-name&gt;Admin&lt;/role-name&gt;
        &lt;group-name&gt;Director&lt;/group-name&gt;
    &lt;/security-role-mapping&gt;
    ...
&lt;/glassfish-web-app&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>A role can be mapped to specific principals, specific groups, or both.
The principal or group names must be valid principals or groups in the current default realm or in the realm specified in the <code>login-config</code> element.
In this example, the role of <code>Mascot</code> used in the application is mapped to a principal, named <code>Duke</code>, that exists on the application server.
Mapping a role to a specific principal is useful when the person occupying that role may change.
For this application, you would need to modify only the runtime deployment descriptor rather than search and replace throughout the application for references to this principal.</p>
</div>
<div class="paragraph">
<p>Also in this example, the role of <code>Admin</code> is mapped to a group of users assigned the group name of <code>Director</code>.
This is useful because the group of people authorized to access director-level administrative data has to be maintained only in GlassFish Server.
The application developer does not need to know who these people are, but only needs to define the group of people who will be given access to the information.</p>
</div>
<div class="paragraph">
<p>The <code>role-name</code> must match the <code>role-name</code> in the <code>security-role</code> element of the corresponding deployment descriptor or the role name defined in a <code>@DeclareRoles</code> annotation.</p>
</div>
</div>
</div>
</div>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <p>This page was built using the Antora default UI.</p>
  <p>The source code for this UI is licensed under the terms of the MPL-2.0 license.</p>
</footer>
<script id="site-script" src="../../../../_/js/site.js" data-ui-root-path="../../../../_"></script>
<script async src="../../../../_/js/vendor/highlight.js"></script>
  </body>
</html>
