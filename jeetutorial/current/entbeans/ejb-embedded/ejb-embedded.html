<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Using the Embedded Enterprise Bean Container :: Jakarta EE Documentation</title>
    <meta name="generator" content="Antora 3.1.3">
    <link rel="stylesheet" href="../../../../_/css/site.css">
    <script>var uiRootPath = '../../../../_'</script>
    <script>!function (theme) {
        if (theme === 'dark') document.documentElement.classList.add('theme-dark')
      }(localStorage && localStorage.getItem('theme') || (matchMedia('(prefers-color-scheme: dark)') && 'dark'))
    </script>
      </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a id="site-title" class="navbar-item" href="../../../..">Jakarta EE Documentation</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
<!--
        <a class="navbar-item" href="#">Home</a>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Products</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Product A</a>
            <a class="navbar-item" href="#">Product B</a>
            <a class="navbar-item" href="#">Product C</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Services</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Service A</a>
            <a class="navbar-item" href="#">Service B</a>
            <a class="navbar-item" href="#">Service C</a>
          </div>
        </div>
 -->
        <div class="navbar-item">
          <span class="control">
            <a class="button is-primary" href="../../../../jakartaee-tutorial/10/jakarta-ee-tutorial.pdf">Download</a>
          </span>
        </div>
      </div>
      <div class="navbar-theme-switcher">
        <span class="switch" title="Switch between Light and Dark Theme">
          <input id="theme-switcher-checkbox" type="checkbox" />
          <label for="theme-switcher-checkbox">Dark Theme</label>
        </span>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="jakartaee-tutorial" data-version="10">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../../index.html">Jakarta EE Tutorial</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Introduction</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../index.html">Preface</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Core Profile</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Jakarta CDI Lite</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../cdi/cdi-basic/cdi-basic.html">Introduction to Jakarta Contexts and Dependency Injection</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../cdi/cdi-basicexamples/cdi-basicexamples.html">Running the Basic Contexts and Dependency Injection Examples</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../supporttechs/interceptors/interceptors.html">Using Jakarta EE Interceptors</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Jakarta REST</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../websvcs/jaxrs/jaxrs.html">Building RESTful Web Services with Jakarta REST</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../websvcs/jaxrs-client/jaxrs-client.html">Accessing REST Resources with the Jakarta REST Client API</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../websvcs/jaxrs-advanced/jaxrs-advanced.html">Jakarta REST: Advanced Topics and an Example</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Jakarta JSON</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../web/jsonb/jsonb.html">JSON Binding</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../web/jsonp/jsonp.html">JSON Processing</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Web Profile</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Jakarta CDI Full</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../cdi/cdi-adv/cdi-adv.html">Jakarta Contexts and Dependency Injection: Advanced Topics</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../cdi/cdi-bootstrap-se8/cdi-bootstrap-se8.html">Bootstrapping a CDI Container in Java SE</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../cdi/cdi-adv-examples/cdi-adv-examples.html">Running the Advanced Contexts and Dependency Injection Examples</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Jakarta Validation</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../beanvalidation/bean-validation/bean-validation.html">Introduction to Jakarta Bean Validation</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../beanvalidation/bean-validation-advanced/bean-validation-advanced.html">Bean Validation: Advanced Topics</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../security/security.html">Jakarta Security</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Jakarta Servlets</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../web/webapp/webapp.html">Getting Started with Web Applications</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../web/servlets/servlets.html">Jakarta Servlet Technology</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Jakarta Faces</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../web/faces-intro/faces-intro.html">Jakarta Faces Technology</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../web/faces-facelets/faces-facelets.html">Introduction to Facelets</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../web/faces-page/faces-page.html">Using Jakarta Faces Technology in Web Pages</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../web/faces-page-core/faces-page-core.html">Using Converters, Listeners, and Validators</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../web/faces-develop/faces-develop.html">Developing with Jakarta Faces Technology</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../web/faces-ajax/faces-ajax.html">Using Ajax with Jakarta Faces Technology</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../web/faces-advanced-cc/faces-advanced-cc.html">Composite Components: Advanced Topics and an Example</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../web/faces-custom/faces-custom.html">Creating Custom UI Components and Other Custom Objects</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../web/faces-configure/faces-configure.html">Configuring Jakarta Faces Applications</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../web/faces-ws/faces-ws.html">Using WebSockets with Jakarta Faces Technology</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../web/webi18n/webi18n.html">Internationalizing and Localizing Web Applications</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../web/websocket/websocket.html">Jakarta WebSocket</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Jakarta Persistence</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../persist/persistence-intro/persistence-intro.html">Introduction to Jakarta Persistence</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../persist/persistence-basicexamples/persistence-basicexamples.html">Running the Persistence Examples</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../persist/persistence-querylanguage/persistence-querylanguage.html">The Jakarta Persistence Query Language</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../persist/persistence-criteria/persistence-criteria.html">Using the Criteria API to Create Queries</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../persist/persistence-string-queries/persistence-string-queries.html">Creating and Using String-Based Criteria Queries</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../persist/persistence-locking/persistence-locking.html">Controlling Concurrent Access to Entity Data with Locking</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../persist/persistence-entitygraphs/persistence-entitygraphs.html">Creating Fetch Plans with Entity Graphs</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../persist/persistence-cache/persistence-cache.html">Using a Second-Level Cache with Jakarta Persistence Applications</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Jakarta Enterprise Beans Lite</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../ejb-intro/ejb-intro.html">Enterprise Beans</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../ejb-gettingstarted/ejb-gettingstarted.html">Getting Started with Enterprise Beans</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../ejb-basicexamples/ejb-basicexamples.html">Running the Enterprise Bean Examples</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../ejb-async/ejb-async.html">Using Asynchronous Method Invocation in Session Beans</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Full Profile</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../messaging/mail-api/mail-api.html">Jakarta Mail</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Jakarta Messaging</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../messaging/jms-concepts/jms-concepts.html">Jakarta Messaging Concepts</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../messaging/jms-examples/jms-examples.html">Jakarta Messaging Examples</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../supporttechs/batch-processing/batch-processing.html">Jakarta Batch</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Advanced</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Web Profile</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../security/security-authentication/security-authentication.html">Jakarta Authentication</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../security/security-authorization/security-authorization.html">Jakarta Authorization</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../supporttechs/transactions/transactions.html">Jakarta Transactions</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../supporttechs/concurrency-utilities/concurrency-utilities.html">Jakarta Concurrency</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Full Profile</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../supporttechs/connectors/connectors.html">Jakarta Connectors</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Optional Components</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../web/faces-el/faces-el.html">Jakarta Expression Language</a>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-text">Jakarta XML Binding</span>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Archived</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Web Profile</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../web/jakarta-pages/jakarta-pages.html">Jakarta Pages</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../web/jakarta-tags/jakarta-tags.html">Jakarta Tags</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Full Profile</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">XML Web Services</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../9.1/websvcs/webservices-intro/webservices-intro.html">Introduction to Web Services</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../9.1/websvcs/jaxws/jaxws.html">Building Web Services with Jakarta XML Web Services</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Jakarta Enterprice Beans Full</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../9.1/entbeans/ejb-embedded/ejb-embedded.html">Using the Embedded Enterprise Bean Container</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Jakarta EE Tutorial</span>
    <span class="version">10</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <a class="title" href="../../index.html">Jakarta EE Tutorial</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../../index.html">10</a>
        </li>
        <li class="version">
          <a href="../../../9.1/index.html">9.1</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../../index.html">Jakarta EE Tutorial</a></li>
    <li><a href="ejb-embedded.html">Using the Embedded Enterprise Bean Container</a></li>
  </ul>
</nav>
<div class="page-versions">
  <button class="version-menu-toggle" title="Show other versions of page">10</button>
  <div class="version-menu">
    <a class="version is-current" href="ejb-embedded.html">10</a>
    <a class="version" href="../../../9.1/entbeans/ejb-embedded/ejb-embedded.html">9.1</a>
  </div>
</div>
  <div class="edit-this-page"><a href="file:///home/john/workspace/virtua/jakartaee-tutorial/src/main/antora/modules/entbeans/pages/ejb-embedded/ejb-embedded.adoc">Edit this Page</a></div>
</div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Using the Embedded Enterprise Bean Container</h1>
<div id="preamble">
<div class="sectionbody">
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>We are working on a fresh, updated Jakarta EE Tutorial. This section hasn&#8217;t yet been updated.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>This chapter demonstrates how to use the embedded enterprise bean container to run enterprise bean applications in the Java SE environment, outside of a Jakarta EE server.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_overview_of_the_embedded_enterprise_bean_container"><a class="anchor" href="#_overview_of_the_embedded_enterprise_bean_container"></a>Overview of the Embedded Enterprise Bean Container</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The embedded enterprise bean container is used to access enterprise bean components from client code executed in a Java SE environment.
The container and the client code are executed within the same virtual machine.
The embedded enterprise bean container is typically used for testing enterprise beans without having to deploy them to a server.</p>
</div>
<div class="paragraph">
<p>Most of the services present in the enterprise bean container in a Jakarta EE server are available in the embedded enterprise bean container, including injection, container-managed transactions, and security.
Enterprise bean components execute similarly in both embedded and Jakakarta EE environments, and therefore the same enterprise bean can be easily reused in both standalone and networked applications.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_developing_embeddable_enterprise_bean_applications"><a class="anchor" href="#_developing_embeddable_enterprise_bean_applications"></a>Developing Embeddable Enterprise Bean Applications</h2>
<div class="sectionbody">
<div class="paragraph">
<p>All embeddable enterprise bean containers support the features listed in <a href="#_required_enterprise_bean_features_in_the_embeddable_container">Required Enterprise Bean Features in the Embeddable Container</a>.</p>
</div>
<table id="_required_enterprise_bean_features_in_the_embeddable_container" class="tableblock frame-all grid-all" style="width: 50%;">
<caption class="title">Required Enterprise Bean Features in the Embeddable Container</caption>
<colgroup>
<col style="width: 37.5%;">
<col style="width: 62.5%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Enterprise Bean Feature</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Local session beans</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Local and no-interface view stateless, stateful, and singleton session beans.
All method access is synchronous.
Session beans must not be web service endpoints.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Transactions</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Container-managed and bean-managed transactions.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Security</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Declarative and programmatic security.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Interceptors</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Class-level and method-level interceptors for session beans.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Deployment descriptor</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The optional <code>ejb-jar.xml</code> deployment descriptor, with the same overriding rules for the enterprise bean container in Jakarta EE servers.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Container providers are allowed to support the full set of features in enterprise beans, but applications that use the embedded container will not be portable if they use enterprise bean features not listed in <a href="#_required_enterprise_bean_features_in_the_embeddable_container">Required Enterprise Bean Features in the Embeddable Container</a>, such as the timer service, session beans as web service endpoints, or remote business interfaces.</p>
</div>
<div class="sect2">
<h3 id="_running_embedded_applications"><a class="anchor" href="#_running_embedded_applications"></a>Running Embedded Applications</h3>
<div class="paragraph">
<p>The embedded container, the enterprise bean components, and the client all are executed in the same virtual machine using the same classpath. As a result, developers can run an application that uses the embedded container just like a typical Java SE application, as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">java -classpath mySessionBean.jar:containerProviderRuntime.jar:myClient.jar \
com.example.ejb.client.Main</code></pre>
</div>
</div>
<div class="paragraph">
<p>In the above example, <code>mySessionBean.jar</code> is an enterprise bean JAR containing a local stateless session bean, <code>containerProviderRuntime.jar</code> is a JAR file supplied by the enterprise bean provider that contains the needed runtime classes for the embedded container, and <code>myClient.jar</code> is a JAR file containing a Java SE application that calls the business methods in the session bean through the embedded container.</p>
</div>
<div class="paragraph">
<p>In GlassFish Server, the runtime JAR that includes the classes for the embedded container is <code>glassfish-embedded-all.jar</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_creating_the_enterprise_bean_container"><a class="anchor" href="#_creating_the_enterprise_bean_container"></a>Creating the Enterprise Bean Container</h3>
<div class="paragraph">
<p>The <code>jakarta.ejb.embedded.EJBContainer</code> abstract class represents an instance of the enterprise bean container and includes factory methods for creating a container instance.
The <code>EJBContainer.createEJBContainer</code> method is used to create and initialize an embedded container instance.</p>
</div>
<div class="paragraph">
<p>The following code snippet shows how to create an embedded container that is initialized with the container provider&#8217;s default settings:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">EJBContainer ec = EJBContainer.createEJBContainer();</code></pre>
</div>
</div>
<div class="paragraph">
<p>By default, the embedded container will search the virtual machine classpath for enterprise bean modules: directories containing a <code>META-INF/ejb-jar.xml</code> deployment descriptor, directories containing a class file with one of the enterprise bean component annotations (such as <code>@Stateless</code>), or JAR files containing an <code>ejb-jar.xml</code> deployment descriptor or class file with an enterprise bean annotation.
Any matching entries are considered enterprise bean modules within the same application.
Once all the valid enterprise bean modules have been found in the classpath, the container will begin initializing the modules.
When the <code>createEJBContainer</code> method successfully returns, the client application can obtain references to the client view of any enterprise bean module found by the embedded container.</p>
</div>
<div class="paragraph">
<p>An alternate version of the <code>EJBContainer.createEJBContainer</code> method takes a <code>Map</code> of properties and settings for customizing the embeddable container instance:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">Properties props = new Properties();
props.setProperty(...);
...
EJBContainer ec = EJBContainer.createEJBContainer(props);</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="_explicitly_specifying_enterprise_bean_modules_to_be_initialized"><a class="anchor" href="#_explicitly_specifying_enterprise_bean_modules_to_be_initialized"></a>Explicitly Specifying Enterprise Bean Modules to Be Initialized</h4>
<div class="paragraph">
<p>Developers can specify exactly which enterprise bean modules the embedded container will initialize.
To explicitly specify the enterprise bean modules initialized by the embedded container, set the <code>EJBContainer.MODULES</code> property.</p>
</div>
<div class="paragraph">
<p>The modules may be located either in the virtual machine classpath in which the embedded container and client code run, or alternately outside the virtual machine classpath.</p>
</div>
<div class="paragraph">
<p>To specify modules in the virtual machine classpath, set <code>EJBContainer.MODULES</code> to a <code>String</code> to specify a single module name, or a <code>String</code> array containing the module names.
The embedded container searches the virtual machine classpath for enterprise bean modules matching the specified names:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">Properties props = new Properties();
props.setProperty(EJBContainer.MODULES, "mySessionBean");
EJBContainer ec = EJBContainer.createEJBContainer(props);</code></pre>
</div>
</div>
<div class="paragraph">
<p>To specify enterprise bean modules outside the virtual machine classpath, set <code>EJBContainer.MODULES</code> to a <code>java.io.File</code> object or an array of <code>File</code> objects.
Each <code>File</code> object refers to an enterprise bean JAR file, or a directory containing an expanded enterprise bean JAR file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">Properties props = new Properties();
File ejbJarFile = new File(...);
props.setProperty(EJBContainer.MODULES, ejbJarFile);
EJBContainer ec = EJBContainer.createEJBContainer(props);</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_looking_up_session_bean_references"><a class="anchor" href="#_looking_up_session_bean_references"></a>Looking Up Session Bean References</h3>
<div class="paragraph">
<p>To look up session bean references in an application using the embedded container:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Use an instance of <code>EJBContainer</code> to retrieve a <code>javax.naming.Context</code> object.</p>
<div class="paragraph">
<p>Call the <code>EJBContainer.getContext</code> method to retrieve the <code>Context</code> object:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">EJBContainer ec = EJBContainer.createEJBContainer();
Context ctx = ec.getContext();</code></pre>
</div>
</div>
<div class="paragraph">
<p>References to session beans can then be obtained using the portable JNDI syntax detailed in <a href="../ejb-intro/ejb-intro.html#_portable_jndi_syntax" class="xref page">Portable JNDI Syntax</a>.
For example, to obtain a reference to <code>MySessionBean</code>, a local session bean with a no-interface view, use the following code:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">MySessionBean msb = (MySessionBean)
            ctx.lookup("java:global/mySessionBean/MySessionBean");</code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_shutting_down_the_enterprise_bean_container"><a class="anchor" href="#_shutting_down_the_enterprise_bean_container"></a>Shutting Down the Enterprise Bean Container</h3>
<div class="paragraph">
<p>To shut down the embedded container:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>From the client, call the <code>close</code> method of the instance of <code>EJBContainer</code>.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">EJBContainer ec = EJBContainer.createEJBContainer();
...
ec.close();</code></pre>
</div>
</div>
<div class="paragraph">
<p>While clients are not required to shut down <code>EJBContainer</code> instances, doing so frees resources consumed by the embedded container.
This is particularly important when the virtual machine under which the client application is running has a longer lifetime than the client application.</p>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_the_standalone_example_application"><a class="anchor" href="#_the_standalone_example_application"></a>The standalone Example Application</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <code>standalone</code> example application demonstrates how to create an instance of the embedded enterprise bean container in a JUnit test class and call a session bean business method.</p>
</div>
<div class="sect2">
<h3 id="_overview_of_the_standalone_example_application"><a class="anchor" href="#_overview_of_the_standalone_example_application"></a>Overview of the standalone Example Application</h3>
<div class="paragraph">
<p>Testing the business methods of an enterprise bean in a unit test allows developers to exercise the business logic of an application separately from the other application layers, such as the presentation layer, and without having to deploy the application to a Jakarta EE server.</p>
</div>
<div class="paragraph">
<p>The <code>standalone</code> example has two main components: <code>StandaloneBean</code>, a stateless session bean, and <code>StandaloneBeanTest</code>, a JUnit test class that acts as a client to <code>StandaloneBean</code> using the embedded container.</p>
</div>
<div class="paragraph">
<p><code>StandaloneBean</code> is a simple session bean exposing a local, no-interface view with a single business method, <code>returnMessage</code>, which returns "Greetings!" as a <code>String</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Stateless
public class StandaloneBean {

    private static final String message = "Greetings!";

    public String returnMessage() {
        return message;
    }

}</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>StandaloneBeanTest</code> calls <code>StandaloneBean.returnMessage</code> and tests that the returned message is correct.
First, an embedded container instance and initial context are created within the <code>setUp</code> method, which is annotated with <code>org.junit.Before</code> to indicate that the method should be executed before the test methods:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Before
public void setUp() {
    ec = EJBContainer.createEJBContainer();
    ctx = ec.getContext();
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>testReturnMessage</code> method, annotated with <code>org.junit.Test</code> to indicate that the method includes a unit test, obtains a reference to <code>StandaloneBean</code> through the <code>Context</code> instance, and calls <code>StandaloneBean.returnMessage</code>.
The result is compared with the expected result using a JUnit assertion, <code>assertEquals</code>.
If the string returned from <code>StandaloneBean.returnMessage</code> is equal to "Greetings!" the test passes:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Test
public void testReturnMessage() throws Exception {
    logger.info("Testing standalone.ejb.StandaloneBean.returnMessage()");
    StandaloneBean instance = (StandaloneBean)
            ctx.lookup("java:global/classes/StandaloneBean");
    String expResult = "Greetings!";
    String result = instance.returnMessage();
    assertEquals(expResult, result);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Finally, the <code>tearDown</code> method, annotated with <code>org.junit.After</code> to indicate that the method should be executed after all the unit tests have run, closes the embedded container instance:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@After
public void tearDown() {
    if (ec != null) {
        ec.close();
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_to_run_the_standalone_example_application_using_netbeans_ide"><a class="anchor" href="#_to_run_the_standalone_example_application_using_netbeans_ide"></a>To Run the standalone Example Application Using NetBeans IDE</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>From the <strong>File</strong> menu, choose <strong>Open Project</strong>.</p>
</li>
<li>
<p>In the <strong>Open Project</strong> dialog box, navigate to:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asciidoc hljs" data-lang="asciidoc">tut-install/examples/ejb</code></pre>
</div>
</div>
</li>
<li>
<p>Select the <code>standalone</code> folder and click <strong>Open Project</strong>.</p>
</li>
<li>
<p>In the <strong>Projects</strong> tab, right-click <code>standalone</code> and select <strong>Test</strong>.</p>
<div class="paragraph">
<p>This will execute the JUnit test class <code>StandaloneBeanTest</code>.
The Output tab shows the progress of the test and the output log.</p>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_to_run_the_standalone_example_application_using_maven"><a class="anchor" href="#_to_run_the_standalone_example_application_using_maven"></a>To Run the standalone Example Application Using Maven</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In a terminal window, go to:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asciidoc hljs" data-lang="asciidoc">tut-install/examples/ejb/standalone/</code></pre>
</div>
</div>
</li>
<li>
<p>Enter the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">mvn install</code></pre>
</div>
</div>
<div class="paragraph">
<p>This command compiles and packages the application into an JAR file, and executes the JUnit test class <code>StandaloneBeanTest</code>.</p>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <p>This page was built using the Antora default UI.</p>
  <p>The source code for this UI is licensed under the terms of the MPL-2.0 license.</p>
</footer>
<script id="site-script" src="../../../../_/js/site.js" data-ui-root-path="../../../../_"></script>
<script async src="../../../../_/js/vendor/highlight.js"></script>
  </body>
</html>
