<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Running the Advanced Contexts and Dependency Injection Examples :: Jakarta EE Documentation</title>
    <meta name="generator" content="Antora 3.1.3">
    <link rel="stylesheet" href="../../../../_/css/site.css">
    <script>var uiRootPath = '../../../../_'</script>
    <script>!function (theme) {
        if (theme === 'dark') document.documentElement.classList.add('theme-dark')
      }(localStorage && localStorage.getItem('theme') || (matchMedia('(prefers-color-scheme: dark)') && 'dark'))
    </script>
      </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a id="site-title" class="navbar-item" href="../../../..">Jakarta EE Documentation</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
<!--
        <a class="navbar-item" href="#">Home</a>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Products</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Product A</a>
            <a class="navbar-item" href="#">Product B</a>
            <a class="navbar-item" href="#">Product C</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Services</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Service A</a>
            <a class="navbar-item" href="#">Service B</a>
            <a class="navbar-item" href="#">Service C</a>
          </div>
        </div>
 -->
        <div class="navbar-item">
          <span class="control">
            <a class="button is-primary" href="../../../../jakartaee-tutorial/10/jakarta-ee-tutorial.pdf">Download</a>
          </span>
        </div>
      </div>
      <div class="navbar-theme-switcher">
        <span class="switch" title="Switch between Light and Dark Theme">
          <input id="theme-switcher-checkbox" type="checkbox" />
          <label for="theme-switcher-checkbox">Dark Theme</label>
        </span>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="jakartaee-tutorial" data-version="10">
  <div class="toolbar"></div>
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../../index.html">Jakarta EE Tutorial</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Introduction</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../index.html">Preface</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../intro/overview/overview.html">Overview</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../intro/usingexamples/usingexamples.html">Using the Tutorial Examples</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Jakarta EE Core Profile</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Jakarta CDI Lite</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../cdi-basic/cdi-basic.html">Introduction to Jakarta Contexts and Dependency Injection</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../cdi-basicexamples/cdi-basicexamples.html">Running the Basic Contexts and Dependency Injection Examples</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../supporttechs/interceptors/interceptors.html">Using Jakarta EE Interceptors</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Jakarta REST</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../websvcs/jaxrs/jaxrs.html">Building RESTful Web Services with Jakarta REST</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../websvcs/jaxrs-client/jaxrs-client.html">Accessing REST Resources with the Jakarta REST Client API</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../websvcs/jaxrs-advanced/jaxrs-advanced.html">Jakarta REST: Advanced Topics and an Example</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Jakarta JSON</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../web/jsonb/jsonb.html">JSON Binding</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../web/jsonp/jsonp.html">JSON Processing</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Jakarta EE Web Profile</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Jakarta CDI Full</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../cdi-adv/cdi-adv.html">Jakarta Contexts and Dependency Injection: Advanced Topics</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../cdi-bootstrap-se8/cdi-bootstrap-se8.html">Bootstrapping a CDI Container in Java SE</a>
  </li>
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="cdi-adv-examples.html">Running the Advanced Contexts and Dependency Injection Examples</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Jakarta Validation</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../beanvalidation/bean-validation/bean-validation.html">Introduction to Jakarta Bean Validation</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../beanvalidation/bean-validation-advanced/bean-validation-advanced.html">Bean Validation: Advanced Topics</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../security/security.html">Jakarta Security</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Jakarta Servlets</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../web/webapp/webapp.html">Getting Started with Web Applications</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../web/servlets/servlets.html">Jakarta Servlet Technology</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Jakarta Faces</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../web/faces-intro/faces-intro.html">Jakarta Faces Technology</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../web/faces-facelets/faces-facelets.html">Introduction to Facelets</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../web/faces-page/faces-page.html">Using Jakarta Faces Technology in Web Pages</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../web/faces-page-core/faces-page-core.html">Using Converters, Listeners, and Validators</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../web/faces-develop/faces-develop.html">Developing with Jakarta Faces Technology</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../web/faces-ajax/faces-ajax.html">Using Ajax with Jakarta Faces Technology</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../web/faces-advanced-cc/faces-advanced-cc.html">Composite Components: Advanced Topics and an Example</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../web/faces-custom/faces-custom.html">Creating Custom UI Components and Other Custom Objects</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../web/faces-configure/faces-configure.html">Configuring Jakarta Faces Applications</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../web/faces-ws/faces-ws.html">Using WebSockets with Jakarta Faces Technology</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../web/webi18n/webi18n.html">Internationalizing and Localizing Web Applications</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../web/websocket/websocket.html">Jakarta WebSocket</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Jakarta Persistence</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../persist/persistence-intro/persistence-intro.html">Introduction to Jakarta Persistence</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../persist/persistence-basicexamples/persistence-basicexamples.html">Running the Persistence Examples</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../persist/persistence-querylanguage/persistence-querylanguage.html">The Jakarta Persistence Query Language</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../persist/persistence-criteria/persistence-criteria.html">Using the Criteria API to Create Queries</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../persist/persistence-string-queries/persistence-string-queries.html">Creating and Using String-Based Criteria Queries</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../persist/persistence-locking/persistence-locking.html">Controlling Concurrent Access to Entity Data with Locking</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../persist/persistence-entitygraphs/persistence-entitygraphs.html">Creating Fetch Plans with Entity Graphs</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../persist/persistence-cache/persistence-cache.html">Using a Second-Level Cache with Jakarta Persistence Applications</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Jakarta Enterprise Beans Lite</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../entbeans/ejb-intro/ejb-intro.html">Enterprise Beans</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../entbeans/ejb-gettingstarted/ejb-gettingstarted.html">Getting Started with Enterprise Beans</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../entbeans/ejb-basicexamples/ejb-basicexamples.html">Running the Enterprise Bean Examples</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../entbeans/ejb-async/ejb-async.html">Using Asynchronous Method Invocation in Session Beans</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Jakarta EE Platform</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../messaging/mail-api/mail-api.html">Jakarta Mail</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Jakarta Messaging</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../messaging/jms-concepts/jms-concepts.html">Jakarta Messaging Concepts</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../messaging/jms-examples/jms-examples.html">Jakarta Messaging Examples</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../supporttechs/batch-processing/batch-processing.html">Jakarta Batch</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Advanced</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Web Profile</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../security/security-authentication/security-authentication.html">Jakarta Authentication</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../security/security-authorization/security-authorization.html">Jakarta Authorization</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../supporttechs/transactions/transactions.html">Jakarta Transactions</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../supporttechs/concurrency-utilities/concurrency-utilities.html">Jakarta Concurrency</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Jakarta EE Platform</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../supporttechs/connectors/connectors.html">Jakarta Connectors</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Optional Components</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../web/faces-el/faces-el.html">Jakarta Expression Language</a>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-text">Jakarta XML Binding</span>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Archived</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Web Profile</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../web/jakarta-pages/jakarta-pages.html">Jakarta Pages</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../web/jakarta-tags/jakarta-tags.html">Jakarta Tags</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Jakarta EE Platform</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../websvcs/xml-websvcs/xml-websvcs.html">XML Web Services</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../entbeans/ejb-full/ejb-full.html">Jakarta Enterprise Beans Full</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Jakarta EE Tutorial</span>
    <span class="version">10</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <a class="title" href="../../index.html">Jakarta EE Tutorial</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../../index.html">10</a>
        </li>
        <li class="version">
          <a href="../../../9.1/index.html">9.1</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../../index.html">Jakarta EE Tutorial</a></li>
    <li>Jakarta EE Web Profile</li>
    <li>Jakarta CDI Full</li>
    <li><a href="cdi-adv-examples.html">Running the Advanced Contexts and Dependency Injection Examples</a></li>
  </ul>
</nav>
<div class="page-versions">
  <button class="version-menu-toggle" title="Show other versions of page">10</button>
  <div class="version-menu">
    <a class="version is-current" href="cdi-adv-examples.html">10</a>
    <a class="version" href="../../../9.1/cdi/cdi-adv-examples/cdi-adv-examples.html">9.1</a>
  </div>
</div>
  <div class="edit-this-page"><a href="file:///home/john/workspace/virtua/jakartaee-tutorial/src/main/antora/modules/cdi/pages/cdi-adv-examples/cdi-adv-examples.adoc">Edit this Page</a></div>
</div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Running the Advanced Contexts and Dependency Injection Examples</h1>
<div id="preamble">
<div class="sectionbody">
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>We are working on a fresh, updated Jakarta EE Tutorial. This section hasn&#8217;t yet been updated.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>This chapter describes in detail how to build and run several advanced examples that use CDI.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_building_and_running_the_cdi_advanced_examples"><a class="anchor" href="#_building_and_running_the_cdi_advanced_examples"></a>Building and Running the CDI Advanced Examples</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The examples are in the <code><em>jakartaee-examples</em>/tutorial/cdi/</code> directory.
To build and run the examples, you will do the following.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Use NetBeans IDE or the Maven tool to compile, package, and deploy the example.</p>
</li>
<li>
<p>Run the example in a web browser.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>See <a href="../../intro/usingexamples/usingexamples.html#_using_the_tutorial_examples" class="xref page">Using the Tutorial Examples</a>, for basic information on installing, building, and running the examples.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_the_encoder_example_using_alternatives"><a class="anchor" href="#_the_encoder_example_using_alternatives"></a>The encoder Example: Using Alternatives</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <code>encoder</code> example shows how to use alternatives to choose between two beans at deployment time, as described in <a href="../cdi-adv/cdi-adv.html#_using_alternatives_in_cdi_applications" class="xref page">Using Alternatives in CDI Applications</a>.
The example includes an interface and two implementations of it, a managed bean, a Facelets page, and configuration files.</p>
</div>
<div class="paragraph">
<p>The source files are located in the <code><em>jakartaee-examples</em>/tutorial/cdi/encoder/src/main/java/jakarta/tutorial/encoder/</code> directory.</p>
</div>
<div class="sect2">
<h3 id="_the_coder_interface_and_implementations"><a class="anchor" href="#_the_coder_interface_and_implementations"></a>The Coder Interface and Implementations</h3>
<div class="paragraph">
<p>The <code>Coder</code> interface contains just one method, <code>codeString</code>, that takes two arguments: a string, and an integer value that specifies how the letters in the string should be transposed.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public interface Coder {

    public String codeString(String s, int tval);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The interface has two implementation classes, <code>CoderImpl</code> and <code>TestCoderImpl</code>.
The implementation of <code>codeString</code> in <code>CoderImpl</code> shifts the string argument forward in the alphabet by the number of letters specified in the second argument; any characters that are not letters are left unchanged.
(This simple shift code is known as a Caesar cipher because Julius Caesar reportedly used it to communicate with his generals.)
The implementation in <code>TestCoderImpl</code> merely displays the values of the arguments.
The <code>TestCoderImpl</code> implementation is annotated <code>@Alternative</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">import jakarta.enterprise.inject.Alternative;

@Alternative
public class TestCoderImpl implements Coder {

    @Override
    public String codeString(String s, int tval) {
        return ("input string is " + s + ", shift value is " + tval);
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>beans.xml</code> file for the <code>encoder</code> example contains an <code>alternatives</code> element for the <code>TestCoderImpl</code> class, but by default the element is commented out:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;beans ...&gt;
    &lt;!--&lt;alternatives&gt;
        &lt;class&gt;ee.jakarta.tutorial.encoder.TestCoderImpl&lt;/class&gt;
    &lt;/alternatives&gt;--&gt;
&lt;/beans&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>This means that by default, the <code>TestCoderImpl</code> class, annotated <code>@Alternative</code>, will not be used.
Instead, the <code>CoderImpl</code> class will be used.</p>
</div>
</div>
<div class="sect2">
<h3 id="_the_encoder_facelets_page_and_managed_bean"><a class="anchor" href="#_the_encoder_facelets_page_and_managed_bean"></a>The encoder Facelets Page and Managed Bean</h3>
<div class="paragraph">
<p>The simple Facelets page for the <code>encoder</code> example, <code>index.xhtml</code>, asks the user to enter the string and integer values and passes them to the managed bean, <code>CoderBean</code>, as <code>coderBean.inputString</code> and <code>coderBean.transVal</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;html lang="en"
      xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="jakarta.faces.html"&gt;
    &lt;h:head&gt;
        &lt;h:outputStylesheet library="css" name="default.css"/&gt;
        &lt;title&gt;String Encoder&lt;/title&gt;
    &lt;/h:head&gt;
    &lt;h:body&gt;
        &lt;h2&gt;String Encoder&lt;/h2&gt;
        &lt;p&gt;Type a string and an integer, then click Encode.&lt;/p&gt;
        &lt;p&gt;Depending on which alternative is enabled, the coder bean
            will either display the argument values or return a string that
            shifts the letters in the original string by the value you
            specify. The value must be between 0 and 26.&lt;/p&gt;
        &lt;h:form id="encodeit"&gt;
            &lt;p&gt;&lt;h:outputLabel value="Enter a string: " for="inputString"/&gt;
                &lt;h:inputText id="inputString"
                             value="#{coderBean.inputString}"/&gt;
                &lt;h:outputLabel value="Enter the number of letters to shift by: "
                               for="transVal"/&gt;
                &lt;h:inputText id="transVal" value="#{coderBean.transVal}"/&gt;&lt;/p&gt;
            &lt;p&gt;&lt;h:commandButton value="Encode"
                                action="#{coderBean.encodeString()}"/&gt;&lt;/p&gt;
            &lt;p&gt;&lt;h:outputLabel value="Result: " for="outputString"/&gt;
                &lt;h:outputText id="outputString"
                              value="#{coderBean.codedString}"
                              style="color:blue"/&gt;&lt;/p&gt;
            &lt;p&gt;&lt;h:commandButton value="Reset"
                                action="#{coderBean.reset}"/&gt;&lt;/p&gt;
        &lt;/h:form&gt;
        ...
    &lt;/h:body&gt;
&lt;/html&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>When the user clicks the Encode button, the page invokes the managed bean&#8217;s <code>encodeString</code> method and displays the result, <code>coderBean.codedString</code>, in blue.
The page also has a Reset button that clears the fields.</p>
</div>
<div class="paragraph">
<p>The managed bean, <code>CoderBean</code>, is a <code>@RequestScoped</code> bean that declares its input and output properties.
The <code>transVal</code> property has three Bean Validation constraints that enforce limits on the integer value, so that if the user enters an invalid value, a default error message appears on the Facelets page.
The bean also injects an instance of the <code>Coder</code> interface:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Named
@RequestScoped
public class CoderBean {

    private String inputString;
    private String codedString;
    @Max(26)
    @Min(0)
    @NotNull
    private int transVal;

    @Inject
    Coder coder;
    ...
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In addition to simple getter and setter methods for the three properties, the bean defines the <code>encodeString</code> action method called by the Facelets page.
This method sets the <code>codedString</code> property to the value returned by a call to the <code>codeString</code> method of the <code>Coder</code> implementation:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public void encodeString() {
    setCodedString(coder.codeString(inputString, transVal));
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Finally, the bean defines the <code>reset</code> method to empty the fields of the Facelets page:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public void reset() {
    setInputString("");
    setTransVal(0);
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_running_the_encoder_example"><a class="anchor" href="#_running_the_encoder_example"></a>Running the encoder Example</h3>
<div class="paragraph">
<p>You can use either NetBeans IDE or Maven to build, package, deploy, and run the <code>encoder</code> application.</p>
</div>
<div class="sect3">
<h4 id="_to_build_package_and_deploy_the_encoder_example_using_netbeans_ide"><a class="anchor" href="#_to_build_package_and_deploy_the_encoder_example_using_netbeans_ide"></a>To Build, Package, and Deploy the encoder Example Using NetBeans IDE</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Make sure that GlassFish Server has been started (see <a href="../../intro/usingexamples/usingexamples.html#_starting_and_stopping_glassfish_server" class="xref page">Starting and Stopping GlassFish Server</a>).</p>
</li>
<li>
<p>From the <strong>File</strong> menu, choose <strong>Open Project</strong>.</p>
</li>
<li>
<p>In the <strong>Open Project</strong> dialog box, navigate to:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asciidoc hljs" data-lang="asciidoc">jakartaee-examples/tutorial/cdi</code></pre>
</div>
</div>
</li>
<li>
<p>Select the <code>encoder</code> folder.</p>
</li>
<li>
<p>Click <strong>Open Project</strong>.</p>
</li>
<li>
<p>In the <strong>Projects</strong> tab, right-click the <code>encoder</code> project and select <strong>Build</strong>.</p>
<div class="paragraph">
<p>This command builds and packages the application into a WAR file, <code>encoder.war</code>, located in the <code>target</code> directory, and then deploys it to GlassFish Server.</p>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_to_run_the_encoder_example_using_netbeans_ide"><a class="anchor" href="#_to_run_the_encoder_example_using_netbeans_ide"></a>To Run the encoder Example Using NetBeans IDE</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In a web browser, enter the following URL:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asciidoc hljs" data-lang="asciidoc">http://localhost:8080/encoder</code></pre>
</div>
</div>
</li>
<li>
<p>On the String Encoder page, enter a string and the number of letters to shift by, and then click Encode.</p>
<div class="paragraph">
<p>The encoded string appears in blue on the Result line.
For example, if you enter <code>Java</code> and <code>4</code>, the result is <code>Neze</code>.</p>
</div>
</li>
<li>
<p>Now, edit the <code>beans.xml</code> file to enable the alternative implementation of <code>Coder</code>.</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>In the Projects tab, under the <code>encoder</code> project, expand the Web Pages node, then expand the WEB-INF node.</p>
</li>
<li>
<p>Double-click the <code>beans.xml</code> file to open it.</p>
</li>
<li>
<p>Remove the comment characters that surround the <code>alternatives</code> element, so that it looks like this:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;alternatives&gt;
    &lt;class&gt;ee.jakarta.tutorial.encoder.TestCoderImpl&lt;/class&gt;
&lt;/alternatives&gt;</code></pre>
</div>
</div>
</li>
<li>
<p>Save the file.</p>
</li>
</ol>
</div>
</li>
<li>
<p>Right-click the <code>encoder</code> project and select Clean and Build.</p>
</li>
<li>
<p>In the web browser, reenter the URL to show the String Encoder page for the redeployed project:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asciidoc hljs" data-lang="asciidoc">http://localhost:8080/encoder/</code></pre>
</div>
</div>
</li>
<li>
<p>Enter a string and the number of letters to shift by, and then click Encode.</p>
<div class="paragraph">
<p>This time, the Result line displays your arguments.
For example, if you enter <code>Java</code> and <code>4</code>, the result is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asciidoc hljs" data-lang="asciidoc">Result: input string is Java, shift value is 4</code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_to_build_package_and_deploy_the_encoder_example_using_maven"><a class="anchor" href="#_to_build_package_and_deploy_the_encoder_example_using_maven"></a>To Build, Package, and Deploy the encoder Example Using Maven</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Make sure that GlassFish Server has been started (see <a href="../../intro/usingexamples/usingexamples.html#_starting_and_stopping_glassfish_server" class="xref page">Starting and Stopping GlassFish Server</a>).</p>
</li>
<li>
<p>In a terminal window, go to:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asciidoc hljs" data-lang="asciidoc">jakartaee-examples/tutorial/cdi/encoder/</code></pre>
</div>
</div>
</li>
<li>
<p>Enter the following command to deploy the application:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">mvn install</code></pre>
</div>
</div>
<div class="paragraph">
<p>This command builds and packages the application into a WAR file, <code>encoder.war</code>, located in the <code>target</code> directory, and then deploys it to GlassFish Server.</p>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_to_run_the_encoder_example_using_maven"><a class="anchor" href="#_to_run_the_encoder_example_using_maven"></a>To Run the encoder Example Using Maven</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In a web browser, enter the following URL:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asciidoc hljs" data-lang="asciidoc">http://localhost:8080/encoder/</code></pre>
</div>
</div>
<div class="paragraph">
<p>The String Encoder page opens.</p>
</div>
</li>
<li>
<p>Enter a string and the number of letters to shift by, and then click Encode.</p>
<div class="paragraph">
<p>The encoded string appears in blue on the Result line.
For example, if you enter <code>Java</code> and <code>4</code>, the result is <code>Neze</code>.</p>
</div>
</li>
<li>
<p>Now, edit the <code>beans.xml</code> file to enable the alternative implementation of <code>Coder</code>.</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>In a text editor, open the following file:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asciidoc hljs" data-lang="asciidoc">jakartaee-examples/tutorial/cdi/encoder/src/main/webapp/WEB-INF/beans.xml</code></pre>
</div>
</div>
</li>
<li>
<p>Remove the comment characters that surround the <code>alternatives</code> element, so that it looks like this:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;alternatives&gt;
    &lt;class&gt;ee.jakarta.tutorial.encoder.TestCoderImpl&lt;/class&gt;
&lt;/alternatives&gt;</code></pre>
</div>
</div>
</li>
<li>
<p>Save and close the file.</p>
</li>
</ol>
</div>
</li>
<li>
<p>Enter the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">mvn clean install</code></pre>
</div>
</div>
</li>
<li>
<p>In the web browser, reenter the URL to show the String Encoder page for the redeployed project:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asciidoc hljs" data-lang="asciidoc">http://localhost:8080/encoder</code></pre>
</div>
</div>
</li>
<li>
<p>Enter a string and the number of letters to shift by, and then click Encode.</p>
<div class="paragraph">
<p>This time, the Result line displays your arguments.
For example, if you enter <code>Java</code> and <code>4</code>, the result is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asciidoc hljs" data-lang="asciidoc">Result: input string is Java, shift value is 4</code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_the_producermethods_example_using_a_producer_method_to_choose_a_bean_implementation"><a class="anchor" href="#_the_producermethods_example_using_a_producer_method_to_choose_a_bean_implementation"></a>The producermethods Example: Using a Producer Method to Choose a Bean Implementation</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <code>producermethods</code> example shows how to use a producer method to choose between two beans at runtime, as described in <a href="../cdi-adv/cdi-adv.html#_using_producer_methods_producer_fields_and_disposer_methods_in_cdi_applications" class="xref page">Using Producer Methods, Producer Fields, and Disposer Methods in CDI Applications</a>.
It is very similar to the <code>encoder</code> example described in <a href="#_the_encoder_example_using_alternatives">The encoder Example: Using Alternatives</a>.
The example includes the same interface and two implementations of it, a managed bean, a Facelets page, and configuration files.
It also contains a qualifier type.
When you run it, you do not need to edit the <code>beans.xml</code> file and redeploy the application to change its behavior.</p>
</div>
<div class="sect2">
<h3 id="_components_of_the_producermethods_example"><a class="anchor" href="#_components_of_the_producermethods_example"></a>Components of the producermethods Example</h3>
<div class="paragraph">
<p>The components of <code>producermethods</code> are very much like those for <code>encoder</code>, with some significant differences.</p>
</div>
<div class="paragraph">
<p>Neither implementation of the <code>Coder</code> bean is annotated <code>@Alternative</code>, and there is no <code>beans.xml</code> file, because it is not needed.</p>
</div>
<div class="paragraph">
<p>The Facelets page and the managed bean, <code>CoderBean</code>, have an additional property, <code>coderType</code>, that allows the user to specify at runtime which implementation to use.
In addition, the managed bean has a producer method that selects the implementation using a qualifier type, <code>@Chosen</code>.</p>
</div>
<div class="paragraph">
<p>The bean declares two constants that specify whether the coder type is the test implementation or the implementation that actually shifts letters:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">private final static int TEST = 1;
private final static int SHIFT = 2;
private int coderType = SHIFT; // default value</code></pre>
</div>
</div>
<div class="paragraph">
<p>The producer method, annotated with <code>@Produces</code> and <code>@Chosen</code> as well as <code>@RequestScoped</code> (so that it lasts only for the duration of a single request and response), returns one of the two implementations based on the <code>coderType</code> supplied by the user.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Produces
@Chosen
@RequestScoped
public Coder getCoder() {

    switch (coderType) {
        case TEST:
            return new TestCoderImpl();
        case SHIFT:
            return new CoderImpl();
        default:
            return null;
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Finally, the managed bean injects the chosen implementation, specifying the same qualifier as that returned by the producer method to resolve ambiguities:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Inject
@Chosen
@RequestScoped
Coder coder;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The Facelets page contains modified instructions and a pair of options whose selected value is assigned to the property <code>coderBean.coderType</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">    &lt;h2&gt;String Encoder&lt;/h2&gt;
        &lt;p&gt;Select Test or Shift, type a string and an integer, then click
            Encode.&lt;/p&gt;
        &lt;p&gt;If you select Test, the TestCoderImpl bean will display the
            argument values.&lt;/p&gt;
        &lt;p&gt;If you select Shift, the CoderImpl bean will return a string that
            shifts the letters in the original string by the value you specify.
            The value must be between 0 and 26.&lt;/p&gt;
        &lt;h:form id="encodeit"&gt;
            &lt;h:selectOneRadio id="coderType"
                              required="true"
                              value="#{coderBean.coderType}"&gt;
                &lt;f:selectItem
                    itemValue="1"
                    itemLabel="Test"/&gt;
                &lt;f:selectItem
                    itemValue="2"
                    itemLabel="Shift Letters"/&gt;
            &lt;/h:selectOneRadio&gt;
            ...</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_running_the_producermethods_example"><a class="anchor" href="#_running_the_producermethods_example"></a>Running the producermethods Example</h3>
<div class="paragraph">
<p>You can use either NetBeans IDE or Maven to build, package, deploy, and run the <code>producermethods</code> application.</p>
</div>
<div class="sect3">
<h4 id="_to_build_package_and_deploy_the_producermethods_example_using_netbeans_ide"><a class="anchor" href="#_to_build_package_and_deploy_the_producermethods_example_using_netbeans_ide"></a>To Build, Package, and Deploy the producermethods Example Using NetBeans IDE</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Make sure that GlassFish Server has been started (see <a href="../../intro/usingexamples/usingexamples.html#_starting_and_stopping_glassfish_server" class="xref page">Starting and Stopping GlassFish Server</a>).</p>
</li>
<li>
<p>From the <strong>File</strong> menu, choose <strong>Open Project</strong>.</p>
</li>
<li>
<p>In the <strong>Open Project</strong> dialog box, navigate to:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asciidoc hljs" data-lang="asciidoc">jakartaee-examples/tutorial/cdi</code></pre>
</div>
</div>
</li>
<li>
<p>Select the <code>producermethods</code> folder.</p>
</li>
<li>
<p>Click <strong>Open Project</strong>.</p>
</li>
<li>
<p>In the <strong>Projects</strong> tab, right-click the <code>producermethods</code> project and select <strong>Build</strong>.</p>
<div class="paragraph">
<p>This command builds and packages the application into a WAR file, <code>producermethods.war</code>, located in the <code>target</code> directory, and then deploys it to GlassFish Server.</p>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_to_build_package_and_deploy_the_producermethods_example_using_maven"><a class="anchor" href="#_to_build_package_and_deploy_the_producermethods_example_using_maven"></a>To Build, Package, and Deploy the producermethods Example Using Maven</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Make sure that GlassFish Server has been started (see <a href="../../intro/usingexamples/usingexamples.html#_starting_and_stopping_glassfish_server" class="xref page">Starting and Stopping GlassFish Server</a>).</p>
</li>
<li>
<p>In a terminal window, go to:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asciidoc hljs" data-lang="asciidoc">jakartaee-examples/tutorial/cdi/producermethods/</code></pre>
</div>
</div>
</li>
<li>
<p>Enter the following command to deploy the application:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">mvn install</code></pre>
</div>
</div>
<div class="paragraph">
<p>This command builds and packages the application into a WAR file, <code>producermethods.war</code>, located in the <code>target</code> directory, and then deploys it to GlassFish Server.</p>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_to_run_the_producermethods_example"><a class="anchor" href="#_to_run_the_producermethods_example"></a>To Run the producermethods Example</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In a web browser, enter the following URL:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asciidoc hljs" data-lang="asciidoc">http://localhost:8080/producermethods</code></pre>
</div>
</div>
</li>
<li>
<p>On the String Encoder page, select either the Test or Shift Letters option, enter a string and the number of letters to shift by, and then click Encode.</p>
<div class="paragraph">
<p>Depending on your selection, the Result line displays either the encoded string or the input values you specified.</p>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_the_producerfields_example_using_producer_fields_to_generate_resources"><a class="anchor" href="#_the_producerfields_example_using_producer_fields_to_generate_resources"></a>The producerfields Example: Using Producer Fields to Generate Resources</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <code>producerfields</code> example, which allows you to create a to-do list, shows how to use a producer field to generate objects that can then be managed by the container.
This example generates an <code>EntityManager</code> object, but resources such as JDBC connections and datasources can also be generated this way.</p>
</div>
<div class="paragraph">
<p>The <code>producerfields</code> example is the simplest possible entity example.
It also contains a qualifier and a class that generates the entity manager.
It also contains a single entity, a stateful session bean, a Facelets page, and a managed bean.</p>
</div>
<div class="paragraph">
<p>The source files are located in the <code><em>jakartaee-examples</em>/tutorial/cdi/producerfields/src/main/java/jakarta/tutorial/producerfields/</code> directory.</p>
</div>
<div class="sect2">
<h3 id="_the_producer_field_for_the_producerfields_example"><a class="anchor" href="#_the_producer_field_for_the_producerfields_example"></a>The Producer Field for the producerfields Example</h3>
<div class="paragraph">
<p>The most important component of the <code>producerfields</code> example is the smallest, the <code>db.UserDatabaseEntityManager</code> class, which isolates the generation of the <code>EntityManager</code> object so it can easily be used by other components in the application.
The class uses a producer field to inject an <code>EntityManager</code> annotated with the <code>@UserDatabase</code> qualifier, also defined in the <code>db</code> package:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Singleton
public class UserDatabaseEntityManager {

    @Produces
    @PersistenceContext
    @UserDatabase
    private EntityManager em;
    ...
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The class does not explicitly produce a persistence unit field, but the application has a <code>persistence.xml</code> file that specifies a persistence unit.
The class is annotated <code>jakarta.inject.Singleton</code> to specify that the injector should instantiate it only once.</p>
</div>
<div class="paragraph">
<p>The <code>db.UserDatabaseEntityManager</code> class also contains commented-out code that uses <code>create</code> and <code>close</code> methods to generate and remove the producer field:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">/*
@PersistenceContext
private EntityManager em;

@Produces
@UserDatabase
public EntityManager create() {
    return em;
}
*/

public void close(@Disposes @UserDatabase EntityManager em) {
    em.close();
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can remove the comment indicators from this code and place them around the field declaration to test how the methods work.
The behavior of the application is the same with either mechanism.</p>
</div>
<div class="paragraph">
<p>The advantage of producing the <code>EntityManager</code> in a separate class rather than simply injecting it into an enterprise bean is that the object can easily be reused in a typesafe way.
Also, a more complex application can create multiple entity managers using multiple persistence units, and this mechanism isolates this code for easy maintenance, as in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Singleton
public class JPAResourceProducer {
    @Produces
    @PersistenceUnit(unitName="pu3")
    @TestDatabase
    EntityManagerFactory customerDatabasePersistenceUnit;

    @Produces
    @PersistenceContext(unitName="pu3")
    @TestDatabase
    EntityManager customerDatabasePersistenceContext;

    @Produces
    @PersistenceUnit(unitName="pu4")
    @Documents
    EntityManagerFactory customerDatabasePersistenceUnit;

    @Produces
    @PersistenceContext(unitName="pu4")
    @Documents
    EntityManager docDatabaseEntityManager;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>EntityManagerFactory</code> declarations also allow applications to use an application-managed entity manager.</p>
</div>
</div>
<div class="sect2">
<h3 id="_the_producerfields_entity_and_session_bean"><a class="anchor" href="#_the_producerfields_entity_and_session_bean"></a>The producerfields Entity and Session Bean</h3>
<div class="paragraph">
<p>The <code>producerfields</code> example contains a simple entity class, <code>entity.ToDo</code>, and a stateful session bean, <code>ejb.RequestBean</code>, that uses it.</p>
</div>
<div class="paragraph">
<p>The entity class contains three fields: an autogenerated <code>id</code> field, a string specifying the task, and a timestamp.
The timestamp field, <code>timeCreated</code>, is annotated with <code>@Temporal</code>, which is required for persistent <code>Date</code> fields.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Entity
public class ToDo implements Serializable {

    ...
    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    private Long id;
    protected String taskText;
    @Temporal(TIMESTAMP)
    protected Date timeCreated;

    public ToDo() {
    }

    public ToDo(Long id, String taskText, Date timeCreated) {
        this.id = id;
        this.taskText = taskText;
        this.timeCreated = timeCreated;
    }
    ...
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The remainder of the <code>ToDo</code> class contains the usual getters, setters, and other entity methods.</p>
</div>
<div class="paragraph">
<p>The <code>RequestBean</code> class injects the <code>EntityManager</code> generated by the producer method, annotated with the <code>@UserDatabase</code> qualifier:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@ConversationScoped
@Stateful
public class RequestBean {

    @Inject
    @UserDatabase
    EntityManager em;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>It then defines two methods, one that creates and persists a single <code>ToDo</code> list item, and another that retrieves all the <code>ToDo</code> items created so far by creating a query:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public ToDo createToDo(String inputString) {
    ToDo toDo = null;
    Date currentTime = Calendar.getInstance().getTime();

    try {
        toDo = new ToDo();
        toDo.setTaskText(inputString);
        toDo.setTimeCreated(currentTime);
        em.persist(toDo);
        return toDo;
    } catch (Exception e) {
        throw new EJBException(e.getMessage());
    }
}

public List&lt;ToDo&gt; getToDos() {
    try {
            List&lt;ToDo&gt; toDos =
                (List&lt;ToDo&gt;) em.createQuery(
                "SELECT t FROM ToDo t ORDER BY t.timeCreated")
                .getResultList();
        return toDos;
    } catch (Exception e) {
        throw new EJBException(e.getMessage());
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_the_producerfields_facelets_pages_and_managed_bean"><a class="anchor" href="#_the_producerfields_facelets_pages_and_managed_bean"></a>The producerfields Facelets Pages and Managed Bean</h3>
<div class="paragraph">
<p>The <code>producerfields</code> example has two Facelets pages, <code>index.xhtml</code> and <code>todolist.xhtml</code>.
The simple form on the <code>index.xhtml</code> page asks the user only for the task.
When the user clicks the Submit button, the <code>listBean.createTask</code> method is called.
When the user clicks the Show Items button, the action specifies that the <code>todolist.xhtml</code> file should be displayed:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">    &lt;h:body&gt;
        &lt;h2&gt;To Do List&lt;/h2&gt;
        &lt;p&gt;Enter a task to be completed.&lt;/p&gt;
        &lt;h:form id="todolist"&gt;
            &lt;p&gt;&lt;h:outputLabel value="Enter a string: " for="inputString"/&gt;
                &lt;h:inputText id="inputString"
                             value="#{listBean.inputString}"/&gt;&lt;/p&gt;
            &lt;p&gt;&lt;h:commandButton value="Submit"
                                action="#{listBean.createTask()}"/&gt;&lt;/p&gt;
            &lt;p&gt;&lt;h:commandButton value="Show Items"
                                action="todolist"/&gt;&lt;/p&gt;
        &lt;/h:form&gt;
        ...
    &lt;/h:body&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The managed bean, <code>web.ListBean</code>, injects the <code>ejb.RequestBean</code> session bean.
It declares the <code>entity.ToDo</code> entity and a list of the entity along with the input string that it passes to the session bean.
The <code>inputString</code> is annotated with the <code>@NotNull</code> Bean Validation constraint, so an attempt to submit an empty string results in an error.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Named
@ConversationScoped
public class ListBean implements Serializable {

    ...
    @EJB
    private RequestBean request;
    @NotNull
    private String inputString;
    private ToDo toDo;
    private List&lt;ToDo&gt; toDos;
    ...
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>createTask</code> method called by the Submit button calls the <code>createToDo</code> method of <code>RequestBean</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public void createTask() {
    this.toDo = request.createToDo(inputString);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>getToDos</code> method, which is called by the <code>todolist.xhtml</code> page, calls the <code>getToDos</code> method of <code>RequestBean</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public List&lt;ToDo&gt; getToDos() {
    return request.getToDos();
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>To force the Facelets page to recognize an empty string as a null value and return an error, the <code>web.xml</code> file sets the context parameter <code>jakarta.faces.INTERPRET_EMPTY_STRING_SUBMITTED_VALUES_AS_NULL</code> to <code>true</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;context-param&gt;
  &lt;param-name&gt;jakarta.faces.INTERPRET_EMPTY_STRING_SUBMITTED_VALUES_AS_NULL&lt;/param-name&gt;
  &lt;param-value&gt;true&lt;/param-value&gt;
&lt;/context-param&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>todolist.xhtml</code> page is a little more complicated than the <code>index.html</code> page.
It contains a <code>dataTable</code> element that displays the contents of the <code>ToDo</code> list.
The body of the page looks like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">    &lt;body&gt;
        &lt;h2&gt;To Do List&lt;/h2&gt;
        &lt;h:form id="showlist"&gt;
            &lt;h:dataTable var="toDo"
                         value="#{listBean.toDos}"
                         rules="all"
                         border="1"
                         cellpadding="5"&gt;
                &lt;h:column&gt;
                    &lt;f:facet name="header"&gt;
                        &lt;h:outputText value="Time Stamp" /&gt;
                    &lt;/f:facet&gt;
                    &lt;h:outputText value="#{toDo.timeCreated}" /&gt;
                &lt;/h:column&gt;
                &lt;h:column&gt;
                    &lt;f:facet name="header"&gt;
                        &lt;h:outputText value="Task" /&gt;
                    &lt;/f:facet&gt;
                    &lt;h:outputText value="#{toDo.taskText}" /&gt;
                &lt;/h:column&gt;
            &lt;/h:dataTable&gt;
            &lt;p&gt;&lt;h:commandButton id="back" value="Back" action="index" /&gt;&lt;/p&gt;
        &lt;/h:form&gt;
    &lt;/body&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The value of the <code>dataTable</code> is <code>listBean.toDos</code>, the list returned by the managed bean&#8217;s <code>getToDos</code> method, which in turn calls the session bean&#8217;s <code>getToDos</code> method.
Each row of the table displays the <code>timeCreated</code> and <code>taskText</code> fields of the individual task.
Finally, a Back button returns the user to the <code>index.xhtml</code> page.</p>
</div>
</div>
<div class="sect2">
<h3 id="_running_the_producerfields_example"><a class="anchor" href="#_running_the_producerfields_example"></a>Running the producerfields Example</h3>
<div class="paragraph">
<p>You can use either NetBeans IDE or Maven to build, package, deploy, and run the <code>producerfields</code> application.</p>
</div>
<div class="sect3">
<h4 id="_to_build_package_and_deploy_the_producerfields_example_using_netbeans_ide"><a class="anchor" href="#_to_build_package_and_deploy_the_producerfields_example_using_netbeans_ide"></a>To Build, Package, and Deploy the producerfields Example Using NetBeans IDE</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Make sure that GlassFish Server has been started (see <a href="../../intro/usingexamples/usingexamples.html#_starting_and_stopping_glassfish_server" class="xref page">Starting and Stopping GlassFish Server</a>).</p>
</li>
<li>
<p>If the database server is not already running, start it by following the instructions in <a href="../../intro/usingexamples/usingexamples.html#_starting_and_stopping_apache_derby" class="xref page">Starting and Stopping Apache Derby</a>.</p>
</li>
<li>
<p>From the <strong>File</strong> menu, choose <strong>Open Project</strong>.</p>
</li>
<li>
<p>In the <strong>Open Project</strong> dialog box, navigate to:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asciidoc hljs" data-lang="asciidoc">jakartaee-examples/tutorial/cdi</code></pre>
</div>
</div>
</li>
<li>
<p>Select the <code>producerfields</code> folder.</p>
</li>
<li>
<p>Click <strong>Open Project</strong>.</p>
</li>
<li>
<p>In the <strong>Projects</strong> tab, right-click the <code>producerfields</code> project and select <strong>Build</strong>.</p>
<div class="paragraph">
<p>This command builds and packages the application into a WAR file, <code>producerfields.war</code>, located in the <code>target</code> directory, and then deploys it to GlassFish Server.</p>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_to_build_package_and_deploy_the_producerfields_example_using_maven"><a class="anchor" href="#_to_build_package_and_deploy_the_producerfields_example_using_maven"></a>To Build, Package, and Deploy the producerfields Example Using Maven</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Make sure that GlassFish Server has been started (see <a href="../../intro/usingexamples/usingexamples.html#_starting_and_stopping_glassfish_server" class="xref page">Starting and Stopping GlassFish Server</a>).</p>
</li>
<li>
<p>If the database server is not already running, start it by following the instructions in <a href="../../intro/usingexamples/usingexamples.html#_starting_and_stopping_apache_derby" class="xref page">Starting and Stopping Apache Derby</a>.</p>
</li>
<li>
<p>In a terminal window, go to:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asciidoc hljs" data-lang="asciidoc">jakartaee-examples/tutorial/cdi/producerfields/</code></pre>
</div>
</div>
</li>
<li>
<p>Enter the following command to deploy the application:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">mvn install</code></pre>
</div>
</div>
<div class="paragraph">
<p>This command builds and packages the application into a WAR file, <code>producerfields.war</code>, located in the <code>target</code> directory, and then deploys it to GlassFish Server.</p>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_to_run_the_producerfields_example"><a class="anchor" href="#_to_run_the_producerfields_example"></a>To Run the producerfields Example</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In a web browser, enter the following URL:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asciidoc hljs" data-lang="asciidoc">http://localhost:8080/producerfields</code></pre>
</div>
</div>
</li>
<li>
<p>On the Create To Do List page, enter a string in the field and click Submit.</p>
<div class="paragraph">
<p>You can enter additional strings and click Submit to create a task list with multiple items.</p>
</div>
</li>
<li>
<p>Click Show Items.</p>
<div class="paragraph">
<p>The To Do List page opens, showing the timestamp and text for each item you created.</p>
</div>
</li>
<li>
<p>Click Back to return to the Create To Do List page.</p>
<div class="paragraph">
<p>On this page, you can enter more items in the list.</p>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_the_billpayment_example_using_events_and_interceptors"><a class="anchor" href="#_the_billpayment_example_using_events_and_interceptors"></a>The billpayment Example: Using Events and Interceptors</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <code>billpayment</code> example shows how to use both events and interceptors.</p>
</div>
<div class="paragraph">
<p>The source files are located in the <code><em>jakartaee-examples</em>/tutorial/cdi/billpayment/src/main/java/jakarta/tutorial/billpayment/</code> directory.</p>
</div>
<div class="sect2">
<h3 id="_overview_of_the_billpayment_example"><a class="anchor" href="#_overview_of_the_billpayment_example"></a>Overview of the billpayment Example</h3>
<div class="paragraph">
<p>The example simulates paying an amount using a debit card or credit card.
When the user chooses a payment method, the managed bean creates an appropriate event, supplies its payload, and fires it.
A simple event listener handles the event using observer methods.</p>
</div>
<div class="paragraph">
<p>The example also defines an interceptor that is set on a class and on two methods of another class.</p>
</div>
</div>
<div class="sect2">
<h3 id="_the_paymentevent_event_class"><a class="anchor" href="#_the_paymentevent_event_class"></a>The PaymentEvent Event Class</h3>
<div class="paragraph">
<p>The event class, <code>event.PaymentEvent</code>, is a simple bean class that contains a no-argument constructor.
It also has a <code>toString</code> method and getter and setter methods for the payload components: a <code>String</code> for the payment type, a <code>BigDecimal</code> for the payment amount, and a <code>Date</code> for the timestamp.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public class PaymentEvent implements Serializable {

    ...
    public String paymentType;
    public BigDecimal value;
    public Date datetime;

    public PaymentEvent() {
    }

    @Override
    public String toString() {
        return this.paymentType
                + " = $" + this.value.toString()
                + " at " + this.datetime.toString();
    }
    ...
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The event class is a simple bean that is instantiated by the managed bean using <code>new</code> and then populated.
For this reason, the CDI container cannot intercept the creation of the bean, and hence it cannot allow interception of its getter and setter methods.</p>
</div>
</div>
<div class="sect2">
<h3 id="_the_paymenthandler_event_listener"><a class="anchor" href="#_the_paymenthandler_event_listener"></a>The PaymentHandler Event Listener</h3>
<div class="paragraph">
<p>The event listener, <code>listener.PaymentHandler</code>, contains two observer methods, one for each of the two event types:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Logged
@SessionScoped
public class PaymentHandler implements Serializable {

    ...
    public void creditPayment(@Observes @Credit PaymentEvent event) {
        logger.log(Level.INFO, "PaymentHandler - Credit Handler: {0}",
                event.toString());

        // call a specific Credit handler class...
    }

    public void debitPayment(@Observes @Debit PaymentEvent event) {
        logger.log(Level.INFO, "PaymentHandler - Debit Handler: {0}",
                event.toString());

        // call a specific Debit handler class...
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Each observer method takes as an argument the event, annotated with <code>@Observes</code> and with the qualifier for the type of payment.
In a real application, the observer methods would pass the event information on to another component that would perform business logic on the payment.</p>
</div>
<div class="paragraph">
<p>The qualifiers are defined in the <code>payment</code> package, described in <a href="#_the_billpayment_facelets_pages_and_managed_bean">The billpayment Facelets Pages and Managed Bean</a>.</p>
</div>
<div class="paragraph">
<p>The <code>PaymentHandler</code> bean is annotated <code>@Logged</code> so that all its methods can be intercepted.</p>
</div>
</div>
<div class="sect2">
<h3 id="_the_billpayment_facelets_pages_and_managed_bean"><a class="anchor" href="#_the_billpayment_facelets_pages_and_managed_bean"></a>The billpayment Facelets Pages and Managed Bean</h3>
<div class="paragraph">
<p>The <code>billpayment</code> example contains two Facelets pages, <code>index.xhtml</code> and the very simple <code>response.xhtml</code>.
The body of <code>index.xhtml</code> looks like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">    &lt;h:body&gt;
        &lt;h3&gt;Bill Payment Options&lt;/h3&gt;
        &lt;p&gt;Enter an amount, select Debit Card or Credit Card,
            then click Pay.&lt;/p&gt;
        &lt;h:form&gt;
            &lt;p&gt;
            &lt;h:outputLabel value="Amount: $" for="amt"/&gt;
            &lt;h:inputText id="amt" value="#{paymentBean.value}"
                         required="true"
                         requiredMessage="An amount is required."
                         maxlength="15" /&gt;
            &lt;/p&gt;
            &lt;h:outputLabel value="Options:" for="opt"/&gt;
            &lt;h:selectOneRadio id="opt" value="#{paymentBean.paymentOption}"&gt;
                &lt;f:selectItem id="debit" itemLabel="Debit Card"
                              itemValue="1"/&gt;
                &lt;f:selectItem id="credit" itemLabel="Credit Card"
                              itemValue="2" /&gt;
            &lt;/h:selectOneRadio&gt;
            &lt;p&gt;&lt;h:commandButton id="submit" value="Pay"
                                action="#{paymentBean.pay}" /&gt;&lt;/p&gt;
            &lt;p&gt;&lt;h:commandButton value="Reset"
                                action="#{paymentBean.reset}" /&gt;&lt;/p&gt;
        &lt;/h:form&gt;
        ...
    &lt;/h:body&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The input field takes a payment amount, passed to <code>paymentBean.value</code>.
Two options ask the user to select a Debit Card or Credit Card payment, passing the integer value to <code>paymentBean.paymentOption</code>.
Finally, the Pay command button&#8217;s action is set to the method <code>paymentBean.pay</code>, and the Reset button&#8217;s action is set to the <code>paymentBean.reset</code> method.</p>
</div>
<div class="paragraph">
<p>The <code>payment.PaymentBean</code> managed bean uses qualifiers to differentiate between the two kinds of payment event:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Named
@SessionScoped
public class PaymentBean implements Serializable {

   ...
    @Inject
    @Credit
    Event&lt;PaymentEvent&gt; creditEvent;

    @Inject
    @Debit
    Event&lt;PaymentEvent&gt; debitEvent;
    ...
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The qualifiers, <code>@Credit</code> and <code>@Debit</code>, are defined in the <code>payment</code> package along with <code>PaymentBean</code>.</p>
</div>
<div class="paragraph">
<p>Next, the <code>PaymentBean</code> defines the properties it obtains from the Facelets page and will pass on to the event:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public static final int DEBIT = 1;
public static final int CREDIT = 2;
private int paymentOption = DEBIT;

@Digits(integer = 10, fraction = 2, message = "Invalid value")
private BigDecimal value;

private Date datetime;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>paymentOption</code> value is an integer passed in from the option component; the default value is <code>DEBIT</code>.
The <code>value</code> is a <code>BigDecimal</code> with a Bean Validation constraint that enforces a currency value with a maximum number of digits.
The timestamp for the event, <code>datetime</code>, is a <code>Date</code> object initialized when the <code>pay</code> method is called.</p>
</div>
<div class="paragraph">
<p>The <code>pay</code> method of the bean first sets the timestamp for this payment event.
It then creates and populates the event payload, using the constructor for the <code>PaymentEvent</code> and calling the event&#8217;s setter methods, using the bean properties as arguments.
It then fires the event.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Logged
public String pay() {
    this.setDatetime(Calendar.getInstance().getTime());
    switch (paymentOption) {
        case DEBIT:
            PaymentEvent debitPayload = new PaymentEvent();
            debitPayload.setPaymentType("Debit");
            debitPayload.setValue(value);
            debitPayload.setDatetime(datetime);
            debitEvent.fire(debitPayload);
            break;
        case CREDIT:
            PaymentEvent creditPayload = new PaymentEvent();
            creditPayload.setPaymentType("Credit");
            creditPayload.setValue(value);
            creditPayload.setDatetime(datetime);
            creditEvent.fire(creditPayload);
            break;
        default:
            logger.severe("Invalid payment option!");
    }
    return "response";
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>pay</code> method returns the page to which the action is redirected, <code>response.xhtml</code>.</p>
</div>
<div class="paragraph">
<p>The <code>PaymentBean</code> class also contains a <code>reset</code> method that empties the value field on the <code>index.xhtml</code> page and sets the payment option to the default:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Logged
public void reset() {
    setPaymentOption(DEBIT);
    setValue(BigDecimal.ZERO);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In this bean, only the <code>pay</code> and <code>reset</code> methods are intercepted.</p>
</div>
<div class="paragraph">
<p>The <code>response.xhtml</code> page displays the amount paid.
It uses a <code>rendered</code> expression to display the payment method:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">    &lt;h:body&gt;
        &lt;h:form&gt;
            &lt;h2&gt;Bill Payment: Result&lt;/h2&gt;
            &lt;h3&gt;Amount Paid with
                &lt;h:outputText id="debit" value="Debit Card: "
                              rendered="#{paymentBean.paymentOption eq 1}" /&gt;
                &lt;h:outputText id="credit" value="Credit Card: "
                              rendered="#{paymentBean.paymentOption eq 2}" /&gt;
                &lt;h:outputText id="result" value="#{paymentBean.value}"&gt;
                    &lt;f:convertNumber type="currency"/&gt;
                &lt;/h:outputText&gt;
            &lt;/h3&gt;
            &lt;p&gt;&lt;h:commandButton id="back" value="Back" action="index" /&gt;&lt;/p&gt;
        &lt;/h:form&gt;
    &lt;/h:body&gt;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_the_loggedinterceptor_interceptor_class"><a class="anchor" href="#_the_loggedinterceptor_interceptor_class"></a>The LoggedInterceptor Interceptor Class</h3>
<div class="paragraph">
<p>The interceptor class, <code>LoggedInterceptor</code>, and its interceptor binding, <code>Logged</code>, are both defined in the <code>interceptor</code> package.
The <code>Logged</code> interceptor binding is defined as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Inherited
@InterceptorBinding
@Retention(RUNTIME)
@Target({METHOD, TYPE})
public @interface Logged {
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>LoggedInterceptor</code> class looks like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Logged
@Interceptor
public class LoggedInterceptor implements Serializable {

    ...

    public LoggedInterceptor() {
    }

    @AroundInvoke
    public Object logMethodEntry(InvocationContext invocationContext)
            throws Exception {
        System.out.println("Entering method: "
                + invocationContext.getMethod().getName() + " in class "
                + invocationContext.getMethod().getDeclaringClass().getName());

        return invocationContext.proceed();
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The class is annotated with both the <code>@Logged</code> and the <code>@Interceptor</code> annotations.
The <code>@AroundInvoke</code> method, <code>logMethodEntry</code>, takes the required <code>InvocationContext</code> argument and calls the required <code>proceed</code> method.
When a method is intercepted, <code>logMethodEntry</code> displays the name of the method being invoked as well as its class.</p>
</div>
<div class="paragraph">
<p>To enable the interceptor, the <code>beans.xml</code> file defines it as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;interceptors&gt;
    &lt;class&gt;ee.jakarta.tutorial.billpayment.interceptor.LoggedInterceptor&lt;/class&gt;
&lt;/interceptors&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>In this application, the <code>PaymentEvent</code> and <code>PaymentHandler</code> classes are annotated <code>@Logged</code>, so all their methods are intercepted.
In <code>PaymentBean</code>, only the <code>pay</code> and <code>reset</code> methods are annotated <code>@Logged</code>, so only those methods are intercepted.</p>
</div>
</div>
<div class="sect2">
<h3 id="_running_the_billpayment_example"><a class="anchor" href="#_running_the_billpayment_example"></a>Running the billpayment Example</h3>
<div class="paragraph">
<p>You can use either NetBeans IDE or Maven to build, package, deploy, and run the <code>billpayment</code> application.</p>
</div>
<div class="sect3">
<h4 id="_to_build_package_and_deploy_the_billpayment_example_using_netbeans_ide"><a class="anchor" href="#_to_build_package_and_deploy_the_billpayment_example_using_netbeans_ide"></a>To Build, Package, and Deploy the billpayment Example Using NetBeans IDE</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Make sure that GlassFish Server has been started (see <a href="../../intro/usingexamples/usingexamples.html#_starting_and_stopping_glassfish_server" class="xref page">Starting and Stopping GlassFish Server</a>).</p>
</li>
<li>
<p>From the <strong>File</strong> menu, choose <strong>Open Project</strong>.</p>
</li>
<li>
<p>In the <strong>Open Project</strong> dialog box, navigate to:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asciidoc hljs" data-lang="asciidoc">jakartaee-examples/tutorial/cdi</code></pre>
</div>
</div>
</li>
<li>
<p>Select the <code>billpayment</code> folder.</p>
</li>
<li>
<p>Click <strong>Open Project</strong>.</p>
</li>
<li>
<p>In the <strong>Projects</strong> tab, right-click the <code>billpayment</code> project and select <strong>Build</strong>.</p>
<div class="paragraph">
<p>This command builds and packages the application into a WAR file, <code>billpayment.war</code>, located in the <code>target</code> directory, and then deploys it to GlassFish Server.</p>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_to_build_package_and_deploy_the_billpayment_example_using_maven"><a class="anchor" href="#_to_build_package_and_deploy_the_billpayment_example_using_maven"></a>To Build, Package, and Deploy the billpayment Example Using Maven</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Make sure that GlassFish Server has been started (see <a href="../../intro/usingexamples/usingexamples.html#_starting_and_stopping_glassfish_server" class="xref page">Starting and Stopping GlassFish Server</a>).</p>
</li>
<li>
<p>In a terminal window, go to:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asciidoc hljs" data-lang="asciidoc">jakartaee-examples/tutorial/cdi/billpayment/</code></pre>
</div>
</div>
</li>
<li>
<p>Enter the following command to deploy the application:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">mvn install</code></pre>
</div>
</div>
<div class="paragraph">
<p>This command builds and packages the application into a WAR file, <code>billpayment.war</code>, located in the <code>target</code> directory, and then deploys it to GlassFish Server.</p>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_to_run_the_billpayment_example"><a class="anchor" href="#_to_run_the_billpayment_example"></a>To Run the billpayment Example</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In a web browser, enter the following URL:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asciidoc hljs" data-lang="asciidoc">http://localhost:8080/billpayment</code></pre>
</div>
</div>
</li>
<li>
<p>On the Bill Payment Options page, enter a value in the Amount field.</p>
<div class="paragraph">
<p>The amount can contain up to 10 digits and include up to two decimal places.
For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asciidoc hljs" data-lang="asciidoc">9876.54</code></pre>
</div>
</div>
</li>
<li>
<p>Select Debit Card or Credit Card and click Pay.</p>
<div class="paragraph">
<p>The Bill Payment: Result page opens, displaying the amount paid and the method of payment:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asciidoc hljs" data-lang="asciidoc">Amount Paid with Credit Card: $9,876.34</code></pre>
</div>
</div>
</li>
<li>
<p>Click Back to return to the Bill Payment Options page.</p>
<div class="paragraph">
<p>You can also click Reset to return to the initial page values.</p>
</div>
</li>
<li>
<p>Examine the server log output.</p>
<div class="paragraph">
<p>In NetBeans IDE, the output is visible in the GlassFish Server Output tab.
Otherwise, view <code><em>domain-dir</em>/logs/server.log</code>.</p>
</div>
<div class="paragraph">
<p>The output from each interceptor appears in the log, followed by the additional logger output defined by the constructor and methods:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asciidoc hljs" data-lang="asciidoc">INFO: Entering method: pay in class billpayment.payment.PaymentBean
INFO: PaymentHandler created.
INFO: Entering method: debitPayment in class billpayment.listener.PaymentHandler
INFO: PaymentHandler - Debit Handler: Debit = $1234.56 at Tue Dec 14 14:50:28 EST 2010</code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_the_decorators_example_decorating_a_bean"><a class="anchor" href="#_the_decorators_example_decorating_a_bean"></a>The decorators Example: Decorating a Bean</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <code>decorators</code> example, which is yet another variation on the <code>encoder</code> example, shows how to use a decorator to implement additional business logic for a bean.</p>
</div>
<div class="paragraph">
<p>The source files are located in the <code><em>jakartaee-examples</em>/tutorial/cdi/decorators/src/main/java/jakarta/tutorial/decorators/</code> directory.</p>
</div>
<div class="sect2">
<h3 id="_overview_of_the_decorators_example"><a class="anchor" href="#_overview_of_the_decorators_example"></a>Overview of the decorators Example</h3>
<div class="paragraph">
<p>Instead of having the user choose between two alternative implementations of an interface at deployment time or runtime, a decorator adds some additional logic to a single implementation of the interface.</p>
</div>
<div class="paragraph">
<p>The example includes an interface, an implementation of it, a decorator, an interceptor, a managed bean, a Facelets page, and configuration files.</p>
</div>
</div>
<div class="sect2">
<h3 id="_components_of_the_decorators_example"><a class="anchor" href="#_components_of_the_decorators_example"></a>Components of the decorators Example</h3>
<div class="paragraph">
<p>The <code>decorators</code> example is very similar to the <code>encoder</code> example described in <a href="#_the_encoder_example_using_alternatives">The encoder Example: Using Alternatives</a>.
Instead of providing two implementations of the <code>Coder</code> interface, however, this example provides only the <code>CoderImpl</code> class.
The decorator class, <code>CoderDecorator</code>, rather than simply return the coded string, displays the input and output strings' values and length.</p>
</div>
<div class="paragraph">
<p>The <code>CoderDecorator</code> class, like <code>CoderImpl</code>, implements the business method of the <code>Coder</code> interface, <code>codeString</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Decorator
public abstract class CoderDecorator implements Coder {

    @Inject
    @Delegate
    @Any
    Coder coder;

    public String codeString(String s, int tval) {
        int len = s.length();

        return "\"" + s + "\" becomes " + "\"" + coder.codeString(s, tval)
                + "\", " + len + " characters in length";
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The decorator&#8217;s <code>codeString</code> method calls the delegate object&#8217;s <code>codeString</code> method to perform the actual encoding.</p>
</div>
<div class="paragraph">
<p>The <code>decorators</code> example includes the <code>Logged</code> interceptor binding and <code>LoggedInterceptor</code> class from the <code>billpayment</code> example.
For this example, the interceptor is set on the <code>CoderBean.encodeString</code> method and the <code>CoderImpl.codeString</code> method.
The interceptor code is unchanged; interceptors are usually reusable for different applications.</p>
</div>
<div class="paragraph">
<p>Except for the interceptor annotations, the <code>CoderBean</code> and <code>CoderImpl</code> classes are identical to the versions in the <code>encoder</code> example.</p>
</div>
<div class="paragraph">
<p>The <code>beans.xml</code> file specifies both the decorator and the interceptor:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;decorators&gt;
    &lt;class&gt;ee.jakarta.tutorial.decorators.CoderDecorator&lt;/class&gt;
&lt;/decorators&gt;
&lt;interceptors&gt;
    &lt;class&gt;ee.jakarta.tutorial.decorators.LoggedInterceptor&lt;/class&gt;
&lt;/interceptors&gt;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_running_the_decorators_example"><a class="anchor" href="#_running_the_decorators_example"></a>Running the decorators Example</h3>
<div class="paragraph">
<p>You can use either NetBeans IDE or Maven to build, package, deploy, and run the <code>decorators</code> application.</p>
</div>
<div class="sect3">
<h4 id="_to_build_package_and_deploy_the_decorators_example_using_netbeans_ide"><a class="anchor" href="#_to_build_package_and_deploy_the_decorators_example_using_netbeans_ide"></a>To Build, Package, and Deploy the decorators Example Using NetBeans IDE</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Make sure that GlassFish Server has been started (see <a href="../../intro/usingexamples/usingexamples.html#_starting_and_stopping_glassfish_server" class="xref page">Starting and Stopping GlassFish Server</a>).</p>
</li>
<li>
<p>From the <strong>File</strong> menu, choose <strong>Open Project</strong>.</p>
</li>
<li>
<p>In the <strong>Open Project</strong> dialog box, navigate to:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asciidoc hljs" data-lang="asciidoc">jakartaee-examples/tutorial/cdi</code></pre>
</div>
</div>
</li>
<li>
<p>Select the <code>decorators</code> folder.</p>
</li>
<li>
<p>Click <strong>Open Project</strong>.</p>
</li>
<li>
<p>In the <strong>Projects</strong> tab, right-click the <code>decorators</code> project and select <strong>Build</strong>.</p>
<div class="paragraph">
<p>This command builds and packages the application into a WAR file, <code>decorators.war</code>, located in the <code>target</code> directory, and then deploys it to GlassFish Server.</p>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_to_build_package_and_deploy_the_decorators_example_using_maven"><a class="anchor" href="#_to_build_package_and_deploy_the_decorators_example_using_maven"></a>To Build, Package, and Deploy the decorators Example Using Maven</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Make sure that GlassFish Server has been started (see <a href="../../intro/usingexamples/usingexamples.html#_starting_and_stopping_glassfish_server" class="xref page">Starting and Stopping GlassFish Server</a>).</p>
</li>
<li>
<p>In a terminal window, go to:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asciidoc hljs" data-lang="asciidoc">jakartaee-examples/tutorial/cdi/decorators/</code></pre>
</div>
</div>
</li>
<li>
<p>Enter the following command to deploy the application:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">mvn install</code></pre>
</div>
</div>
<div class="paragraph">
<p>This command builds and packages the application into a WAR file, <code>decorators.war</code>, located in the <code>target</code> directory, and then deploys it to GlassFish Server.</p>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_to_run_the_decorators_example"><a class="anchor" href="#_to_run_the_decorators_example"></a>To Run the decorators Example</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In a web browser, enter the following URL:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asciidoc hljs" data-lang="asciidoc">http://localhost:8080/decorators</code></pre>
</div>
</div>
</li>
<li>
<p>On the Decorated String Encoder page, enter a string and the number of letters to shift by, and then click Encode.</p>
<div class="paragraph">
<p>The output from the decorator method appears in blue on the Result line.
For example, if you entered <code>Java</code> and <code>4</code>, you would see the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asciidoc hljs" data-lang="asciidoc">"Java" becomes "Neze", 4 characters in length</code></pre>
</div>
</div>
</li>
<li>
<p>Examine the server log output.</p>
<div class="paragraph">
<p>In NetBeans IDE, the output is visible in the GlassFish Server Output tab.
Otherwise, view <code><em>domain-dir</em>/logs/server.log</code>.</p>
</div>
<div class="paragraph">
<p>The output from the interceptors appears:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asciidoc hljs" data-lang="asciidoc">INFO: Entering method: encodeString in class ee.jakarta.tutorial.decorators.CoderBean
INFO: Entering method: codeString in class ee.jakarta.tutorial.decorators.CoderImpl</code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
</div>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <p>This page was built using the Antora default UI.</p>
  <p>The source code for this UI is licensed under the terms of the MPL-2.0 license.</p>
</footer>
<script id="site-script" src="../../../../_/js/site.js" data-ui-root-path="../../../../_"></script>
<script async src="../../../../_/js/vendor/highlight.js"></script>
  </body>
</html>
